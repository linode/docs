(()=>{function s(e=0){let o=new Date;return o.setTime(o.getTime()+e*24*60*60*1e3),o}function d(e){if(localStorage.getItem(e)===null)return;let o=new Date,t=localStorage.getItem(`${e}_exp`),r=t!==null?new Date(t):o;if(isNaN(r)){localStorage.removeItem(`${e}_exp`);return}o<r||(localStorage.removeItem(e),localStorage.removeItem(`${e}_exp`))}function f(e,o,t=null,r=!0){let l=localStorage.getItem(e);l!==null&&l!==o&&!r||(localStorage.setItem(e,o),t!==null&&localStorage.setItem(`${e}_exp`,t.toUTCString()))}function p(e,o,t=null,r=!0){if(o=encodeURIComponent(o),document.cookie.indexOf(`${e}=`)>=0&&document.cookie.indexOf(`${e}=${o}`)<0&&!r)return;let l=t!==null?`expires=${t.toUTCString()}; `:"";document.cookie=`${e}=${o}; domain=.linode.com; ${l}path=/; secure; samesite=lax; `}function a(e){let o=new URL(window.location.href),t=o.searchParams.get(e.param);if(e.local&&d(e.local),!t||e.regex&&!t.match(e.regex))return;let r=e.days?s(e.days):null;e.local&&f(e.local,t,r),e.cookie&&p(e.cookie,t,r)}a({param:"r",cookie:"referralCode",days:14,regex:/^[0-9a-f]{40}$/i});var h=Object.fromEntries(document.cookie.split(/\s*;\s*/).map(e=>e.split(/\s*=\s*/))),g=document.getElementsByTagName("body")[0];h.referralCode&&g.classList.add("js-is-referral"),a({param:"promo",cookie:"promoCode",local:"promoCode",days:1,regex:/^[0-9a-z-_]*$/i}),a({param:"promo_length",cookie:"promoLength",local:"promoLength",days:1,regex:/^[0-9]*$/}),a({param:"promo_value",cookie:"promoValue",local:"promoValue",days:1,regex:/^[0-9]*$/});function k(e,o){Array.from(document.querySelectorAll('a[href*="login.linode.com"][href*="/signup"]')).forEach(r=>{let l=new URL(r.href);if(l.searchParams.has("promo")){if(!r.hasAttribute("data-promo-override")||!o)return;l.searchParams.delete("promo")}e&&l.searchParams.set("promo",e),r.href=l.toString()})}function w(e,o){Array.from(document.querySelectorAll('form[action*="login.linode.com/signup"]')).forEach(r=>{let l=new URL(r.action),m=r.querySelector('input[name="promo"]');if(m){if(!m.hasAttribute("data-promo-override")||!o)return;m.remove()}if(e){let i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","promo"),i.setAttribute("value",e),r.appendChild(i)}})}function n(e,o){k(e,o),w(e,o)}var c=Object.fromEntries(document.cookie.split(/\s*;\s*/).map(e=>e.split(/\s*=\s*/))),u=localStorage.getItem("promoCode");c.referralCode?n("",!0):u||c.promoCode?n(u||c.promoCode,!0):fetch("https://www.linode.com/wp-json/linode/v1/promo-data").then(e=>{if(!e.ok)throw new Error("");return e}).then(e=>e.json()).then(e=>{e.global&&e.global.promo_code&&n(e.global.promo_code,!1)}).catch(e=>{})})();
