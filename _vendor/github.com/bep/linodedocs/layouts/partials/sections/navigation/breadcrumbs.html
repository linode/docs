{{ $p := .page }}
{{ $wrap := .wrap }}
<nav class="breadcrumbs text-sm w-full" aria-label="breadcrumbs" x-data="lnBreadcrumbs.New(lnSearchConfig)" id="breadcrumbs-{{ $wrap }}"
    @search:results-blank.document="receiveData($event.detail);" @search:results-initial.document="receiveData($event.detail);"  
    @ln:page-info.document="receivePageInfo($event.detail);" @turbolinks:before-render.document="onTurbolinksBeforeRender();" data-turbolinks-permanent>
  <ol class="list-none pb-0 inline-flex {{if $wrap }}flex-wrap {{end}}w-full -mt-2">
    <li class="flex items-center mt-2">
      <a class="max-w-32 truncate" href="{{ site.Home.RelPermalink }}">
        <div class="flex content-center space-x-2">
          <div class="flex-shrink-0">
            <svg class="breadcrumbs__icon--home" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
              <path
                                d="M570.24 247.41L512 199.52V104a8 8 0 0 0-8-8h-32a8 8 0 0 0-7.95 7.88v56.22L323.87 45a56.06 56.06 0 0 0-71.74 0L5.76 247.41a16 16 0 0 0-2 22.54L14 282.25a16 16 0 0 0 22.53 2L64 261.69V448a32.09 32.09 0 0 0 32 32h128a32.09 32.09 0 0 0 32-32V344h64v104a32.09 32.09 0 0 0 32 32h128a32.07 32.07 0 0 0 32-31.76V261.67l27.53 22.62a16 16 0 0 0 22.53-2L572.29 270a16 16 0 0 0-2.05-22.59zM463.85 432H368V328a32.09 32.09 0 0 0-32-32h-96a32.09 32.09 0 0 0-32 32v104h-96V222.27L288 77.65l176 144.56z" />
            </svg>
          </div>
          <div>
            <p class="text-sm">
              Docs Home
            </p>
          </div>
        </div>
      </a>
      <template x-if="data.breadcrumbs.sections.length > 0">
        {{ template "breadcrumbs-arrow" . }}
      </template>
    </li>
    <template x-for="(b, i) in data.breadcrumbs.sections" :key="b">
      <li class="flex items-center mt-2">
        <a x-text="b.linkTitle" :href="b.href"></a>
        <template x-if="i < (data.breadcrumbs.sections.length - 1)">
          {{ template "breadcrumbs-arrow" . }}
        </template>
      </li>
    </template>
    <li class="flex items-center mt-2" x-show="data.breadcrumbs.page.kind === 'page'">
      {{ template "breadcrumbs-arrow" . }}
      <a x-text="data.breadcrumbs.page.linkTitle" :href="data.breadcrumbs.page.href"></a>
    </li>
  </ol>
</nav>

{{ define "breadcrumbs-arrow"}}
  <svg class="mx-4 text-basicgray" style="width: 5px; height: 13px;">
    <use href="#icon--arrow-right"></use>
  </svg>
{{ end }}