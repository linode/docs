<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Enable SSL for HTTPS Configuration on nginx</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="This guide will teach you how to provide encrypted access to resources using TSL/SSL for HTTP connections on Nginx.">
        <meta name="keywords" content="ssl, tls, nginx, https, secure http, encryption for HTTP, SSL certificates with Nginx, certificate signing request">
        
        <meta property="og:title" content="Enable SSL for HTTPS Configuration on nginx">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://linode.com/docs/security/ssl/enable-ssl-for-https-configuration-on-nginx/">
        <meta property="og:description" content="This guide will teach you how to provide encrypted access to resources using TSL/SSL for HTTP connections on Nginx.">
        <meta property="og:site_name" content="Linode Guides &amp; Tutorials">
        
        
        <meta name="twitter:card" content="summary">
        
        <meta name="twitter:site" content="@linode">
        <link rel="alternate" type="application/rss" href="https://linode.com/docs/index.xml">

        
             <link href="/docs/build/stylesheets/home.css" rel='stylesheet' type='text/css'>

        
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
        <link rel="canonical" href="https://linode.com/docs/security/ssl/enable-ssl-for-https-configuration-on-nginx/">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body class="no-subnav">
         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchLabel" id="ds-search-modal">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div id="ds-search-input">
				<div class="input-group col-md-12">
					<input id="ds-search" type="text" class="form-control input-lg" placeholder="Search" />
					<span class="input-group-btn">
						<button class="btn btn-info btn-lg" id="ds-search-btn-modal" type="button">
						<i class="glyphicon glyphicon-search"></i>
						</button>
					</span>
				</div>
				<ul class="list-group" id="ds-search-list">
				</ul>
			</div>
		</div>
	</div>
</div> 
         
        <header>
            <nav id="main-nav" class="navbar navbar-default" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://www.linode.com"><img id="navbar-logo" src="/docs/media/images/header/linode-logo.svg" style="height:57px"></a>
    </div>

    <div class="collapse navbar-collapse navbar-top-collapse">
      <ul class="nav navbar-nav navbar-right">

                <li><a href="https://www.linode.com/"><span class='nav-home'></span></a></li>
                <li><a href="https://www.linode.com/linodes">Features</a></li>
                <li><a href="https://www.linode.com/pricing">Pricing</a></li>
                <li><a href="https://www.linode.com/addons">Add-ons</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-main-nav dropdown-mega">
            <li class="dropdown-third">
              <ul >
                <li><a href="https://linode.com/docs/getting-started">Getting Started</a></li>
                <li><a href="https://linode.com/docs/migrate-from-shared">Migrating to Linode</a></li>
                <li><a href="https://linode.com/docs/hosting-website">Hosting a Website</a></li>
                <li class="divider"></li>
                <li class="big"><a href="https://linode.com/docs"><i class="fa fa-book"></i> Guides &amp; Tutorials</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third middle">
              <ul >
                <li><a href="https://www.linode.com/api">API</a></li>
                <li><a href="https://www.linode.com/stackscripts">StackScripts</a></li>
                <li><a href="https://www.linode.com/mobile">Mobile</a></li>
                <li><a href="https://www.linode.com/cli" target="_blank">CLI</a></li>

                <li class="divider"></li>

                <li><a href="https://www.linode.com/chat"><i class="fa fa-bullhorn gray"></i> Chat</a></li>
                <li><a href="https://forum.linode.com"><i class="fa fa-comments"></i> Community Forum</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third">
              <ul >
                <li><a href="https://blog.linode.com">Blog</a></li>
                <li><a href="http://status.linode.com">System Status</a></li>
                <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
                <li><a href="https://www.linode.com/about">About Us</a></li>
                <li class="divider"></li>
                <li><a href="https://www.linode.com/contact"><i class="fa fa-user"></i> Contact Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li role="presentation" class="divider-vertical"><span>|</span></li>
          <li class=""><a href="https://manager.linode.com/">Log in <span class="login-caret"></span></a></li>
          <li class="visible-xs"><a href="https://manager.linode.com/session/signup">Sign up</a></li>
          <li class="hidden-xs"><div><a id="btn-signup-top" class="btn btn-sm btn-green navbar-btn hidden-xs" href="https://manager.linode.com/session/signup">Sign up</a></div></li>
      </ul>
    </div>

  </div>
</nav>

            <nav class="navbar subnav jumbotron" role="navigation">
  <div class="container">
    <div class="subnav-divider">

    </div>
  </div>
</nav>
        </header>
        
<section class="primary first-section">
  <div class="container">
    <div class="row breadcrumb-row">
  <div class="col-sm-12">
    <ol class="breadcrumb library-breadcrumb">
      







<li>
  
  <a href="https://linode.com/docs/">Guides &amp; Tutorials</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/security/">Security, Upgrades &amp; Backups</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/security/ssl/">SSL Certificates</a>
  
</li>


<li>
  
  Enable SSL for HTTPS Configuration on nginx
  
</li>

    </ol>
  </div>
</div>

    <div class="row" itemscope itemtype="http://schema.org/TechArticle">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-9 col-sm-offset-3">
          </div>
        </div>
        <div class="row">
          <div id="article-body" class="col-sm-9 col-sm-push-3 doc">
            <h1 class="doc-title" itemprop="headline">Enable SSL for HTTPS Configuration on nginx</h1>
<p markdown="0" class="doc-time doc-modified-time">
  <small class="updated">Updated <time itemprop="dateModified" datetime="2014-06-10T00:00:00Z">Tuesday, June 10, 2014</time> by Alex Fornuto</small>
  
</p>

           <div class="row">
            <div class="col-sm-9"><div markdown="0" class="signup-top">
    <span>
        Use promo code <strong>DOCS10</strong> for $10 credit on a new account.
    </span>
    <form action="https://manager.linode.com/session/signup" style="display: inline">
        <button type="submit" target="_blank" class="btn btn-blue btn-sm btn-border">Try this Guide</button>
    </form>
</div>
</div>
            <div class="col-sm-3"><div class="social-share">
    <div class="btn-group share-group">
        <a data-toggle="dropdown" class="btn btn-info">
            <i class="fa fa-share-alt fa-inverse"></i>
        </a>
        <button href="#" data-toggle="dropdown" class="btn btn-info dropdown-toggle share">
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a data-original-title="Twitter" rel="tooltip"  href="https://twitter.com/share?url=https%3a%2f%2flinode.com%2fdocs%2fsecurity%2fssl%2fenable-ssl-for-https-configuration-on-nginx%2f&via=linode&text=Enable%20SSL%20for%20HTTPS%20%e2%80%a6" class="btn btn-twitter" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Facebook" rel="tooltip"  href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flinode.com%2fdocs%2fsecurity%2fssl%2fenable-ssl-for-https-configuration-on-nginx%2f" class="btn btn-facebook" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-facebook"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Hacker News" rel="tooltip"  href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flinode.com%2fdocs%2fsecurity%2fssl%2fenable-ssl-for-https-configuration-on-nginx%2f&t=Enable%20SSL%20for%20HTTPS%20Configuration%20on%20nginx" class="btn btn-hacker-news" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-hacker-news "></i>
                </a>
            </li>
        </ul>
    </div>
</div></div>
            </div>
            <div class="library-github" markdown="0">
	<i class="fa fa-github"></i>
	<strong>Contribute on GitHub</strong>
	<p>
		
		<a href="https://github.com/linode/docs">View Project</a> |
		<a href="https://github.com/linode/docs/blob/master/docs/security/ssl/enable-ssl-for-https-configuration-on-nginx.md">View File</a> |
		<a href="https://github.com/linode/docs/edit/master/docs/security/ssl/enable-ssl-for-https-configuration-on-nginx.md">Edit File</a>
	</p>
</div>
            
            

            

<p><img src="/docs/assets/nginx-ssl/Enable_SSL_nginx.jpg" alt="Enable SSL for HTTPS Configuration on nginx" /></p>

<p>Transport Layer Security (TLS) and Secure Socket Layer (SSL) provide an easy method to encrypt connections between end-users and web servers. SSL uses a certificate authority system to provide identity verification in order to prevent websites from falsely claiming to be another organization or website. This guide outlines how to provide encrypted access to resources using SSL certificates and nginx.</p>

<p>This document assumes that you have completed the <a href="/docs/getting-started/">getting started guide</a>. If you&rsquo;re new to Linux systems administration, we recommend that you read through the <a href="/docs/tools-reference/linux-users-and-groups">Linux users and groups guide</a> and the <a href="/docs/using-linux/administration-basics">administration basics guide</a>.</p>

<h2 id="install-nginx-with-ssl-support">Install Nginx With SSL Support</h2>

<p>Before proceeding, ensure that you&rsquo;ve compiled nginx with support for SSL. The <a href="/docs/websites/nginx/">nginx installation guides</a> provide a more comprehensive explanation on compiling nginx. Follow the appropriate guide for the Linux distribution you deployed and be aware of the following considerations:</p>

<ul>
<li>If you compiled nginx from source code obtained from the upstream, ensure that the <code>--with-http_ssl_module</code> argument is added to the <code>./configure</code> command as specified in these documents.</li>
<li>If you installed nginx using your system&rsquo;s package management tools, make sure that the package is built with SSL support.</li>
<li>Take note of the version of nginx you&rsquo;ve installed. The method of configuring sites to use SSL with nginx varies slightly between versions of nginx prior to version 0.7.14 and later versions.</li>
<li>To see the current version and compile-time options of your <code>nginx</code> installation, issue the command <code>nginx -V</code>.</li>
</ul>

<h2 id="create-and-manage-ssl-certificates">Create and Manage SSL Certificates</h2>

<p>Before configuring nginx to use SSL, you must generate SSL certificates. This section outlines the steps for creating SSL certificates and keys for &ldquo;self-signed&rdquo; certificates and &ldquo;certificate signing requests&rdquo; for commercially-signed certificates.</p>

<p>SSL certificates are only valid for a single domain or host name unless you generate or purchase a certificate with one or more subject alternate names (<code>SubjectAltName</code>) or a wild card certificate which supports all sub-domains beneath a certain domain. For additional information, consider the document series on <a href="/docs/security/ssl//">SSL certificates</a>.</p>

<p>These examples store the SSL certificate in the <code>/srv/ssl/</code> directory. You may choose to store your SSL certificates and related files in whatever directory makes the most sense for the needs and organization of your deployment.</p>

<h3 id="generate-a-self-signed-certificate">Generate a Self-Signed Certificate</h3>

<p>The following procedure generates a single self-signed SSL certificate. These certificates do not verify the identity of a server like commercially-signed certificates, but they are useful for encryption purposes. With the <code>-days 365</code> argument, the certificate generated will be valid for a full year. Issue the following sequence of commands:</p>

<pre><code>mkdir /srv/ssl/
cd /srv/ssl/
openssl req -new -x509 -sha256 -days 365 -nodes -out /srv/ssl/nginx.pem -keyout /srv/ssl/nginx.key
</code></pre>

<p>If you wish to use a 2048-bit certificate, add the following option to the above command:</p>

<pre><code>-newkey rsa:2048
</code></pre>

<p>This produces a self-signed certificate that is valid for 365 days. You may wish to increase this value in the command above. During this process, you will be asked several questions. Provide information that reflects your organization and server, as shown below. Specify the FQDN (fully qualified domain name) for your server in the &ldquo;Common Name&rdquo; entry as this certificate will be used for generic SSL service.</p>

<pre><code>Generating a 1024 bit RSA private key
...................................++++++
..............................++++++
writing new private key to '/srv/ssl/nginx.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:New Jersey
Locality Name (eg, city) []:Absecon
Organization Name (eg, company) [Internet Widgits Pty Ltd]:SoftwareDev, LLC
Organizational Unit Name (eg, section) []:Web Services
Common Name (eg, YOUR name) []:username.example.com
Email Address []:username@example.com
</code></pre>

<p>The <code>Common Name</code> for your certificate must match the host name that you want to generate a valid certificate for. Continue to configure nginx to serve SSL content.</p>

<h3 id="generate-a-certificate-signing-request-for-a-commercial-ssl-certificate">Generate a Certificate Signing Request for a Commercial SSL Certificate</h3>

<p>Issue the following sequence of commands to create a certificate signing request (CSR) for the site that you&rsquo;d like to provide with SSL. Be sure to change &ldquo;example.com&rdquo; to reflect the fully qualified domain name (<code>subdomain.domainname.com</code>) of your server. Leave the challenge password blank. This command creates an SSL certificate that is valid for 365 days. Alter this value as needed for the certificate you wish to purchase.</p>

<pre><code>mkdir /srv/ssl
cd /srv/ssl
openssl req -new -days 365 -nodes -keyout example.com.key -out example.com.csr
</code></pre>

<p>The following output of the <code>openssl</code> command demonstrates the creation of a certificate signing request. You may safely ignore the <code>'extra' attributes</code>.</p>

<pre><code>Generating a 1024 bit RSA private key
......................................................++++++
....++++++
writing new private key to 'example.com.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:New Jersey
Locality Name (eg, city) []:Absecon
Organization Name (eg, company) [Internet Widgits Pty Ltd]:example Morris
Organizational Unit Name (eg, section) []:Web Services
Common Name (eg, YOUR name) []:example.com
Email Address []:username@example.com

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
</code></pre>

<p>Issue the following command to limit access to the key:</p>

<pre><code>chmod 400 /srv/ssl/example.com.key
</code></pre>

<p>Certificate files for your domain are now located in <code>/srv/ssl/</code>. You can provide the <code>/srv/ssl/example.com.csr</code> file to a commercial certificate provider for signing. You will receive a signed certificate file after the CA signs the request. Save this file as <code>/srv/ssl/example.com.crt</code>.</p>

<p>Use the following command to limit access to the signed certificate:</p>

<pre><code>chmod 400 /srv/ssl/example.com.crt
</code></pre>

<p>In some cases, certificate authorities will sign certificates using a chained authority certificate. This may cause browsers to warn users when trying to connect to your server. To prevent this from affecting your users, issue the following command to create a certificate file that nginx can serve properly:</p>

<pre><code>cat /srv/ssl/example.com.crt /srv/ssl/authority-chain.crt &gt; /srv/ssl/example.com.combined.crt
</code></pre>

<p>Then, specify the <code>/srv/ssl/example.com.combined.crt</code> file in the <code>ssl_certificate</code> configuration directive within your nginx configuration, as follows:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ssl_certificate /srv/ssl/example.com.combined.crt<span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>You can append as many chain certificates as you require. Make sure that the certificate you generate for your site is at the beginning of the file.</p>

<h2 id="optimize-nginx-for-ssl">Optimize Nginx For SSL</h2>

<p>Compared to conventional HTTP, HTTPS (or HTTP with SSL) requires additional overhead and server resources. To manage this load, the developers of nginx recommend the following optimizations to your <code>nginx.conf</code> configuration.</p>

<p>Begin optimization by setting the number of worker processes. Ensure that the number of worker processes equals the number of accessible processor cores. This allows nginx to use the full processing capability of the server. This configuration directive is placed at the beginning, or &ldquo;root&rdquo; level, of the configuration:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">worker_processes <span class="m">4</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Within the <code>http {}</code> block, add the following directives to control and limit the default SSL session settings:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span><span class="lnt">2</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ssl_session_cache shared:SSL:10m<span class="p">;</span>
ssl_session_timeout 10m<span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Inside of the <code>server {}</code> configuration blocks for virtual hosts that serve HTTPS, set the <code>keepalive_timeout</code> to 70 seconds. This prevents stale sessions from consuming resources and additional overhead on reconnections.</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">keepalive_timeout <span class="m">70</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>You may now continue to configure virtual hosts for your server.</p>

<h2 id="configure-basic-ssl-virtual-hosts">Configure Basic SSL Virtual Hosts</h2>

<p>HTTPS operates on port 443 instead of port 80. Take note of the version of nginx running on your system with the output of <code>nginx -V</code> and model your configuration based on the appropriate example.</p>

<h3 id="use-ssl-with-versions-of-nginx-prior-to-0-7-14">Use SSL with Versions of Nginx Prior to 0.7.14</h3>

<p>In addition to basic <a href="/docs/websites/nginx/basic-nginx-configuration">nginx virtual host configuration</a>, using SSL with nginx requires a modification to the <code>listen</code> directive and three ssl-related directives as shown in the following examples:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>

      <span class="c1"># [...]
</span><span class="c1"></span>
      <span class="kn">listen</span> <span class="mi">443</span><span class="p">;</span>
      <span class="kn">ssl</span> <span class="no">on</span><span class="p">;</span>
      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/nginx.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/nginx.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Modify the directives above to point to the proper certificates and keys. If you have a commercially signed certificate, the <code>ssl_certificate</code> directive may resemble the following:</p>

<pre><code>ssl_certificate /srv/ssl/example.com.crt;
</code></pre>

<p>Be sure to add other required configuration directives to control the functionality of your web server.</p>

<p>Using SNI it&rsquo;s possible to host multiple SSL-encrypted sites from the same IP address, but some older web browsers may not be compatible with SNI. If you need to host more than one site with SSL for end users on these older systems, you will need to have separate IP addresses for each site. The following example illustrates how each site can listen on its own IP address:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
      <span class="kn">listen</span> <span class="n">12.34.56.78</span><span class="p">:</span><span class="mi">443</span><span class="p">;</span>
      <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

      <span class="kn">ssl</span> <span class="no">on</span><span class="p">;</span>
      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/example.com.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/example.com.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
      <span class="kn">listen</span> <span class="n">12.34.56.79</span><span class="p">:</span><span class="mi">443</span><span class="p">;</span>
      <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

      <span class="kn">ssl</span> <span class="no">on</span><span class="p">;</span>
      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/example.com.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/example.com.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<h3 id="use-ssl-with-versions-of-nginx-after-0-7-14">Use SSL with Versions of Nginx After 0.7.14</h3>

<p>Following version 0.7.14 of nginx, you may omit the <code>ssl</code> directive and include these declarations as arguments to the <code>listen</code> directive. This modification is optional, but is the preferred syntax. The following example illustrates the preferred usage of SSL declarations:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>

      <span class="c1"># [...]
</span><span class="c1"></span>
      <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/nginx.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/nginx.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Modify the directives above to point to the proper certificates and keys. If you have a commercially signed certificate, the <code>ssl_certificate</code> directive may resemble the following:</p>

<pre><code>ssl_certificate /srv/ssl/example.com.crt;
</code></pre>

<p>Be sure to add other required configuration directives to control the functionality of your web server.</p>

<p>There is no consistent way to host more than one site using SSL on a single IP. If you need to host more than one site with SSL, you will need to have separate IP addresses for each site. The following example illustrates how each site can listen on its own IP address:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
      <span class="kn">listen</span> <span class="n">12.34.56.78</span><span class="p">:</span><span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
      <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/example.com.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/example.com.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
      <span class="kn">listen</span> <span class="n">12.34.56.79</span><span class="p">:</span><span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
      <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/example.com.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/example.com.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<h2 id="configure-multiple-sites-with-a-single-ssl-certificate">Configure Multiple Sites with a Single SSL Certificate</h2>

<p>If you have access to a certificate that is valid for multiple host names, such as a wild card certificate or a certificate with &ldquo;subject alternate names&rdquo;, configure nginx in the following manner:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">http</span> <span class="p">{</span>
    <span class="kn">ssl_certificate</span>   <span class="s">/srv/ssl/example.com.crt</span><span class="p">;</span>
    <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/example.com.key</span><span class="p">;</span>

    <span class="kn">server</span> <span class="p">{</span>
       <span class="kn">listen</span>       <span class="n">12.3.45.6</span><span class="p">:</span><span class="mi">443</span><span class="p">;</span>
       <span class="kn">server_name</span>      <span class="s">example.com</span> <span class="s">www.example.com</span><span class="p">;</span>
       <span class="kn">ssl</span> <span class="no">on</span><span class="p">;</span>

       <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
             <span class="kn">root</span> <span class="s">/srv/www/example.com/public_html</span><span class="p">;</span>
       <span class="p">}</span>
    <span class="p">}</span>
    <span class="kn">server</span> <span class="p">{</span>
       <span class="kn">listen</span>       <span class="n">12.3.45.7</span><span class="p">:</span><span class="mi">443</span><span class="p">;</span>
       <span class="kn">server_name</span>      <span class="s">team.example.com</span><span class="p">;</span>
       <span class="kn">ssl</span> <span class="no">on</span><span class="p">;</span>

       <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
             <span class="kn">root</span> <span class="s">/srv/www/team.example.com/public_html</span><span class="p">;</span>
       <span class="p">}</span>

    <span class="c1"># [...]
</span><span class="c1"></span>    <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>In this example, the wild card certificate is specified once in the root level of the <code>http {}</code> configuration, and the domains <code>example.com</code>, <code>www.example.com</code>, and <code>team.example.com</code> are all served using the <code>/srv/ssl/example.com.crt</code> certificate.</p>

<p>If you are running a version of nginx newer than 0.7.14, omit the <code>ssl on;</code> directive and specify the ssl option as an argument to the <code>listen</code> directive.</p>

<h2 id="redirect-http-virtual-hosts-to-https">Redirect HTTP Virtual Hosts to HTTPS</h2>

<p>If you want to redirect all HTTP traffic for a domain to HTTPS, insert the following <code>rewrite</code> directive in a <code>location / {}</code> configuration block:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">rewrite</span> <span class="s">^</span> <span class="s">https://example.com</span><span class="nv">$request_uri</span> <span class="s">permanent</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Once you have added this line, your config should resemble the following:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
      <span class="kn">listen</span> <span class="n">12.34.56.78</span><span class="p">:</span><span class="mi">80</span><span class="p">;</span>
      <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

      <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
          <span class="kn">rewrite</span> <span class="s">^</span> <span class="s">https://</span><span class="nv">$server_name$request_uri</span> <span class="s">permanent</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span>
<span class="k">server</span> <span class="p">{</span>
      <span class="kn">listen</span> <span class="n">12.34.56.79</span><span class="p">:</span><span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>
      <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

      <span class="kn">ssl_certificate</span>      <span class="s">/srv/ssl/example.com.pem</span><span class="p">;</span>
      <span class="kn">ssl_certificate_key</span>  <span class="s">/srv/ssl/example.com.key</span><span class="p">;</span>

      <span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Modify the configuration of the <code>ssl</code> directive if you&rsquo;re using a version of nginx prior to <code>0.7.14</code>.</p>

            
<h2>More Information</h2>
<p>You may wish to consult the following resources for additional information on this topic. While these are provided in the hope that they will be useful, please note that we cannot vouch for the accuracy or timeliness of externally hosted materials.</p>
<ul>

<li><a href="http://nginx.org">Nginx Project Home Page</a></li>

<li><a href="http://wiki.nginx.org/NginxHttpSslModule">Nginx Project SSL Documentation</a></li>

<li><a href="/docs/websites/nginx/basic-nginx-configuration">Nginx Basic Configuration Documentation</a></li>

<li><a href="/docs/websites/nginx/">Nginx Installation Documentation</a></li>

</ul>


            

<h2>See Also</h2>
<ul>
    
    
    <li><a href="/docs/web-servers/nginx/nginx-ssl-and-tls-deployment-best-practices/">Nginx SSL and TLS Deployment Best Practices</a></li>
    
    
    
    <li><a href="/docs/web-servers/nginx/install-nginx-and-a-startssl-certificate-on-debian-7-wheezy/">Install Nginx and a StartSSL Certificate on Debian 7 (Wheezy)</a></li>
    
    
    
    <li><a href="/docs/databases/elasticsearch/monitor-nginx-web-server-logs-using-filebeat-elastic-stack-centos-7/">Monitor an nginx Web Server Using the Elastic Stack on Centos 7</a></li>
    
    
    
    <li><a href="/docs/applications/containers/how-to-deploy-nginx-on-a-kubernetes-cluster/">How to Install, Configure, and Deploy Nginx on a Kubernetes Cluster</a></li>
    
    
    
    <li><a href="/docs/applications/project-management/how-to-install-and-configure-redmine-on-ubuntu-16-04/">How to Install and Configure Redmine on Ubuntu 16.04</a></li>
    
    
</ul>


            
            
<p class="doc-license">This guide is published under a <a href="https://creativecommons.org/licenses/by-nd/4.0">CC BY-ND 4.0</a> license.</p>

          </div>
          <div id="doc-sidebar-container" class="col-sm-3 col-sm-pull-9 hidden-xs">
            <div id="doc-sidebar">
              <div markdown="0" class="doc-sidebar-inner" >
  <div class="input-group">
	<label class="sr-only" for="q">Search guides and tutorials</label>
	<input id="ss_keyword" name="q" type="text" class="form-control" placeholder="Search guides..."/>
	<span class="input-group-btn">
		<button type="submit" class="btn btn-blue" id="ds-search-btn"><span class="glyphicon glyphicon-search"></span></button>
	</span>
</div>
</div>

                
              <div class="doc-sidebar-inner" id="doc-sidebar-toc">
                <h3 id="doc-sidebar-title">In This Guide:</h3>
                <div class="sidebar sidebar-library nav navbar" id="markdown-toc">
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#install-nginx-with-ssl-support">Install Nginx With SSL Support</a></li>
<li><a href="#create-and-manage-ssl-certificates">Create and Manage SSL Certificates</a>
<ul>
<li><a href="#generate-a-self-signed-certificate">Generate a Self-Signed Certificate</a></li>
<li><a href="#generate-a-certificate-signing-request-for-a-commercial-ssl-certificate">Generate a Certificate Signing Request for a Commercial SSL Certificate</a></li>
</ul></li>
<li><a href="#optimize-nginx-for-ssl">Optimize Nginx For SSL</a></li>
<li><a href="#configure-basic-ssl-virtual-hosts">Configure Basic SSL Virtual Hosts</a>
<ul>
<li><a href="#use-ssl-with-versions-of-nginx-prior-to-0-7-14">Use SSL with Versions of Nginx Prior to 0.7.14</a></li>
<li><a href="#use-ssl-with-versions-of-nginx-after-0-7-14">Use SSL with Versions of Nginx After 0.7.14</a></li>
</ul></li>
<li><a href="#configure-multiple-sites-with-a-single-ssl-certificate">Configure Multiple Sites with a Single SSL Certificate</a></li>
<li><a href="#redirect-http-virtual-hosts-to-https">Redirect HTTP Virtual Hosts to HTTPS</a></li>
</ul></li>
</ul>
</nav>
                </div>
              </div>
              
              <div class="library-rss">
  <a href="https://linode.com/docs/index.xml"><i class="fa fa-rss-square"></i> RSS feed</a>
</div>

              <div markdown="0" class="library-signup">
  <form action="//linode.us7.list-manage.com/subscribe/post?u=f9b54ed743e1629877750e3f4&amp;id=68bafea72a&SIGNUP=library-website"
    method="post" class="email-signup" target="_blank" novalidate="">
    <i class="fa fa-envelope"></i>
    <h6>Monthly Guides Update</h6>
    <input name="EMAIL" type="email" class="form-control input-sm"
    placeholder="Email address" required="" />
    <div style="position: absolute; left: -5000px;" aria-hidden="true">
      <input type="text" name="b_f9b54ed743e1629877750e3f4_68bafea72a"
      tabindex="-1" value="">
    </div>
    <div style="display:none">
      <input type="checkbox" value="4" name="group[13][4]"
      id="mce-group[13]-13-0" checked="">
    </div>
    <button type="submit" class="btn btn-blue btn-sm btn-border email-signup" value="Subscribe"
    name="subscribe" id="mc-embedded-subscribe">Sign Up</button>
  </form>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal" aria-hidden="true">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="img-modal-title" class="modal-title">Image Detail</h4>
      </div>
      <div class="modal-body">
        <img id="img-modal-image" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-blue" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

        <footer>
            <section class="neutral some-space">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 text-center">
				<h3>Get paid to write for Linode.</h3>
				<p class="lead">We're always expanding our docs. If you like to help people, can write, and want to earn some cash, learn how you can <a href="/docs/contribute">earn up to $300 for every guide you write</a> and we publish.</p>
			</div>
		</div>
	</div>
</section>
            <section id="pre-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-7">
        <span>Get started in the Linode Cloud today.</span>
      </div>
      <div class="col-sm-5 pad-xs">
        <a id="btn-signup-bottom" class="btn btn-lg btn-full btn-green" href="https://manager.linode.com/session/signup">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">

    <div class="row">
      <div class="footer-col">
        <h5><a href="https://www.linode.com/linodes">Overview</a></h5>
        <ul>
          <li><a href="https://www.linode.com/pricing">Plans &amp; Pricing</a></li>
          <li><a href="https://www.linode.com/linodes">Features</a></li>
          <li><a href="https://www.linode.com/addons">Add-Ons</a></li>
          <li><a href="https://www.linode.com/managed">Managed</a></li>
          <li><a href="https://www.linode.com/professional-services">Professional Services</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://linode.com/docs/">Resources</a></h5>
        <ul>
          <li><a href="https://linode.com/docs/">Guides &amp; Tutorials</a></li>
          <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
          <li><a href="https://forum.linode.com/">Forum</a></li>
          <li><a href="https://www.linode.com/chat">Chat</a></li>
          <li><a href="http://status.linode.com/">System Status</a></li>
        </ul>
      </div>


      <div class="footer-col">
        <h5><a href="https://www.linode.com/about">Company</a></h5>
        <ul>
          <li><a href="https://www.linode.com/about">About Us</a></li>
          <li><a href="https://blog.linode.com">Blog</a></li>
          <li><a href="https://www.linode.com/press">Press</a></li>
          <li><a href="https://www.linode.com/referrals">Referral System</a></li>
          <li><a href="https://www.linode.com/careers">Careers</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://www.linode.com/contact">Contact Us</a></h5>
        <ul>
          <li><a href="tel:+18554546633">855-4-LINODE</a></li>
          <li><a href="tel:+18554546633">(855-454-6633)</a></li>
          <li><a href="tel:+16093807100">Intl.: +1 609-380-7100</a></li>
          <li><a href="mailto:support@linode.com">Email us</a></li>
          <li>
            <br />
            <a target="_blank" href="https://facebook.com/linode"><i class="fa fa-facebook-square"></i></a>
            <a target="_blank" href="https://twitter.com/linode"><i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://plus.google.com/+linode/"><i class="fa fa-google-plus-square"></i></a>
            <a target="_blank" href="https://linkedin.com/company/linode"><i class="fa fa-linkedin-square"></i></a>
            <a target="_blank" href="https://github.com/linode/"><i class="fa fa-github-square"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="dark-moar">
  <div class="container">
    <div id="footer-copyright" class="row">
      <div class="col text-center">
        &copy; 2017 Linode, LLC
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/tos">Terms of Service</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/privacy">Privacy Policy</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/security">Security</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/compliance">Standards &amp; Compliance</a>
      </div>
    </div>
  </div>
</section>

        </footer>
        
             <script src="/docs/build/js/libs.js" type="text/javascript"></script>
<script src="/docs/build/js/main.js" type="text/javascript"></script>

        
        <script type="text/javascript">
$( "img[src^='\/docs\/assets']" ).each(function () {
  $( this ).parent().bind('click', false);
  $( this ).on('click', function(e) {
    var image_title = $( this ).attr('alt');
    var image_href = $( this ).parent().attr('href') || $( this ).attr('src');
    $( '#img-modal-image' ).attr('src', image_href);
    $( '#img-modal-title' ).text(image_title);
    $( '#img-modal' ).modal({ show: true });
  });
});
</script>



        
<script type="text/javascript">
 SidebarScroll.init()
</script>

    </body>
</html>