<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Git Based Development Networks with Girocco on Debian 5 (Lenny)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="Use the Girocco engine from repo.or.cz to provide easy access to Git repositories.">
        <meta name="keywords" content="git, girocco, gitweb, project hosting, social coding">
        
        <meta property="og:title" content="Git Based Development Networks with Girocco on Debian 5 (Lenny)">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://linode.com/docs/development/version-control/git-based-development-networks-with-girocco-on-debian-5-lenny/">
        <meta property="og:description" content="Use the Girocco engine from repo.or.cz to provide easy access to Git repositories.">
        <meta property="og:site_name" content="Linode Guides &amp; Tutorials">
        
        
        <meta name="twitter:card" content="summary">
        
        <meta name="twitter:site" content="@linode">
        <link rel="alternate" type="application/rss" href="https://linode.com/docs/index.xml">

        
             <link href="/docs/build/stylesheets/home.css" rel='stylesheet' type='text/css'>

        
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
        <link rel="canonical" href="https://linode.com/docs/development/version-control/git-based-development-networks-with-girocco-on-debian-5-lenny/">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body class="no-subnav">
         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchLabel" id="ds-search-modal">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div id="ds-search-input">
				<div class="input-group col-md-12">
					<input id="ds-search" type="text" class="form-control input-lg" placeholder="Search" />
					<span class="input-group-btn">
						<button class="btn btn-info btn-lg" id="ds-search-btn-modal" type="button">
						<i class="glyphicon glyphicon-search"></i>
						</button>
					</span>
				</div>
				<ul class="list-group" id="ds-search-list">
				</ul>
			</div>
		</div>
	</div>
</div> 
         
        <header>
            <nav id="main-nav" class="navbar navbar-default" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://www.linode.com"><img id="navbar-logo" src="/docs/media/images/header/linode-logo.svg" style="height:57px"></a>
    </div>

    <div class="collapse navbar-collapse navbar-top-collapse">
      <ul class="nav navbar-nav navbar-right">

                <li><a href="https://www.linode.com/"><span class='nav-home'></span></a></li>
                <li><a href="https://www.linode.com/linodes">Features</a></li>
                <li><a href="https://www.linode.com/pricing">Pricing</a></li>
                <li><a href="https://www.linode.com/addons">Add-ons</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-main-nav dropdown-mega">
            <li class="dropdown-third">
              <ul >
                <li><a href="https://linode.com/docs/getting-started">Getting Started</a></li>
                <li><a href="https://linode.com/docs/migrate-from-shared">Migrating to Linode</a></li>
                <li><a href="https://linode.com/docs/hosting-website">Hosting a Website</a></li>
                <li class="divider"></li>
                <li class="big"><a href="https://linode.com/docs"><i class="fa fa-book"></i> Guides &amp; Tutorials</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third middle">
              <ul >
                <li><a href="https://www.linode.com/api">API</a></li>
                <li><a href="https://www.linode.com/stackscripts">StackScripts</a></li>
                <li><a href="https://www.linode.com/mobile">Mobile</a></li>
                <li><a href="https://www.linode.com/cli" target="_blank">CLI</a></li>

                <li class="divider"></li>

                <li><a href="https://www.linode.com/chat"><i class="fa fa-bullhorn gray"></i> Chat</a></li>
                <li><a href="https://forum.linode.com"><i class="fa fa-comments"></i> Community Forum</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third">
              <ul >
                <li><a href="https://blog.linode.com">Blog</a></li>
                <li><a href="http://status.linode.com">System Status</a></li>
                <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
                <li><a href="https://www.linode.com/about">About Us</a></li>
                <li class="divider"></li>
                <li><a href="https://www.linode.com/contact"><i class="fa fa-user"></i> Contact Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li role="presentation" class="divider-vertical"><span>|</span></li>
          <li class=""><a href="https://manager.linode.com/">Log in <span class="login-caret"></span></a></li>
          <li class="visible-xs"><a href="https://manager.linode.com/session/signup">Sign up</a></li>
          <li class="hidden-xs"><div><a id="btn-signup-top" class="btn btn-sm btn-green navbar-btn hidden-xs" href="https://manager.linode.com/session/signup">Sign up</a></div></li>
      </ul>
    </div>

  </div>
</nav>

            <nav class="navbar subnav jumbotron" role="navigation">
  <div class="container">
    <div class="subnav-divider">

    </div>
  </div>
</nav>
        </header>
        
<section class="primary first-section">
  <div class="container">
    <div class="row breadcrumb-row">
  <div class="col-sm-12">
    <ol class="breadcrumb library-breadcrumb">
      







<li>
  
  <a href="https://linode.com/docs/">Guides &amp; Tutorials</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/development/">Development</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/development/version-control/">Version Control</a>
  
</li>


<li>
  
  Git Based Development Networks with Girocco on Debian 5 (Lenny)
  
</li>

    </ol>
  </div>
</div>

    <div class="row" itemscope itemtype="http://schema.org/TechArticle">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-9 col-sm-offset-3">
          </div>
        </div>
        <div class="row">
          <div id="article-body" class="col-sm-9 col-sm-push-3 doc">
            <h1 class="doc-title" itemprop="headline">Git Based Development Networks with Girocco on Debian 5 (Lenny)</h1>
<p markdown="0" class="doc-time doc-modified-time">
  <small class="updated">Updated <time itemprop="dateModified" datetime="2013-09-24T00:00:00Z">Tuesday, September 24, 2013</time> by Linode</small>
  
</p>

           <div class="row">
            <div class="col-sm-9"><div markdown="0" class="signup-top">
    <span>
        Use promo code <strong>DOCS10</strong> for $10 credit on a new account.
    </span>
    <form action="https://manager.linode.com/session/signup" style="display: inline">
        <button type="submit" target="_blank" class="btn btn-blue btn-sm btn-border">Try this Guide</button>
    </form>
</div>
</div>
            <div class="col-sm-3"><div class="social-share">
    <div class="btn-group share-group">
        <a data-toggle="dropdown" class="btn btn-info">
            <i class="fa fa-share-alt fa-inverse"></i>
        </a>
        <button href="#" data-toggle="dropdown" class="btn btn-info dropdown-toggle share">
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a data-original-title="Twitter" rel="tooltip"  href="https://twitter.com/share?url=https%3a%2f%2flinode.com%2fdocs%2fdevelopment%2fversion-control%2fgit-based-development-networks-with-girocco-on-debian-5-lenny%2f&via=linode&text=Git%20Based%20Development%20Networks%20%e2%80%a6" class="btn btn-twitter" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Facebook" rel="tooltip"  href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flinode.com%2fdocs%2fdevelopment%2fversion-control%2fgit-based-development-networks-with-girocco-on-debian-5-lenny%2f" class="btn btn-facebook" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-facebook"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Hacker News" rel="tooltip"  href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flinode.com%2fdocs%2fdevelopment%2fversion-control%2fgit-based-development-networks-with-girocco-on-debian-5-lenny%2f&t=Git%20Based%20Development%20Networks%20with%20Girocco%20on%20Debian%205%20%28Lenny%29" class="btn btn-hacker-news" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-hacker-news "></i>
                </a>
            </li>
        </ul>
    </div>
</div></div>
            </div>
            <div class="library-github" markdown="0">
	<i class="fa fa-github"></i>
	<strong>Contribute on GitHub</strong>
	<p>
		
		<a href="https://github.com/linode/docs">View Project</a> |
		<a href="https://github.com/linode/docs/blob/master/docs/development/version-control/git-based-development-networks-with-girocco-on-debian-5-lenny.md">View File</a> |
		<a href="https://github.com/linode/docs/edit/master/docs/development/version-control/git-based-development-networks-with-girocco-on-debian-5-lenny.md">Edit File</a>
	</p>
</div>
            
            
<blockquote class="deprecated">
	<strong class="callout-title">Deprecated</strong>
	<div>This guide has been deprecated and is no longer being maintained.</div>
	<div>
		
	</div>
</blockquote>


            

<p>Girocco is the underlying engine created to power one of the first public git hosting services at <a href="http://repo.or.cz/">repo.or.cz</a>, and it allows users an easy to use web-based interface to create and view git repositories. Perhaps most excitingly, Girocco provides the ability to seamlessly &ldquo;fork&rdquo; an existing repository on the site and publish those changes without needing &ldquo;push&rdquo; access to the original repository, thus enabling a wide rage of distributed workflows and collaborative experiences.</p>

<p>Before beginning this guide, we assume that you&rsquo;ve completed the <a href="/docs/getting-started/">getting started guide</a>. If you&rsquo;re new to using git, you may also find our <a href="/docs/linux-tools/version-control/git">introduction to git</a> a helpful prerequisite. If you&rsquo;re new to Linux server administration, you may be interested in our <a href="/docs/tools-reference/introduction-to-linux-concepts/">introduction to Linux concepts guide</a>, <a href="/content/beginners-guide/">beginner&rsquo;s guide</a> and <a href="/content/using-linux/administration-basics">administration basics guide</a>.</p>

<h1 id="install-prerequisites">Install Prerequisites</h1>

<p>Before beginning the installation of Girocco, issue the following commands to ensure that your system is up to date and that you&rsquo;ve installed the latest version of all software packages:</p>

<pre><code>apt-get update
apt-get upgrade
</code></pre>

<p>Now issue the following command to install the required prerequisite software:</p>

<pre><code>apt-get install git-core build-essential netcat-openbsd apache2 wget libwww-perl libjson-perl librpc-xml-perl
</code></pre>

<p>The above command installs the Apache HTTP Server, and this guide depends upon running Apache. For more information regarding the setup and configuration of Apache, consider our series of <a href="/docs/web-servers/apache/">Apache guides</a>.</p>

<p>This guide does not include explicit instructions for downloading and installing a local send-only <a href="/docs/email/">mail server</a>, which you will need to do for some operations such as sending password recovery tokens. If you do not have a local MTA installed or configured already, begin by issuing the following command:</p>

<pre><code>apt-get install mailx
</code></pre>

<p>This will install the MTA &ldquo;Exim.&rdquo; You can configure this MTA by issuing the following command and following the steps outlined in the <a href="/docs/email/exim/send-only-mta-debian-5-lenny">Exim send-only MTA guide</a> guide:</p>

<pre><code>dpkg-reconfigure exim4-config
</code></pre>

<p>We are now ready to proceed with the installation and configuration of Girocco.</p>

<h1 id="install-girocco">Install Girocco</h1>

<p>Begin by issuing the following commands to download the source code for Girocco:</p>

<pre><code>cd /opt/
git clone git://repo.or.cz/girocco.git
cd /opt/girocco/
git submodule update --init
</code></pre>

<h3 id="configure-girocco">Configure Girocco</h3>

<p>Edit the configuration file for Girocco at <code>/opt/girocco/Girocco/Config.pm</code> and tailor the variables set therein. It might be prudent to create a backup of the &ldquo;base&rdquo; Girocco configuration, by issuing the following command:</p>

<pre><code>cp /opt/girocco/Girocco/Config.pm /opt/girocco/Girocco/BaseConfig-bakup.pm
</code></pre>

<p>Most of the default values in the <code>Config.pm</code> file can be left as the default. You will want to customize the <code>## Basic Settings</code> at the very beginning of the file, particularly the <code>name</code>, <code>title</code>, and <code>admin</code> variables. For the purposes of this guide we&rsquo;ve modified the <code>## Paths</code> section as follows:</p>

<dl class="file-excerpt">
<dt>


		/opt/girocco/Girocco/Config.pm 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-perl" data-lang="perl"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-perl" data-lang="perl"><span class="c1">## Paths</span>

<span class="c1"># Path where the main chunk of Girocco files will be installed</span>
<span class="c1"># This will get COMPLETELY OVERWRITTEN by each make install!!!</span>
<span class="k">our</span> <span class="nv">$basedir</span> <span class="o">=</span> <span class="s">&#39;/srv/repo/bin&#39;</span><span class="p">;</span>

<span class="c1"># The repository collection</span>
<span class="k">our</span> <span class="nv">$reporoot</span> <span class="o">=</span> <span class="s">&#34;/srv/repo/git&#34;</span><span class="p">;</span>

<span class="c1"># The chroot for ssh pushing; location for project database and other run-time</span>
<span class="c1"># data even in non-chroot setups</span>
<span class="k">our</span> <span class="nv">$chroot</span> <span class="o">=</span> <span class="s">&#34;/srv/repo/data&#34;</span><span class="p">;</span>

<span class="c1"># The gitweb files web directory (corresponds to $gitwebfiles)</span>
<span class="k">our</span> <span class="nv">$webroot</span> <span class="o">=</span> <span class="s">&#34;/srv/repo/public_html&#34;</span><span class="p">;</span>

<span class="c1"># The CGI-enabled web directory (corresponds to $gitweburl and $webadmurl)</span>
<span class="k">our</span> <span class="nv">$cgiroot</span> <span class="o">=</span> <span class="s">&#34;/srv/repo/public_html&#34;</span><span class="p">;</span>

<span class="c1"># A web-accessible symlink to $reporoot (corresponds to $httppullurl, can be undef)</span>
<span class="k">our</span> <span class="nv">$webreporoot</span> <span class="o">=</span> <span class="s">&#34;/srv/repo/public_html/r&#34;</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Similarly, edit the <code>URL addresses</code> section of the guide in accordance with the needs of your deployment as follows:</p>

<dl class="file-excerpt">
<dt>


		/opt/girocco/Girocco/Config.pm 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-perl" data-lang="perl"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-perl" data-lang="perl"><span class="c1">## URL addresses</span>

<span class="c1"># URL of the gitweb.cgi script (must be in pathinfo mode)</span>
<span class="k">our</span> <span class="nv">$gitweburl</span> <span class="o">=</span> <span class="s">&#34;http://repo.example.com/w&#34;</span><span class="p">;</span>

<span class="c1"># URL of the extra gitweb files (CSS, .js files, images, ...)</span>
<span class="k">our</span> <span class="nv">$gitwebfiles</span> <span class="o">=</span> <span class="s">&#34;http://repo.example.com&#34;</span><span class="p">;</span>

<span class="c1"># URL of the Girocco CGI web admin interface (Girocco cgi/ subdirectory)</span>
<span class="k">our</span> <span class="nv">$webadmurl</span> <span class="o">=</span> <span class="s">&#34;http://repo.example.com&#34;</span><span class="p">;</span>

<span class="c1"># URL of the Girocco CGI html templater (Girocco cgi/html.cgi)</span>
<span class="k">our</span> <span class="nv">$htmlurl</span> <span class="o">=</span> <span class="s">&#34;http://repo.example.com/h&#34;</span><span class="p">;</span>

<span class="c1"># HTTP URL of the repository collection (undef if N/A)</span>
<span class="k">our</span> <span class="nv">$httppullurl</span> <span class="o">=</span> <span class="s">&#34;http://repo.example.com/r&#34;</span><span class="p">;</span>

<span class="c1"># Git URL of the repository collection (undef if N/A)</span>
<span class="c1"># (You need to set up git-daemon on your system, and Girocco will not</span>
<span class="c1"># do this particular thing for you.)</span>
<span class="k">our</span> <span class="nv">$gitpullurl</span> <span class="o">=</span> <span class="s">&#34;git://repo.example.com&#34;</span><span class="p">;</span>

<span class="c1"># Pushy URL of the repository collection (undef if N/A)</span>
<span class="k">our</span> <span class="nv">$pushurl</span> <span class="o">=</span> <span class="s">&#34;ssh://repo.example.com/srv/repo/git&#34;</span><span class="p">;</span>

<span class="c1"># URL of gitweb of this Girocco instance (set to undef if you&#39;re not nice</span>
<span class="c1"># to the community)</span>
<span class="k">our</span> <span class="nv">$giroccourl</span> <span class="o">=</span> <span class="s">&#34;$Girocco::Config::gitweburl/girocco.git&#34;</span><span class="p">;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Carefully consider the remaining configuration options in <code>/opt/girocco/Girocco/Config.pm</code>. The default settings are sufficient, but you may wish to modify configuration options to suit the needs of your deployment. When your configuration file is suitably configured for your needs, we recommend creating a backup of this file by issuing the following command:</p>

<pre><code>cp /opt/girocco/Girocco/Config.pm /opt/example-girocco-config.pm
</code></pre>

<h3 id="configure-system-files-and-accounts">Configure System Files and Accounts</h3>

<p>Issue the following commands to create the required directories and symbolic links:</p>

<pre><code>mkdir -p /srv/repo/data  /srv/repo/public_html/ /srv/repo/git/ /srv/repo/bin/ /root/repo /srv/repo/git/mob.git/
mkdir -p /srv/www/repo.example.com/logs/
ln -s /srv/repo/git /srv/repo/public_html/r
ln -s /srv/repo/git /srv/git
ln -s /srv/repo/public_html /srv/www/repo.example.com/public_html
</code></pre>

<p>You will need to create the <code>repo</code> user and account to isolate privileges for the repository users. Issue the following command:</p>

<pre><code>adduser --system --no-create-home --disabled-login --disabled-password --group repo
</code></pre>

<h3 id="configure-helper-scripts">Configure Helper Scripts</h3>

<p>Issue the following command to copy the scripts <code>fixup.sh</code> and <code>fixupcheck.sh</code> to the <code>/root/repo</code> directory:</p>

<pre><code>cp /opt/girocco/jobs/fixup.sh /root/repo
cp /opt/girocco/jobs/fixupcheck.sh /root/repo
</code></pre>

<p>These scripts are configured separately from the <code>Config.pm</code> file above. However, you must ensure that the settings correspond exactly. The following example contains the required modifications for our Girocco configuration:</p>

<dl class="file-excerpt">
<dt>


		/root/repo/fixupcheck.sh 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">## and does not reuse Girocco::Config settings.
</span><span class="c1"></span>
<span class="c1">## Girocco::Config::reporoot
</span><span class="c1"></span><span class="nv">reporoot</span><span class="o">=</span><span class="s2">&#34;/srv/repo/git&#34;</span>
<span class="c1">## Girocco::Config::chroot
</span><span class="c1"></span><span class="nv">chroot</span><span class="o">=</span><span class="s2">&#34;/srv/repo/data&#34;</span>
<span class="c1">## Girocco::Config::mirror_user
</span><span class="c1"></span><span class="nv">mirror_user</span><span class="o">=</span><span class="s2">&#34;repo&#34;</span>
<span class="c1">## Directory with this script and fixup.sh; WARNING: COPY THEM OVER to ~root!
</span><span class="c1">## Otherwise, the owner of these scripts can execute anything as root.
</span><span class="c1"></span><span class="nv">fixup_dir</span><span class="o">=</span><span class="s2">&#34;/root/repo&#34;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<h3 id="build-and-install-girocco">Build and Install Girocco</h3>

<p>Issue the following commands to build and install the Girocco engine:</p>

<pre><code>cd /opt/girocco/
make install
</code></pre>

<h3 id="upgrading-girocco">Upgrading Girocco</h3>

<p>In most cases, upgrading Girocco is as simple as running a sequence of commands to download new revisions of the software and rebuild the software. Those commands resemble the following:</p>

<pre><code>cd /opt/girocco/
git pull
git submodule update
make install
</code></pre>

<p>However, it is prudent to ensure that additional upstream modifications to the <code>girocco/Girocco/Config.pm</code> will not affect your Girocco instance. If the <code>girocco/Girocco/Config.pm</code> file is modified during the <code>git pull</code> operation, be sure to inspect the changes very carefully. If the <code>git pull</code> command above fails with warnings regarding the <code>Config.pm</code> file, remove the configuration file, complete the <code>pull</code>, and then issue the following command to compare your configuration file with the new configuration file:</p>

<pre><code>diff /opt/girocco/Girocco/Config.pm /opt/example-girocco-config.pm
</code></pre>

<p>Modify your configuration file sufficiently with the new configuration options provided by the upstream and complete the rebuild process.</p>

<h1 id="run-regular-tasks">Run Regular Tasks</h1>

<p>To ensure complete functionality of the Girocco system, we need to run the <code>taskd.pl</code> and <code>jobd.sh</code> scripts as daemons to perform necessary system maintenance. Use or modify the following init script to control the daemon operations:</p>

<pre><code>cd /opt/
wget -O repo-taskd-init-deb.sh http://www.linode.com/docs/assets/564-repo-taskd-init-deb.sh
cp /opt/repo-taskd-init-deb.sh /etc/init.d/repod
chmod +x /etc/init.d/repod
/usr/sbin/update-rc.d -f repod defaults
</code></pre>

<p>Issue the following commands to start and stop the daemons in turn:</p>

<pre><code>/etc/init.d/repod start
/etc/init.d/repod stop
</code></pre>

<p>From this point forward, these daemons will start following reboot cycles and can be controlled with the init script.</p>

<p>You will also want to create a <code>root</code> user cron job to regularly run the <code>/root/repo/fixupcheck.sh</code> script as root. Issue the following command as root:</p>

<pre><code>crontab -e
</code></pre>

<p>Then insert the following line:</p>

<dl class="file-excerpt">
<dt>


		root crontab 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">*/5 * * * * /usr/bin/nice -n <span class="m">18</span> /root/repo/fixupcheck.sh</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>This configures the script to run once every 5 minutes. Monitor the length of time it takes to run the script, and the frequency of pushes, and adjust the frequency based on this data.</p>

<p>Additionally issue the following command to create a <code>repo</code> user cronjob:</p>

<pre><code>crontab -u repo -e
</code></pre>

<p>Then insert the following line:</p>

<dl class="file-excerpt">
<dt>


		repo crontab 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">*/5 * * * * /usr/bin/nice -n <span class="m">18</span> /srv/repo/bin/jobd/jobd.sh -q --all-once</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>This configures the script to run once every 5 minutes. Monitor the length of time it takes to run the script, note any error messages this produces, and modify the frequency in response to this. You may also run the command <code>/srv/repo/bin/jobd/jobd.sh</code> in an interactive terminal as needed. Some tasks related to mirroring will not appear to succeed unless jobd is running constantly or runs at the appropriate time. You may want to run jobd in a GNU Screen session, by issuing the following command as the <em>repo</em> user:</p>

<pre><code>while ( true ); do /srv/repo/bin/jobd/jobd.sh; sleep 5; done
</code></pre>

<p>Additionally, add the following two lines as instructed by the installation script to your <code>/etc/rc.local</code> script to ensure that a chroot set up to isolate functions following reboot cycles:</p>

<dl class="file-excerpt">
<dt>


		/etc/rc.local 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mount --bind /srv/repo/git /srv/repo/data/srv/git mount --bind /proc /srv/repo/data/proc</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<h1 id="configure-web-server">Configure Web Server</h1>

<p>For the purpose of this document we will set up the repository hosting service under the virtual host for the domain <code>repo.example.com</code>. You will need to ensure that <a href="/docs/tools-reference/linux-system-administration-basics#set-up-subdomains">DNS is configured</a> for this domain. Additionally, ensure that the rewrite module is enabled by issuing the following commands:</p>

<pre><code>a2enmod rewrite
/etc/init.d/apache2 restart
</code></pre>

<p>Furthermore, ensure that the paths specified in this file match the paths that you specified in the &ldquo;Paths&rdquo; section of the <code>/opt/girocco/Girocco/Config.pm</code> file. Consider the following:</p>

<dl class="file-excerpt">
<dt>


		Apache Virtual Host Configuration 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-apache" data-lang="apache"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-apache" data-lang="apache"><span class="nt">&lt;VirtualHost</span> <span class="s">repo.example.com:80</span><span class="nt">&gt;</span>
        <span class="nb">ServerName</span> repo.example.com
        <span class="nb">ServerAdmin</span> username@example.com

        <span class="nb">ErrorLog</span> <span class="sx">/srv/www/repo.example.com/logs/error.log</span>
        <span class="nb">CustomLog</span> <span class="sx">/srv/www/repo.example.com/logs/access.log</span> combined

        <span class="nb">DocumentRoot</span> <span class="sx">/srv/repo/public_html</span>
        <span class="nt">&lt;Directory</span> <span class="s">/srv/repo/public_html</span><span class="nt">&gt;</span>
                <span class="nb">Options</span> Indexes FollowSymLinks MultiViews ExecCGI
                <span class="nb">AllowOverride</span> <span class="k">All</span>
                <span class="nb">Order</span> allow,deny
                <span class="nb">allow</span> from <span class="k">all</span>
                <span class="nb">DirectoryIndex</span> gitweb.cgi
                <span class="nb">AddHandler</span> cgi-script .cgi
        <span class="nt">&lt;/Directory</span><span class="s"></span><span class="nt">&gt;</span>

        <span class="nb">ScriptAlias</span> /w <span class="sx">/srv/repo/public_html/gitweb.cgi</span>
        <span class="nb">ScriptAlias</span> /h <span class="sx">/srv/repo/public_html/html.cgi</span>
<span class="nt">&lt;/VirtualHost</span><span class="s"></span><span class="nt">&gt;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Congratulations! You may now visit <code>http://repo.example.com</code> to begin using your Girocco repository hosting system.</p>

<h1 id="more-information">More Information</h1>

<p>You may wish to consult the following resources for additional information on this topic. While these are provided in the hope that they will be useful, please note that we cannot vouch for the accuracy or timeliness of externally hosted materials.</p>

<ul>
<li><a href="http://repo.or.cz/w/girocco.git">Girocco</a></li>
<li><a href="http://repo.or.cz/">Repo.or.cz</a></li>
<li><a href="/docs/linux-tools/utilities/cron">Using Cron to Schedule Tasks</a></li>
<li><a href="/docs/tools-reference/linux-users-and-groups">Managing Permissions with Unix Users and Groups</a></li>
<li><a href="/docs/linux-tools/utilities/screen">Using GNU Screen</a></li>
</ul>

            

            

<h2>See Also</h2>
<ul>
    
    
    <li><a href="/docs/development/version-control/how-to-install-git-and-clone-a-github-repository/">How to Install Git and Clone a GitHub Repository</a></li>
    
    
    
    <li><a href="/docs/development/version-control/how-to-configure-git/">Getting Started with Git</a></li>
    
    
    
    <li><a href="/docs/development/version-control/how-to-install-git-on-linux-mac-and-windows/">How to Install Git on Linux, Mac or Windows</a></li>
    
    
    
    <li><a href="/docs/development/version-control/install-gogs-on-debian/">Install Gogs on Debian 9 with nginx and PostgreSQL</a></li>
    
    
    
    <li><a href="/docs/development/version-control/install-gitlab-on-ubuntu-14-04-trusty-tahr/">Install GitLab on Ubuntu 14.04 (Trusty Tahr)</a></li>
    
    
</ul>


            
            
<p class="doc-license">This guide is published under a <a href="https://creativecommons.org/licenses/by-nd/4.0">CC BY-ND 4.0</a> license.</p>

          </div>
          <div id="doc-sidebar-container" class="col-sm-3 col-sm-pull-9 hidden-xs">
            <div id="doc-sidebar">
              <div markdown="0" class="doc-sidebar-inner" >
  <div class="input-group">
	<label class="sr-only" for="q">Search guides and tutorials</label>
	<input id="ss_keyword" name="q" type="text" class="form-control" placeholder="Search guides..."/>
	<span class="input-group-btn">
		<button type="submit" class="btn btn-blue" id="ds-search-btn"><span class="glyphicon glyphicon-search"></span></button>
	</span>
</div>
</div>

                
              <div class="doc-sidebar-inner" id="doc-sidebar-toc">
                <h3 id="doc-sidebar-title">In This Guide:</h3>
                <div class="sidebar sidebar-library nav navbar" id="markdown-toc">
                    <nav id="TableOfContents">
<ul>
<li><a href="#install-prerequisites">Install Prerequisites</a></li>
<li><a href="#install-girocco">Install Girocco</a>
<ul>
<li>
<ul>
<li><a href="#configure-girocco">Configure Girocco</a></li>
<li><a href="#configure-system-files-and-accounts">Configure System Files and Accounts</a></li>
<li><a href="#configure-helper-scripts">Configure Helper Scripts</a></li>
<li><a href="#build-and-install-girocco">Build and Install Girocco</a></li>
<li><a href="#upgrading-girocco">Upgrading Girocco</a></li>
</ul></li>
</ul></li>
<li><a href="#run-regular-tasks">Run Regular Tasks</a></li>
<li><a href="#configure-web-server">Configure Web Server</a></li>
<li><a href="#more-information">More Information</a></li>
</ul>
</nav>
                </div>
              </div>
              
              <div class="library-rss">
  <a href="https://linode.com/docs/index.xml"><i class="fa fa-rss-square"></i> RSS feed</a>
</div>

              <div markdown="0" class="library-signup">
  <form action="//linode.us7.list-manage.com/subscribe/post?u=f9b54ed743e1629877750e3f4&amp;id=68bafea72a&SIGNUP=library-website"
    method="post" class="email-signup" target="_blank" novalidate="">
    <i class="fa fa-envelope"></i>
    <h6>Monthly Guides Update</h6>
    <input name="EMAIL" type="email" class="form-control input-sm"
    placeholder="Email address" required="" />
    <div style="position: absolute; left: -5000px;" aria-hidden="true">
      <input type="text" name="b_f9b54ed743e1629877750e3f4_68bafea72a"
      tabindex="-1" value="">
    </div>
    <div style="display:none">
      <input type="checkbox" value="4" name="group[13][4]"
      id="mce-group[13]-13-0" checked="">
    </div>
    <button type="submit" class="btn btn-blue btn-sm btn-border email-signup" value="Subscribe"
    name="subscribe" id="mc-embedded-subscribe">Sign Up</button>
  </form>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal" aria-hidden="true">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="img-modal-title" class="modal-title">Image Detail</h4>
      </div>
      <div class="modal-body">
        <img id="img-modal-image" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-blue" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

        <footer>
            <section class="neutral some-space">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 text-center">
				<h3>Get paid to write for Linode.</h3>
				<p class="lead">We're always expanding our docs. If you like to help people, can write, and want to earn some cash, learn how you can <a href="/docs/contribute">earn up to $300 for every guide you write</a> and we publish.</p>
			</div>
		</div>
	</div>
</section>
            <section id="pre-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-7">
        <span>Get started in the Linode Cloud today.</span>
      </div>
      <div class="col-sm-5 pad-xs">
        <a id="btn-signup-bottom" class="btn btn-lg btn-full btn-green" href="https://manager.linode.com/session/signup">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">

    <div class="row">
      <div class="footer-col">
        <h5><a href="https://www.linode.com/linodes">Overview</a></h5>
        <ul>
          <li><a href="https://www.linode.com/pricing">Plans &amp; Pricing</a></li>
          <li><a href="https://www.linode.com/linodes">Features</a></li>
          <li><a href="https://www.linode.com/addons">Add-Ons</a></li>
          <li><a href="https://www.linode.com/managed">Managed</a></li>
          <li><a href="https://www.linode.com/professional-services">Professional Services</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://linode.com/docs/">Resources</a></h5>
        <ul>
          <li><a href="https://linode.com/docs/">Guides &amp; Tutorials</a></li>
          <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
          <li><a href="https://forum.linode.com/">Forum</a></li>
          <li><a href="https://www.linode.com/chat">Chat</a></li>
          <li><a href="http://status.linode.com/">System Status</a></li>
        </ul>
      </div>


      <div class="footer-col">
        <h5><a href="https://www.linode.com/about">Company</a></h5>
        <ul>
          <li><a href="https://www.linode.com/about">About Us</a></li>
          <li><a href="https://blog.linode.com">Blog</a></li>
          <li><a href="https://www.linode.com/press">Press</a></li>
          <li><a href="https://www.linode.com/referrals">Referral System</a></li>
          <li><a href="https://www.linode.com/careers">Careers</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://www.linode.com/contact">Contact Us</a></h5>
        <ul>
          <li><a href="tel:+18554546633">855-4-LINODE</a></li>
          <li><a href="tel:+18554546633">(855-454-6633)</a></li>
          <li><a href="tel:+16093807100">Intl.: +1 609-380-7100</a></li>
          <li><a href="mailto:support@linode.com">Email us</a></li>
          <li>
            <br />
            <a target="_blank" href="https://facebook.com/linode"><i class="fa fa-facebook-square"></i></a>
            <a target="_blank" href="https://twitter.com/linode"><i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://plus.google.com/+linode/"><i class="fa fa-google-plus-square"></i></a>
            <a target="_blank" href="https://linkedin.com/company/linode"><i class="fa fa-linkedin-square"></i></a>
            <a target="_blank" href="https://github.com/linode/"><i class="fa fa-github-square"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="dark-moar">
  <div class="container">
    <div id="footer-copyright" class="row">
      <div class="col text-center">
        &copy; 2017 Linode, LLC
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/tos">Terms of Service</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/privacy">Privacy Policy</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/security">Security</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/compliance">Standards &amp; Compliance</a>
      </div>
    </div>
  </div>
</section>

        </footer>
        
             <script src="/docs/build/js/libs.js" type="text/javascript"></script>
<script src="/docs/build/js/main.js" type="text/javascript"></script>

        
        <script type="text/javascript">
$( "img[src^='\/docs\/assets']" ).each(function () {
  $( this ).parent().bind('click', false);
  $( this ).on('click', function(e) {
    var image_title = $( this ).attr('alt');
    var image_href = $( this ).parent().attr('href') || $( this ).attr('src');
    $( '#img-modal-image' ).attr('src', image_href);
    $( '#img-modal-title' ).text(image_title);
    $( '#img-modal' ).modal({ show: true });
  });
});
</script>



        
<script type="text/javascript">
 SidebarScroll.init()
</script>

    </body>
</html>