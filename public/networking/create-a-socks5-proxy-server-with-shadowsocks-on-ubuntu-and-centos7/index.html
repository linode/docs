<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Create a SOCKS5 Proxy Server with Shadowsocks on Ubuntu and CentOS 7</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="This tutorial details how to install Shadowsocks-libev, a full-featured, resource-efficient port of the web proxy tool, Shadowsocks.">
        <meta name="keywords" content="shadowsocks, proxy, shadowsocks server, ubuntu, centos,  strong vpn">
        
        <meta property="og:title" content="Create a SOCKS5 Proxy Server with Shadowsocks on Ubuntu and CentOS 7">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://linode.com/docs/networking/create-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7/">
        <meta property="og:description" content="This tutorial details how to install Shadowsocks-libev, a full-featured, resource-efficient port of the web proxy tool, Shadowsocks.">
        <meta property="og:site_name" content="Linode Guides &amp; Tutorials">
        
        
        <meta name="twitter:card" content="summary">
        
        <meta name="twitter:site" content="@linode">
        <link rel="alternate" type="application/rss" href="https://linode.com/docs/index.xml">

        
             <link href="/docs/build/stylesheets/home.css" rel='stylesheet' type='text/css'>

        
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
        <link rel="canonical" href="https://linode.com/docs/networking/create-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7/">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body class="no-subnav">
         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchLabel" id="ds-search-modal">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div id="ds-search-input">
				<div class="input-group col-md-12">
					<input id="ds-search" type="text" class="form-control input-lg" placeholder="Search" />
					<span class="input-group-btn">
						<button class="btn btn-info btn-lg" id="ds-search-btn-modal" type="button">
						<i class="glyphicon glyphicon-search"></i>
						</button>
					</span>
				</div>
				<ul class="list-group" id="ds-search-list">
				</ul>
			</div>
		</div>
	</div>
</div> 
         
        <header>
            <nav id="main-nav" class="navbar navbar-default" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://www.linode.com"><img id="navbar-logo" src="/docs/media/images/header/linode-logo.svg" style="height:57px"></a>
    </div>

    <div class="collapse navbar-collapse navbar-top-collapse">
      <ul class="nav navbar-nav navbar-right">

                <li><a href="https://www.linode.com/"><span class='nav-home'></span></a></li>
                <li><a href="https://www.linode.com/linodes">Features</a></li>
                <li><a href="https://www.linode.com/pricing">Pricing</a></li>
                <li><a href="https://www.linode.com/addons">Add-ons</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-main-nav dropdown-mega">
            <li class="dropdown-third">
              <ul >
                <li><a href="https://linode.com/docs/getting-started">Getting Started</a></li>
                <li><a href="https://linode.com/docs/migrate-from-shared">Migrating to Linode</a></li>
                <li><a href="https://linode.com/docs/hosting-website">Hosting a Website</a></li>
                <li class="divider"></li>
                <li class="big"><a href="https://linode.com/docs"><i class="fa fa-book"></i> Guides &amp; Tutorials</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third middle">
              <ul >
                <li><a href="https://www.linode.com/api">API</a></li>
                <li><a href="https://www.linode.com/stackscripts">StackScripts</a></li>
                <li><a href="https://www.linode.com/mobile">Mobile</a></li>
                <li><a href="https://www.linode.com/cli" target="_blank">CLI</a></li>

                <li class="divider"></li>

                <li><a href="https://www.linode.com/chat"><i class="fa fa-bullhorn gray"></i> Chat</a></li>
                <li><a href="https://forum.linode.com"><i class="fa fa-comments"></i> Community Forum</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third">
              <ul >
                <li><a href="https://blog.linode.com">Blog</a></li>
                <li><a href="http://status.linode.com">System Status</a></li>
                <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
                <li><a href="https://www.linode.com/about">About Us</a></li>
                <li class="divider"></li>
                <li><a href="https://www.linode.com/contact"><i class="fa fa-user"></i> Contact Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li role="presentation" class="divider-vertical"><span>|</span></li>
          <li class=""><a href="https://manager.linode.com/">Log in <span class="login-caret"></span></a></li>
          <li class="visible-xs"><a href="https://manager.linode.com/session/signup">Sign up</a></li>
          <li class="hidden-xs"><div><a id="btn-signup-top" class="btn btn-sm btn-green navbar-btn hidden-xs" href="https://manager.linode.com/session/signup">Sign up</a></div></li>
      </ul>
    </div>

  </div>
</nav>

            <nav class="navbar subnav jumbotron" role="navigation">
  <div class="container">
    <div class="subnav-divider">

    </div>
  </div>
</nav>
        </header>
        
<section class="primary first-section">
  <div class="container">
    <div class="row breadcrumb-row">
  <div class="col-sm-12">
    <ol class="breadcrumb library-breadcrumb">
      





<li>
  
  <a href="https://linode.com/docs/">Guides &amp; Tutorials</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/networking/">IPs, Networking &amp; Domains</a>
  
</li>


<li>
  
  Create a SOCKS5 Proxy Server with Shadowsocks on Ubuntu and CentOS 7
  
</li>

    </ol>
  </div>
</div>

    <div class="row" itemscope itemtype="http://schema.org/TechArticle">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-9 col-sm-offset-3">
          </div>
        </div>
        <div class="row">
          <div id="article-body" class="col-sm-9 col-sm-push-3 doc">
            <h1 class="doc-title" itemprop="headline">Create a SOCKS5 Proxy Server with Shadowsocks on Ubuntu and CentOS 7</h1>
<p markdown="0" class="doc-time doc-modified-time">
  <small class="updated">Updated <time itemprop="dateModified" datetime="2017-08-16T00:00:00Z">Wednesday, August 16, 2017</time> by Linode</small>
  
  <small class="contributed-by">Contributed by
  
  <a href="https://www.linkedin.com/in/andrew-lescher-87027940">Andrew Lescher
    
    <i class="fa fa-linkedin"></i>
    
  </a>
  
  </small>
  
</p>

           <div class="row">
            <div class="col-sm-9"><div markdown="0" class="signup-top">
    <span>
        Use promo code <strong>DOCS10</strong> for $10 credit on a new account.
    </span>
    <form action="https://manager.linode.com/session/signup" style="display: inline">
        <button type="submit" target="_blank" class="btn btn-blue btn-sm btn-border">Try this Guide</button>
    </form>
</div>
</div>
            <div class="col-sm-3"><div class="social-share">
    <div class="btn-group share-group">
        <a data-toggle="dropdown" class="btn btn-info">
            <i class="fa fa-share-alt fa-inverse"></i>
        </a>
        <button href="#" data-toggle="dropdown" class="btn btn-info dropdown-toggle share">
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a data-original-title="Twitter" rel="tooltip"  href="https://twitter.com/share?url=https%3a%2f%2flinode.com%2fdocs%2fnetworking%2fcreate-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7%2f&via=linode&text=Create%20a%20SOCKS5%20Proxy%20Server%20%e2%80%a6" class="btn btn-twitter" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Facebook" rel="tooltip"  href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flinode.com%2fdocs%2fnetworking%2fcreate-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7%2f" class="btn btn-facebook" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-facebook"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Hacker News" rel="tooltip"  href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flinode.com%2fdocs%2fnetworking%2fcreate-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7%2f&t=Create%20a%20SOCKS5%20Proxy%20Server%20with%20Shadowsocks%20on%20Ubuntu%20and%20CentOS%207" class="btn btn-hacker-news" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-hacker-news "></i>
                </a>
            </li>
        </ul>
    </div>
</div></div>
            </div>
            <div class="library-github" markdown="0">
	<i class="fa fa-github"></i>
	<strong>Contribute on GitHub</strong>
	<p>
		
		<a href="https://github.com/linode/docs">View Project</a> |
		<a href="https://github.com/linode/docs/blob/master/docs/networking/create-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7.md">View File</a> |
		<a href="https://github.com/linode/docs/edit/master/docs/networking/create-a-socks5-proxy-server-with-shadowsocks-on-ubuntu-and-centos7.md">Edit File</a>
	</p>
</div>
            <hr />

<p><em>This is a Linode Community guide. If you&rsquo;re an expert on something for which we need a guide, you too can <a href="/docs/contribute">get paid to write for us.</a></em></p>

<hr />

            

            

<p><img src="/docs/assets/shadowsocks.jpg" alt="Create a SOCKS5 Proxy Server with Shadowsocks on Ubuntu and CentOS 7" title="Create a SOCKS5 Proxy Server with Shadowsocks on Ubuntu and CentOS 7" /></p>

<p>Shadowsocks is a lightweight SOCKS5 web proxy tool primarily utilized to bypass network censorship and blocking on certain websites and web protocols. A full setup requires a Linode server to host the Shadowsocks daemon, and a client installed on PC, Mac, Linux, or a mobile device. Unlike other proxy software, Shadowsocks traffic is designed to be both indiscernible from other traffic to third-party monitoring tools, and also able to disguise itself as a normal direct connection. Data passing through Shadowsocks is encrypted for additional security and privacy.</p>

<p>Since there is currently no Shadowsocks package available for Ubuntu or CentOS, this guide shows how to build Shadowsocks from source.</p>

<h2 id="before-you-begin">Before You Begin</h2>

<ol>
<li><p>The commands in this guide require root privileges. To run the steps as an elevated user with sudo privileges, prepend each command with <code>sudo</code>. If two commands are presented in the same instance (separated by <code>&amp;&amp;</code>), remember to use <code>sudo</code> after the <code>&amp;&amp;</code> (ex. <code>sudo [command] &amp;&amp; sudo [command]</code>). To create a standard user account with <code>sudo</code> privileges, complete the <a href="/docs/security/securing-your-server#add-a-limited-user-account">Add a Limited User Account</a> section of our Securing your Server guide.</p></li>

<li><p>A working firewall is a necessary security measure. Firewall instructions <a href="#open-firewall-port-for-shadowsocks-client">will be presented</a> for UFW, FirewallD, and Iptables. To configure a firewall on your Linode, visit one of our guides:</p>

<ul>
<li><a href="/docs/security/firewalls/configure-firewall-with-ufw">How to Configure a Firewall with UFW</a></li>
<li><a href="/docs/security/firewalls/introduction-to-firewalld-on-centos">Introduction to FirewallD on CentOS</a></li>
</ul></li>
</ol>

<h2 id="install-the-shadowsocks-server">Install the Shadowsocks Server</h2>

<h3 id="download-source-code-and-dependencies">Download Source Code and Dependencies</h3>

<ol>
<li><p>Update system repositories, then download and install dependencies:</p>

<p><strong>Ubuntu 17.04</strong></p>

<pre><code>apt update &amp;&amp; apt upgrade -yuf
apt install -y --no-install-recommends gettext build-essential autoconf libtool libpcre3-dev \
                                       asciidoc xmlto libev-dev libudns-dev automake libmbedtls-dev \
                                       libsodium-dev git python-m2crypto libc-ares-dev
</code></pre>

<p><strong>CentOS 7</strong></p>

<pre><code>yum update &amp;&amp; yum upgrade -y
yum install epel-release -y
yum install -y gcc gettext autoconf libtool automake make pcre-devel asciidoc xmlto udns-devel \
               libev-devel libsodium-devel mbedtls-devel git m2crypto c-ares-devel
</code></pre></li>

<li><p>Navigate to the <code>/opt</code> directory and download the Shadowsocks Git module:</p>

<pre><code>git clone https://github.com/shadowsocks/shadowsocks-libev.git
cd shadowsocks-libev
git submodule update --init --recursive
</code></pre></li>

<li><p>Install Shadowsocks-libev:</p>

<pre><code>./autogen.sh
./configure
make &amp;&amp; make install
</code></pre></li>
</ol>

<h2 id="configure-the-shadowsocks-server">Configure the Shadowsocks Server</h2>

<ol>
<li><p>Create a new system user for Shadowsocks:</p>

<p><strong>Ubuntu 17.04</strong></p>

<pre><code>adduser --system --no-create-home --group shadowsocks
</code></pre>

<p><strong>CentOS 7</strong></p>

<pre><code>adduser --system --no-create-home -s /bin/false shadowsocks
</code></pre></li>

<li><p>Create a new directory for the configuration file:</p>

<pre><code>mkdir -m 755 /etc/shadowsocks
</code></pre></li>

<li><p>Create the Shadowsocks config file. Paste the contents listed below into the file, noting the instructions in the <strong>shadowsocks.json Breakdown</strong> table for each property. Follow these instructions to determine the value you should set for each property.</p></li>
</ol>

<h2 id="shadowsocks-json-breakdown">shadowsocks.json Breakdown</h2>

<table>
<thead>
<tr>
<th align="center"><strong>Property</strong></th>
<th align="center"><strong>Explanation</strong></th>
<th align="center"><strong>Possible Values</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">server</td>
<td align="center">Enter your server&rsquo;s public IP address.</td>
<td align="center">User determined</td>
</tr>

<tr>
<td align="center">server_port</td>
<td align="center">Shadowsocks will listen on this port. Use the default value of <code>8388</code>.</td>
<td align="center">User determined</td>
</tr>

<tr>
<td align="center">local_address</td>
<td align="center">Local listening address. Use your loopback address, <code>127.0.0.1</code>.</td>
<td align="center">Loopback address</td>
</tr>

<tr>
<td align="center">local_port</td>
<td align="center">Local listening port. Use the default value of <code>1080</code>.</td>
<td align="center">User determined</td>
</tr>

<tr>
<td align="center">password</td>
<td align="center">Connection password. Set a strong password.</td>
<td align="center">User determined</td>
</tr>

<tr>
<td align="center">timeout</td>
<td align="center">Connection timeout in seconds. The default value should be sufficient here.</td>
<td align="center">User determined</td>
</tr>

<tr>
<td align="center">method</td>
<td align="center">Encryption method. Using AEAD algorithms is recommended.</td>
<td align="center">See <a href="https://shadowsocks.org/en/spec/Stream-Ciphers.html">Stream Ciphers</a> and <a href="https://shadowsocks.org/en/spec/AEAD-Ciphers.html">AEAD Ciphers</a></td>
</tr>

<tr>
<td align="center">fast_open</td>
<td align="center">Reduces latency when turned on. Can only be used with kernel versions 3.7.1 or higher. Check your kernel version with <code>umame -r</code>.</td>
<td align="center">true, false</td>
</tr>

<tr>
<td align="center">nameserver</td>
<td align="center">Name servers for internal DNS resolver.</td>
<td align="center">User determined</td>
</tr>
</tbody>
</table>

<dl class="file">
<dt>


		**/etc/shadowsocks/shadowsocks.json** 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;server&#34;</span><span class="p">:</span><span class="s2">&#34;192.0.0.1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;server_port&#34;</span><span class="p">:</span><span class="mi">8388</span><span class="p">,</span>
    <span class="nt">&#34;local_address&#34;</span><span class="p">:</span> <span class="s2">&#34;127.0.0.1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;local_port&#34;</span><span class="p">:</span><span class="mi">1080</span><span class="p">,</span>
    <span class="nt">&#34;password&#34;</span><span class="p">:</span><span class="s2">&#34;mypassword&#34;</span><span class="p">,</span>
    <span class="nt">&#34;timeout&#34;</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span>
    <span class="nt">&#34;method&#34;</span><span class="p">:</span><span class="s2">&#34;aes-256-gcm&#34;</span><span class="p">,</span>
    <span class="nt">&#34;fast_open&#34;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<h2 id="optimize-shadowsocks">Optimize Shadowsocks</h2>

<p>Apply the following optimizations to your system kernel to provide for a smooth running Shadowsocks installation.</p>

<ol>
<li><p>Create the <code>/etc/sysctl.d/local.conf</code> system optimization file and paste the contents shown below into your file.</p>

<blockquote class="caution">
  <strong class="callout-title">Caution</strong>
  <div>These settings provide the optimal kernel configuration for Shadowsocks. If you have previously configured your system kernel settings for any reason, make sure no conflicts exist.</div>
</blockquote>


<dl class="file">
<dt>


		/etc/sysctl.d/local.conf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span><span class="lnt">29</span><span class="lnt">30</span><span class="lnt">31</span><span class="lnt">32</span><span class="lnt">33</span><span class="lnt">34</span><span class="lnt">35</span><span class="lnt">36</span><span class="lnt">37</span><span class="lnt">38</span><span class="lnt">39</span><span class="lnt">40</span><span class="lnt">41</span><span class="lnt">42</span><span class="lnt">43</span><span class="lnt">44</span><span class="lnt">45</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># max open files
</span><span class="c1"></span>fs.file-max <span class="o">=</span> <span class="m">51200</span>
<span class="c1"># max read buffer
</span><span class="c1"></span>net.core.rmem_max <span class="o">=</span> <span class="m">67108864</span>
<span class="c1"># max write buffer
</span><span class="c1"></span>net.core.wmem_max <span class="o">=</span> <span class="m">67108864</span>
<span class="c1"># default read buffer
</span><span class="c1"></span>net.core.rmem_default <span class="o">=</span> <span class="m">65536</span>
<span class="c1"># default write buffer
</span><span class="c1"></span>net.core.wmem_default <span class="o">=</span> <span class="m">65536</span>
<span class="c1"># max processor input queue
</span><span class="c1"></span>net.core.netdev_max_backlog <span class="o">=</span> <span class="m">4096</span>
<span class="c1"># max backlog
</span><span class="c1"></span>net.core.somaxconn <span class="o">=</span> <span class="m">4096</span>

<span class="c1"># resist SYN flood attacks
</span><span class="c1"></span>net.ipv4.tcp_syncookies <span class="o">=</span> <span class="m">1</span>
<span class="c1"># reuse timewait sockets when safe
</span><span class="c1"></span>net.ipv4.tcp_tw_reuse <span class="o">=</span> <span class="m">1</span>
<span class="c1"># turn off fast timewait sockets recycling
</span><span class="c1"></span>net.ipv4.tcp_tw_recycle <span class="o">=</span> <span class="m">0</span>
<span class="c1"># short FIN timeout
</span><span class="c1"></span>net.ipv4.tcp_fin_timeout <span class="o">=</span> <span class="m">30</span>
<span class="c1"># short keepalive time
</span><span class="c1"></span>net.ipv4.tcp_keepalive_time <span class="o">=</span> <span class="m">1200</span>
<span class="c1"># outbound port range
</span><span class="c1"></span>net.ipv4.ip_local_port_range <span class="o">=</span> <span class="m">10000</span> <span class="m">65000</span>
<span class="c1"># max SYN backlog
</span><span class="c1"></span>net.ipv4.tcp_max_syn_backlog <span class="o">=</span> <span class="m">4096</span>
<span class="c1"># max timewait sockets held by system simultaneously
</span><span class="c1"></span>net.ipv4.tcp_max_tw_buckets <span class="o">=</span> <span class="m">5000</span>
<span class="c1"># turn on TCP Fast Open on both client and server side
</span><span class="c1"></span>net.ipv4.tcp_fastopen <span class="o">=</span> <span class="m">3</span>
<span class="c1"># TCP receive buffer
</span><span class="c1"></span>net.ipv4.tcp_rmem <span class="o">=</span> <span class="m">4096</span> <span class="m">87380</span> <span class="m">67108864</span>
<span class="c1"># TCP write buffer
</span><span class="c1"></span>net.ipv4.tcp_wmem <span class="o">=</span> <span class="m">4096</span> <span class="m">65536</span> <span class="m">67108864</span>
<span class="c1"># turn on path MTU discovery
</span><span class="c1"></span>net.ipv4.tcp_mtu_probing <span class="o">=</span> <span class="m">1</span>

<span class="c1"># for high-latency network
</span><span class="c1"></span>net.ipv4.tcp_congestion_control <span class="o">=</span> hybla

<span class="c1"># for low-latency network, use cubic instead
</span><span class="c1"></span>net.ipv4.tcp_congestion_control <span class="o">=</span> cubic</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></li>

<li><p>Apply optimizations:</p>

<pre><code>sysctl --system
</code></pre></li>
</ol>

<h3 id="create-a-shadowsocks-systemd-service">Create a Shadowsocks Systemd Service</h3>

<p>The Shadowsocks systemd service allows the daemon to automatically start on system boot and run in the background.</p>

<ol>
<li><p>Create a systemd file with the following content:</p>

<dl class="file">
<dt>


		/etc/systemd/system/shadowsocks.service 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-service" data-lang="service"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-service" data-lang="service">[Unit]
Description=Shadowsocks proxy server

[Service]
User=root
Group=root
Type=simple
ExecStart=/usr/local/bin/ss-server -c /etc/shadowsocks/shadowsocks.json -a shadowsocks -v start
ExecStop=/usr/local/bin/ss-server -c /etc/shadowsocks/shadowsocks.json -a shadowsocks -v stop

[Install]
WantedBy=multi-user.target</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></li>

<li><p>Enable and start <code>shadowsocks.service</code>:</p>

<pre><code>systemctl daemon-reload
systemctl enable shadowsocks
systemctl start shadowsocks
</code></pre></li>
</ol>

<h2 id="open-firewall-port-for-shadowsocks-client">Open Firewall Port for Shadowsocks Client</h2>

<p>Depending on your preference, you may use either the iptables, UFW, or firewallD (CentOS 7 only) commands to complete this section.</p>

<p>Open port <code>8388</code> for the Shadowsocks Client:</p>

<p><strong>Iptables</strong></p>

<pre><code>iptables -4 -A INPUT -p tcp --dport 8388 -m comment --comment &quot;Shadowsocks server listen port&quot; -j ACCEPT
</code></pre>

<p><strong>UFW</strong></p>

<pre><code>ufw allow proto tcp to 0.0.0.0/0 port 8388 comment &quot;Shadowsocks server listen port&quot;
</code></pre>

<p><strong>FirewallD</strong></p>

<pre><code>firewall-cmd --permanent --zone=public --add-rich-rule='
    rule family=&quot;ipv4&quot;
    port protocol=&quot;tcp&quot; port=&quot;8388&quot; accept'

    firewall-cmd --reload
</code></pre>

<h2 id="install-a-shadowsocks-client">Install a Shadowsocks Client</h2>

<p>The second stage to a Shadowsocks setup is to install a client on the user&rsquo;s device. This could include a computer, mobile device, tablet, and even home network router. Supported operating systems include Windows, OS X, iOS, Linux, Android, and OpenWRT.</p>

<h3 id="mac-os-shadowsocks-client">Mac OS Shadowsocks Client</h3>

<p>Download ShadowsocksX-NG, or the appropriate GUI or CLI client for your system:</p>

<p><img src="/docs/assets/shadowsocks/shadowsocks_download.png" alt="Shadowsocks download page" title="Shadowsocks download page" /></p>

<p>Once the program is installed, run it, and then enter your information in the <strong>New Server</strong> button:</p>

<p><img src="/docs/assets/shadowsocks/shadowsocks_config.png" alt="Shadowsocks configuration" title="Shadowsocks configuration" /></p>

<p>Press the <strong>Global Mode</strong> button to enable Shadowsocks globally on your computer.</p>

<h3 id="install-windows-client">Install Windows Client</h3>

<ol>
<li><p>Navigate to the <a href="https://github.com/shadowsocks/shadowsocks-windows/releases">Windows Shadowsocks</a> page. Click on <strong>Shadowsocks-4.0.4.zip</strong> under <strong>Downloads</strong>.</p></li>

<li><p>Extract the contents of the .zip file into any folder and run <code>Shadowsocks.exe</code>. Shadowsocks will run as a background process. Locate the Shadowsocks icon in the taskbar (it may be in the <em>Hidden Icons</em> taskbar menu), right-click on the Shadowsocks icon, then click on <strong>Edit Servers</strong>. Enter the information that you saved in the <em>shadowsocks.json</em> file.</p>

<p><img src="/docs/assets/shadowsocks/shadowsocks-windows-edit-servers.png" alt="New server configuration dialog" title="Windows New Server configuration dialog" /></p></li>

<li><p>Right-click on the Shadowsocks icon again. Mouse over <strong>PAC</strong> and select both <strong>Local PAC</strong> and <strong>Secure Local PAC</strong>. To confirm that your Linode&rsquo;s IP address is selected, mouse over <strong>Servers</strong>.</p></li>
</ol>

<h2 id="where-to-go-from-here">Where to Go from Here</h2>

<p>Once your Shadowsocks server is online, configure a client on your mobile phone, tablet, or any other devices you use. The <a href="https://shadowsocks.org/en/download/clients.html">Shadowsocks client download</a> page supports all mainstream platforms.</p>

            
<h2>More Information</h2>
<p>You may wish to consult the following resources for additional information on this topic. While these are provided in the hope that they will be useful, please note that we cannot vouch for the accuracy or timeliness of externally hosted materials.</p>
<ul>

<li><a href="https://shadowsocks.org/">Shadowsocks official</a></li>

<li><a href="https://github.com/shadowsocks/shadowsocks-libev">Shadowsocks-libev GitHub</a></li>

</ul>


            

<h2>See Also</h2>
<ul>
    
    
    <li><a href="/docs/networking/vpn/install-openvpn-access-server-on-linux/">Install OpenVPN Access Server on Linux for Secure Communications</a></li>
    
    
    
    <li><a href="/docs/security/security-patches/patching-glibc-for-the-ghost-vulnerability/">Upgrading glibc for the GHOST Vulnerability</a></li>
    
    
    
    <li><a href="/docs/security/security-patches/disabling-sslv3-for-poodle/">Disabling SSLv3 for POODLE</a></li>
    
    
    
    <li><a href="/docs/security/security-patches/patching-bash-for-the-shellshock-vulnerability/">Upgrading Bash for the Shellshock Vulnerability</a></li>
    
    
    
    <li><a href="/docs/applications/cloud-storage/dropbox/">Installing and Configuring Dropbox</a></li>
    
    
</ul>


            
            
<p class="doc-license">This guide is published under a <a href="https://creativecommons.org/licenses/by-nd/4.0">CC BY-ND 4.0</a> license.</p>

          </div>
          <div id="doc-sidebar-container" class="col-sm-3 col-sm-pull-9 hidden-xs">
            <div id="doc-sidebar">
              <div markdown="0" class="doc-sidebar-inner" >
  <div class="input-group">
	<label class="sr-only" for="q">Search guides and tutorials</label>
	<input id="ss_keyword" name="q" type="text" class="form-control" placeholder="Search guides..."/>
	<span class="input-group-btn">
		<button type="submit" class="btn btn-blue" id="ds-search-btn"><span class="glyphicon glyphicon-search"></span></button>
	</span>
</div>
</div>

                
              <div class="doc-sidebar-inner" id="doc-sidebar-toc">
                <h3 id="doc-sidebar-title">In This Guide:</h3>
                <div class="sidebar sidebar-library nav navbar" id="markdown-toc">
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#before-you-begin">Before You Begin</a></li>
<li><a href="#install-the-shadowsocks-server">Install the Shadowsocks Server</a>
<ul>
<li><a href="#download-source-code-and-dependencies">Download Source Code and Dependencies</a></li>
</ul></li>
<li><a href="#configure-the-shadowsocks-server">Configure the Shadowsocks Server</a></li>
<li><a href="#shadowsocks-json-breakdown">shadowsocks.json Breakdown</a></li>
<li><a href="#optimize-shadowsocks">Optimize Shadowsocks</a>
<ul>
<li><a href="#create-a-shadowsocks-systemd-service">Create a Shadowsocks Systemd Service</a></li>
</ul></li>
<li><a href="#open-firewall-port-for-shadowsocks-client">Open Firewall Port for Shadowsocks Client</a></li>
<li><a href="#install-a-shadowsocks-client">Install a Shadowsocks Client</a>
<ul>
<li><a href="#mac-os-shadowsocks-client">Mac OS Shadowsocks Client</a></li>
<li><a href="#install-windows-client">Install Windows Client</a></li>
</ul></li>
<li><a href="#where-to-go-from-here">Where to Go from Here</a></li>
</ul></li>
</ul>
</nav>
                </div>
              </div>
              
              <div class="library-rss">
  <a href="https://linode.com/docs/index.xml"><i class="fa fa-rss-square"></i> RSS feed</a>
</div>

              <div markdown="0" class="library-signup">
  <form action="//linode.us7.list-manage.com/subscribe/post?u=f9b54ed743e1629877750e3f4&amp;id=68bafea72a&SIGNUP=library-website"
    method="post" class="email-signup" target="_blank" novalidate="">
    <i class="fa fa-envelope"></i>
    <h6>Monthly Guides Update</h6>
    <input name="EMAIL" type="email" class="form-control input-sm"
    placeholder="Email address" required="" />
    <div style="position: absolute; left: -5000px;" aria-hidden="true">
      <input type="text" name="b_f9b54ed743e1629877750e3f4_68bafea72a"
      tabindex="-1" value="">
    </div>
    <div style="display:none">
      <input type="checkbox" value="4" name="group[13][4]"
      id="mce-group[13]-13-0" checked="">
    </div>
    <button type="submit" class="btn btn-blue btn-sm btn-border email-signup" value="Subscribe"
    name="subscribe" id="mc-embedded-subscribe">Sign Up</button>
  </form>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal" aria-hidden="true">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="img-modal-title" class="modal-title">Image Detail</h4>
      </div>
      <div class="modal-body">
        <img id="img-modal-image" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-blue" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

        <footer>
            <section class="neutral some-space">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 text-center">
				<h3>Get paid to write for Linode.</h3>
				<p class="lead">We're always expanding our docs. If you like to help people, can write, and want to earn some cash, learn how you can <a href="/docs/contribute">earn up to $300 for every guide you write</a> and we publish.</p>
			</div>
		</div>
	</div>
</section>
            <section id="pre-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-7">
        <span>Get started in the Linode Cloud today.</span>
      </div>
      <div class="col-sm-5 pad-xs">
        <a id="btn-signup-bottom" class="btn btn-lg btn-full btn-green" href="https://manager.linode.com/session/signup">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">

    <div class="row">
      <div class="footer-col">
        <h5><a href="https://www.linode.com/linodes">Overview</a></h5>
        <ul>
          <li><a href="https://www.linode.com/pricing">Plans &amp; Pricing</a></li>
          <li><a href="https://www.linode.com/linodes">Features</a></li>
          <li><a href="https://www.linode.com/addons">Add-Ons</a></li>
          <li><a href="https://www.linode.com/managed">Managed</a></li>
          <li><a href="https://www.linode.com/professional-services">Professional Services</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://linode.com/docs/">Resources</a></h5>
        <ul>
          <li><a href="https://linode.com/docs/">Guides &amp; Tutorials</a></li>
          <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
          <li><a href="https://forum.linode.com/">Forum</a></li>
          <li><a href="https://www.linode.com/chat">Chat</a></li>
          <li><a href="http://status.linode.com/">System Status</a></li>
        </ul>
      </div>


      <div class="footer-col">
        <h5><a href="https://www.linode.com/about">Company</a></h5>
        <ul>
          <li><a href="https://www.linode.com/about">About Us</a></li>
          <li><a href="https://blog.linode.com">Blog</a></li>
          <li><a href="https://www.linode.com/press">Press</a></li>
          <li><a href="https://www.linode.com/referrals">Referral System</a></li>
          <li><a href="https://www.linode.com/careers">Careers</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://www.linode.com/contact">Contact Us</a></h5>
        <ul>
          <li><a href="tel:+18554546633">855-4-LINODE</a></li>
          <li><a href="tel:+18554546633">(855-454-6633)</a></li>
          <li><a href="tel:+16093807100">Intl.: +1 609-380-7100</a></li>
          <li><a href="mailto:support@linode.com">Email us</a></li>
          <li>
            <br />
            <a target="_blank" href="https://facebook.com/linode"><i class="fa fa-facebook-square"></i></a>
            <a target="_blank" href="https://twitter.com/linode"><i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://plus.google.com/+linode/"><i class="fa fa-google-plus-square"></i></a>
            <a target="_blank" href="https://linkedin.com/company/linode"><i class="fa fa-linkedin-square"></i></a>
            <a target="_blank" href="https://github.com/linode/"><i class="fa fa-github-square"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="dark-moar">
  <div class="container">
    <div id="footer-copyright" class="row">
      <div class="col text-center">
        &copy; 2017 Linode, LLC
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/tos">Terms of Service</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/privacy">Privacy Policy</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/security">Security</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/compliance">Standards &amp; Compliance</a>
      </div>
    </div>
  </div>
</section>

        </footer>
        
             <script src="/docs/build/js/libs.js" type="text/javascript"></script>
<script src="/docs/build/js/main.js" type="text/javascript"></script>

        
        <script type="text/javascript">
$( "img[src^='\/docs\/assets']" ).each(function () {
  $( this ).parent().bind('click', false);
  $( this ).on('click', function(e) {
    var image_title = $( this ).attr('alt');
    var image_href = $( this ).parent().attr('href') || $( this ).attr('src');
    $( '#img-modal-image' ).attr('src', image_href);
    $( '#img-modal-title' ).text(image_title);
    $( '#img-modal' ).modal({ show: true });
  });
});
</script>



        
<script type="text/javascript">
 SidebarScroll.init()
</script>

    </body>
</html>