<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>LEMP Server on CentOS 6</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="Install a LEMP stack to serve websites and applications on CentOS 6">
        <meta name="keywords" content="nginx, lemp, php, linux, web applications">
        
        <meta property="og:title" content="LEMP Server on CentOS 6">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://linode.com/docs/web-servers/lemp/lemp-server-on-centos-6/">
        <meta property="og:description" content="Install a LEMP stack to serve websites and applications on CentOS 6">
        <meta property="og:site_name" content="Linode Guides &amp; Tutorials">
        
        
        <meta name="twitter:card" content="summary">
        
        <meta name="twitter:site" content="@linode">
        <link rel="alternate" type="application/rss" href="https://linode.com/docs/index.xml">

        
             <link href="/docs/build/stylesheets/home.css" rel='stylesheet' type='text/css'>

        
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
        <link rel="canonical" href="https://linode.com/docs/web-servers/lemp/lemp-server-on-centos-6/">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body class="no-subnav">
         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchLabel" id="ds-search-modal">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div id="ds-search-input">
				<div class="input-group col-md-12">
					<input id="ds-search" type="text" class="form-control input-lg" placeholder="Search" />
					<span class="input-group-btn">
						<button class="btn btn-info btn-lg" id="ds-search-btn-modal" type="button">
						<i class="glyphicon glyphicon-search"></i>
						</button>
					</span>
				</div>
				<ul class="list-group" id="ds-search-list">
				</ul>
			</div>
		</div>
	</div>
</div> 
         
        <header>
            <nav id="main-nav" class="navbar navbar-default" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://www.linode.com"><img id="navbar-logo" src="/docs/media/images/header/linode-logo.svg" style="height:57px"></a>
    </div>

    <div class="collapse navbar-collapse navbar-top-collapse">
      <ul class="nav navbar-nav navbar-right">

                <li><a href="https://www.linode.com/"><span class='nav-home'></span></a></li>
                <li><a href="https://www.linode.com/linodes">Features</a></li>
                <li><a href="https://www.linode.com/pricing">Pricing</a></li>
                <li><a href="https://www.linode.com/addons">Add-ons</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-main-nav dropdown-mega">
            <li class="dropdown-third">
              <ul >
                <li><a href="https://linode.com/docs/getting-started">Getting Started</a></li>
                <li><a href="https://linode.com/docs/migrate-from-shared">Migrating to Linode</a></li>
                <li><a href="https://linode.com/docs/hosting-website">Hosting a Website</a></li>
                <li class="divider"></li>
                <li class="big"><a href="https://linode.com/docs"><i class="fa fa-book"></i> Guides &amp; Tutorials</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third middle">
              <ul >
                <li><a href="https://www.linode.com/api">API</a></li>
                <li><a href="https://www.linode.com/stackscripts">StackScripts</a></li>
                <li><a href="https://www.linode.com/mobile">Mobile</a></li>
                <li><a href="https://www.linode.com/cli" target="_blank">CLI</a></li>

                <li class="divider"></li>

                <li><a href="https://www.linode.com/chat"><i class="fa fa-bullhorn gray"></i> Chat</a></li>
                <li><a href="https://forum.linode.com"><i class="fa fa-comments"></i> Community Forum</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third">
              <ul >
                <li><a href="https://blog.linode.com">Blog</a></li>
                <li><a href="http://status.linode.com">System Status</a></li>
                <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
                <li><a href="https://www.linode.com/about">About Us</a></li>
                <li class="divider"></li>
                <li><a href="https://www.linode.com/contact"><i class="fa fa-user"></i> Contact Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li role="presentation" class="divider-vertical"><span>|</span></li>
          <li class=""><a href="https://manager.linode.com/">Log in <span class="login-caret"></span></a></li>
          <li class="visible-xs"><a href="https://manager.linode.com/session/signup">Sign up</a></li>
          <li class="hidden-xs"><div><a id="btn-signup-top" class="btn btn-sm btn-green navbar-btn hidden-xs" href="https://manager.linode.com/session/signup">Sign up</a></div></li>
      </ul>
    </div>

  </div>
</nav>

            <nav class="navbar subnav jumbotron" role="navigation">
  <div class="container">
    <div class="subnav-divider">

    </div>
  </div>
</nav>
        </header>
        
<section class="primary first-section">
  <div class="container">
    <div class="row breadcrumb-row">
  <div class="col-sm-12">
    <ol class="breadcrumb library-breadcrumb">
      







<li>
  
  <a href="https://linode.com/docs/">Guides &amp; Tutorials</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/web-servers/">Web Server Guides</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/web-servers/lemp/">LEMP Guides</a>
  
</li>


<li>
  
  LEMP Server on CentOS 6
  
</li>

    </ol>
  </div>
</div>

    <div class="row" itemscope itemtype="http://schema.org/TechArticle">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-9 col-sm-offset-3">
          </div>
        </div>
        <div class="row">
          <div id="article-body" class="col-sm-9 col-sm-push-3 doc">
            <h1 class="doc-title" itemprop="headline">LEMP Server on CentOS 6</h1>
<p markdown="0" class="doc-time doc-modified-time">
  <small class="updated">Updated <time itemprop="dateModified" datetime="2013-01-08T00:00:00Z">Tuesday, January 8, 2013</time> by Doug Freed</small>
  
</p>

           <div class="row">
            <div class="col-sm-9"><div markdown="0" class="signup-top">
    <span>
        Use promo code <strong>DOCS10</strong> for $10 credit on a new account.
    </span>
    <form action="https://manager.linode.com/session/signup" style="display: inline">
        <button type="submit" target="_blank" class="btn btn-blue btn-sm btn-border">Try this Guide</button>
    </form>
</div>
</div>
            <div class="col-sm-3"><div class="social-share">
    <div class="btn-group share-group">
        <a data-toggle="dropdown" class="btn btn-info">
            <i class="fa fa-share-alt fa-inverse"></i>
        </a>
        <button href="#" data-toggle="dropdown" class="btn btn-info dropdown-toggle share">
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a data-original-title="Twitter" rel="tooltip"  href="https://twitter.com/share?url=https%3a%2f%2flinode.com%2fdocs%2fweb-servers%2flemp%2flemp-server-on-centos-6%2f&via=linode&text=LEMP%20Server%20on%20CentOS%206" class="btn btn-twitter" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Facebook" rel="tooltip"  href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flinode.com%2fdocs%2fweb-servers%2flemp%2flemp-server-on-centos-6%2f" class="btn btn-facebook" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-facebook"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Hacker News" rel="tooltip"  href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flinode.com%2fdocs%2fweb-servers%2flemp%2flemp-server-on-centos-6%2f&t=LEMP%20Server%20on%20CentOS%206" class="btn btn-hacker-news" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-hacker-news "></i>
                </a>
            </li>
        </ul>
    </div>
</div></div>
            </div>
            <div class="library-github" markdown="0">
	<i class="fa fa-github"></i>
	<strong>Contribute on GitHub</strong>
	<p>
		
		<a href="https://github.com/linode/docs">View Project</a> |
		<a href="https://github.com/linode/docs/blob/master/docs/web-servers/lemp/lemp-server-on-centos-6.md">View File</a> |
		<a href="https://github.com/linode/docs/edit/master/docs/web-servers/lemp/lemp-server-on-centos-6.md">Edit File</a>
	</p>
</div>
            
            

            

<p>This document describes a compatible alternative to the &ldquo;LAMP&rdquo; (Linux, Apache, MySQL, and PHP) stack, known as &ldquo;LEMP.&rdquo; The LEMP stack replaces the Apache web server component with nginx (pronounced &ldquo;engine x,&rdquo; providing the &ldquo;E&rdquo; in LEMP,) which can increase the ability of the server to scale in response to demand.</p>

<p>Prior to beginning this guide, please complete the <a href="/docs/getting-started/">getting started guide</a>. If you are new to Linux server administration, you may be interested in our <a href="/docs/tools-reference/introduction-to-linux-concepts/">introduction to Linux concepts guide</a>, <a href="/docs/beginners-guide/">beginner&rsquo;s guide</a> and <a href="/content/using-linux/administration-basics">administration basics guide</a>.</p>

<h2 id="set-the-hostname">Set the Hostname</h2>

<p>Before you begin installing and configuring the components described in this guide, please make sure you&rsquo;ve followed our instructions for <a href="/docs/getting-started#setting-the-hostname">setting your hostname</a>. Issue the following commands to make sure it is set properly:</p>

<pre><code>hostname
hostname -f
</code></pre>

<p>The first command should show your short hostname, and the second should show your fully qualified domain name (FQDN).</p>

<h2 id="prepare-system-for-deployment">Prepare System For Deployment</h2>

<p>Before beginning with the installation of this web application stack, issue the following command to ensure that your system&rsquo;s package database is up to date and that all installed software is running at the latest version:</p>

<pre><code>yum update
</code></pre>

<h2 id="install-the-nginx-web-server">Install the nginx Web Server</h2>

<p>There are several viable and popular options for installing nginx. The first option retrieves packages from the Fedora Project&rsquo;s EPEL software repository and provides a more stable and tested version of the web server.</p>

<p>The second option requires downloading the source for nginx from the upstream provider and compiling the software manually. Manual compilation makes it possible to run the most current version of the software at the expense of the testing and automatic updates from the Fedora project. All options are compatible, but in most cases we recommend using the packages from the EPEL repositories, unless your needs require a version newer than the one available in the EPEL repositories. Possible reasons for compiling nginx yourself include access to optional compile-time modules and features added in more recent versions.</p>

<p>For more in-depth installation instructions consider our <a href="/docs/websites/lemp/lemp-server-on-centos-6">guide to installing nginx</a>.</p>

<h3 id="deploy-from-epel-packages">Deploy from EPEL Packages</h3>

<p>If you choose to install nginx from the EPEL repository, issue the following commands to initialize the EPEL repository and install nginx:</p>

<pre><code>rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
yum update
yum install nginx sudo
</code></pre>

<p>This will install version 0.8.54 of the nginx server. Issue the following commands to start nginx for the first and ensure that nginx will start following the next reboot cycle :</p>

<pre><code>/etc/init.d/nginx start
chkconfig --add nginx
chkconfig nginx on
</code></pre>

<h3 id="compile-nginx-from-source">Compile nginx from Source</h3>

<p>If you want to compile and install nginx from source, issue the following command to install the prerequisites:</p>

<pre><code>yum install zlib-devel wget openssl-devel pcre pcre-devel sudo gcc make autoconf automake
</code></pre>

<p>Check the <a href="http://nginx.org/en/download.html">nginx download page</a> and ensure that version 1.0.0 is the most recent &ldquo;stable&rdquo; version. If not, replace the version specified in the following command sequence with the latest stable version. Issue the following commands to download and install the nginx web server:</p>

<pre><code>cd /opt/
wget http://nginx.org/download/nginx-1.0.0.tar.gz
tar -zxvf nginx-1.0.0.tar.gz
cd /opt/nginx-1.0.0/
mkdir /var/lib/nginx
</code></pre>

<p>The following <code>./configure</code> command will prepare nginx for compilation:</p>

<pre><code>./configure --prefix=/opt/nginx --user=nginx --group=nginx --with-http_ssl_module
</code></pre>

<p>When the <code>./configure</code> command completes it will display the following information regarding the location of important nginx-related files after the installation is completed.</p>

<pre><code>nginx path prefix: &quot;/opt/nginx&quot;
nginx binary file: &quot;/opt/nginx/sbin/nginx&quot;
nginx configuration prefix: &quot;/opt/nginx/conf&quot;
nginx configuration file: &quot;/opt/nginx/conf/nginx.conf&quot;
nginx pid file: &quot;/opt/nginx/logs/nginx.pid&quot;
nginx error log file: &quot;/opt/nginx/logs/error.log&quot;
nginx http access log file: &quot;/opt/nginx/logs/access.log&quot;
nginx http client request body temporary files: &quot;client_body_temp&quot;
nginx http proxy temporary files: &quot;proxy_temp&quot;
nginx http fastcgi temporary files: &quot;fastcgi_temp&quot;
</code></pre>

<p>Issue the following commands to compile and then install the software as specified above:</p>

<pre><code>make
make install
</code></pre>

<p>Create a dedicated system user to run the nginx process under by issuing the following command:</p>

<pre><code>useradd -M -r --shell /bin/sh --home-dir /opt/nginx nginx
</code></pre>

<p>Now create the init script to make it possible to start and stop the web server more easily. Create <code>/etc/rc.d/init.d/nginx</code> with the following content:</p>

<dl class="file-excerpt">
<dt>


		/etc/rc.d/init.d/nginx 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">  1</span><span class="lnt">  2</span><span class="lnt">  3</span><span class="lnt">  4</span><span class="lnt">  5</span><span class="lnt">  6</span><span class="lnt">  7</span><span class="lnt">  8</span><span class="lnt">  9</span><span class="lnt"> 10</span><span class="lnt"> 11</span><span class="lnt"> 12</span><span class="lnt"> 13</span><span class="lnt"> 14</span><span class="lnt"> 15</span><span class="lnt"> 16</span><span class="lnt"> 17</span><span class="lnt"> 18</span><span class="lnt"> 19</span><span class="lnt"> 20</span><span class="lnt"> 21</span><span class="lnt"> 22</span><span class="lnt"> 23</span><span class="lnt"> 24</span><span class="lnt"> 25</span><span class="lnt"> 26</span><span class="lnt"> 27</span><span class="lnt"> 28</span><span class="lnt"> 29</span><span class="lnt"> 30</span><span class="lnt"> 31</span><span class="lnt"> 32</span><span class="lnt"> 33</span><span class="lnt"> 34</span><span class="lnt"> 35</span><span class="lnt"> 36</span><span class="lnt"> 37</span><span class="lnt"> 38</span><span class="lnt"> 39</span><span class="lnt"> 40</span><span class="lnt"> 41</span><span class="lnt"> 42</span><span class="lnt"> 43</span><span class="lnt"> 44</span><span class="lnt"> 45</span><span class="lnt"> 46</span><span class="lnt"> 47</span><span class="lnt"> 48</span><span class="lnt"> 49</span><span class="lnt"> 50</span><span class="lnt"> 51</span><span class="lnt"> 52</span><span class="lnt"> 53</span><span class="lnt"> 54</span><span class="lnt"> 55</span><span class="lnt"> 56</span><span class="lnt"> 57</span><span class="lnt"> 58</span><span class="lnt"> 59</span><span class="lnt"> 60</span><span class="lnt"> 61</span><span class="lnt"> 62</span><span class="lnt"> 63</span><span class="lnt"> 64</span><span class="lnt"> 65</span><span class="lnt"> 66</span><span class="lnt"> 67</span><span class="lnt"> 68</span><span class="lnt"> 69</span><span class="lnt"> 70</span><span class="lnt"> 71</span><span class="lnt"> 72</span><span class="lnt"> 73</span><span class="lnt"> 74</span><span class="lnt"> 75</span><span class="lnt"> 76</span><span class="lnt"> 77</span><span class="lnt"> 78</span><span class="lnt"> 79</span><span class="lnt"> 80</span><span class="lnt"> 81</span><span class="lnt"> 82</span><span class="lnt"> 83</span><span class="lnt"> 84</span><span class="lnt"> 85</span><span class="lnt"> 86</span><span class="lnt"> 87</span><span class="lnt"> 88</span><span class="lnt"> 89</span><span class="lnt"> 90</span><span class="lnt"> 91</span><span class="lnt"> 92</span><span class="lnt"> 93</span><span class="lnt"> 94</span><span class="lnt"> 95</span><span class="lnt"> 96</span><span class="lnt"> 97</span><span class="lnt"> 98</span><span class="lnt"> 99</span><span class="lnt">100</span><span class="lnt">101</span><span class="lnt">102</span><span class="lnt">103</span><span class="lnt">104</span><span class="lnt">105</span><span class="lnt">106</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span><span class="c1">#
</span><span class="c1"># nginx – this script starts and stops the nginx daemon
</span><span class="c1">#
</span><span class="c1"># chkconfig: - 85 15
</span><span class="c1"># description: Nginx is an HTTP(S) server, HTTP(S) reverse \
</span><span class="c1"># proxy and IMAP/POP3 proxy server
</span><span class="c1"># processname: nginx
</span><span class="c1"># config: /opt/nginx/conf/nginx.conf
</span><span class="c1"># pidfile: /opt/nginx/logs/nginx.pid
</span><span class="c1"></span>
<span class="c1"># Source function library.
</span><span class="c1"></span>. /etc/rc.d/init.d/functions

<span class="c1"># Source networking configuration.
</span><span class="c1"></span>. /etc/sysconfig/network

<span class="c1"># Check that networking is up.
</span><span class="c1"></span><span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$NETWORKING</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;no&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">0</span>

<span class="nv">nginx</span><span class="o">=</span><span class="s2">&#34;/opt/nginx/sbin/nginx&#34;</span>
<span class="nv">prog</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$nginx</span><span class="k">)</span>

<span class="nv">NGINX_CONF_FILE</span><span class="o">=</span><span class="s2">&#34;/opt/nginx/conf/nginx.conf&#34;</span>

<span class="nv">lockfile</span><span class="o">=</span>/var/lock/subsys/nginx

start<span class="o">()</span> <span class="o">{</span>
    <span class="o">[</span> -x <span class="nv">$nginx</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">5</span>
    <span class="o">[</span> -f <span class="nv">$NGINX_CONF_FILE</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">6</span>
    <span class="nb">echo</span> -n $<span class="s2">&#34;Starting </span><span class="nv">$prog</span><span class="s2">: &#34;</span>
    daemon <span class="nv">$nginx</span> -c <span class="nv">$NGINX_CONF_FILE</span>
    <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
    <span class="nb">echo</span>
    <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> touch <span class="nv">$lockfile</span>
    <span class="k">return</span> <span class="nv">$retval</span>
<span class="o">}</span>

stop<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> -n $<span class="s2">&#34;Stopping </span><span class="nv">$prog</span><span class="s2">: &#34;</span>
    killproc <span class="nv">$prog</span> -QUIT
    <span class="nv">retval</span><span class="o">=</span><span class="nv">$?</span>
    <span class="nb">echo</span>
    <span class="o">[</span> <span class="nv">$retval</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> rm -f <span class="nv">$lockfile</span>
    <span class="k">return</span> <span class="nv">$retval</span>
<span class="o">}</span>

restart<span class="o">()</span> <span class="o">{</span>
    configtest <span class="o">||</span> <span class="k">return</span> <span class="nv">$?</span>
    stop
    start
<span class="o">}</span>

reload<span class="o">()</span> <span class="o">{</span>
    configtest <span class="o">||</span> <span class="k">return</span> <span class="nv">$?</span>
    <span class="nb">echo</span> -n $”Reloading <span class="nv">$prog</span>: ”
    killproc <span class="nv">$nginx</span> -HUP
    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
    <span class="nb">echo</span>
<span class="o">}</span>

force_reload<span class="o">()</span> <span class="o">{</span>
    restart
<span class="o">}</span>

configtest<span class="o">()</span> <span class="o">{</span>
    <span class="nv">$nginx</span> -t -c <span class="nv">$NGINX_CONF_FILE</span>
<span class="o">}</span>

rh_status<span class="o">()</span> <span class="o">{</span>
    status <span class="nv">$prog</span>
<span class="o">}</span>

rh_status_q<span class="o">()</span> <span class="o">{</span>
    rh_status &gt;/dev/null <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="o">}</span>

<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
    start<span class="o">)</span>
        rh_status_q <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">0</span>
        <span class="nv">$1</span>
        <span class="p">;;</span>
    stop<span class="o">)</span>
        rh_status_q <span class="o">||</span> <span class="nb">exit</span> <span class="m">0</span>
        <span class="nv">$1</span>
        <span class="p">;;</span>
    restart<span class="p">|</span>configtest<span class="o">)</span>
        <span class="nv">$1</span>
        <span class="p">;;</span>
    reload<span class="o">)</span>
        rh_status_q <span class="o">||</span> <span class="nb">exit</span> <span class="m">7</span>
        <span class="nv">$1</span>
        <span class="p">;;</span>
    force-reload<span class="o">)</span>
        force_reload
        <span class="p">;;</span>
    status<span class="o">)</span>
        rh_status
        <span class="p">;;</span>
    condrestart<span class="p">|</span>try-restart<span class="o">)</span>
        rh_status_q <span class="o">||</span> <span class="nb">exit</span> <span class="m">0</span>
        <span class="p">;;</span>
    *<span class="o">)</span>
        <span class="nb">echo</span> $<span class="s2">&#34;Usage: </span><span class="nv">$0</span><span class="s2"> {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}&#34;</span>
        <span class="nb">exit</span> <span class="m">2</span>
    <span class="k">esac</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Next issue the following commands to make the script executable, set nginx to start on boot, and start the server for the first time:</p>

<pre><code>chmod +x /etc/rc.d/init.d/nginx
chkconfig --add nginx
chkconfig nginx on
service nginx start
</code></pre>

<h2 id="configure-nginx-virtual-hosting">Configure nginx Virtual Hosting</h2>

<p>Regardless of the method you use to install nginx, you will need to configure <code>server</code> declarations to specify name-based virtual hosts. There are a number of approaches to organizing configuration files with nginx. Regardless of the organizational strategy, all virtual host configurations are contained within <code>server</code> configuration blocks that are in turn contained within the <code>http</code> block in the <code>nginx.conf</code> file. Consider the following nginx virtual host configuration:</p>

<dl class="file-excerpt">
<dt>


		nginx server configuration 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
       <span class="kn">listen</span>   <span class="mi">80</span><span class="p">;</span>
       <span class="kn">server_name</span> <span class="s">www.example.com</span> <span class="s">example.com</span><span class="p">;</span>
       <span class="kn">access_log</span> <span class="s">/srv/www/example.com/logs/access.log</span><span class="p">;</span>
       <span class="kn">error_log</span> <span class="s">/srv/www/example.com/logs/error.log</span><span class="p">;</span>

       <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
           <span class="kn">root</span>   <span class="s">/srv/www/example.com/public_html</span><span class="p">;</span>
           <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
       <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Create the directories referenced in this configuration by issuing the following commands:</p>

<pre><code>mkdir -p /srv/www/example.com/public_html
mkdir -p /srv/www/example.com/logs
</code></pre>

<p>You may insert the server directives directly into the <code>http</code> section of the <code>/opt/nginx/conf/nginx.conf</code> or <code>/etc/nginx/nginx.con</code> file, although this may be difficult to manage. You may also replicate the management system created by the Debian/Ubuntu operating systems by creating <code>sites-available/</code> and <code>sites-enabled/</code> directories and inserting the following line into your <code>nginx.conf</code> file:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">http</span> <span class="p">{</span>
<span class="c1"># [...]
</span><span class="c1"></span>
<span class="kn">include</span> <span class="s">/opt/etc/nginx/sites-enabled/*</span><span class="p">;</span>

<span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Modify the include statement to point to the path of your <code>sites-enabled</code> directory. Create site configurations in the <code>sites-available</code> directory and then create symbolic links to these files in the <code>sites-enabled</code> directory. In other circumstances, it may make more sense to create and include a file named <code>/opt/nginx-sites.conf</code> that is included in the <code>nginx.conf</code> file as follows:</p>

<dl class="file-excerpt">
<dt>


		nginx.conf 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">http</span> <span class="p">{</span>
<span class="c1"># [...]
</span><span class="c1"></span>
<span class="kn">include</span> <span class="s">/opt/nginx-sites.conf</span><span class="p">;</span>

<span class="c1"># [...]
</span><span class="c1"></span><span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Depending on the size and nature of your deployment, place your virtual host configurations either directly in the <code>/opt/nginx-sites.conf</code> file or include statements for server-specific configuration files in the <code>nginx-sites.file</code> format. For more information regarding nginx configuration options, consider our <a href="/docs/websites/nginx/basic-nginx-configuration">overview of nginx configuration</a>.</p>

<p>Once you&rsquo;ve configured and loaded the nginx configuration, restart the web server to implement the new configuration by issuing the following command:</p>

<pre><code>/etc/init.d/nginx restart
</code></pre>

<p>Make sure that the directories referenced in your configuration exist on your file system before restarting.</p>

<h2 id="deploy-php-with-fastcgi">Deploy PHP with FastCGI</h2>

<p>If your application includes PHP code you will need to implement the following &ldquo;PHP-FastCGI&rdquo; solution to allow nginx to properly handle and serve pages that contain PHP code. Begin the deployment process by issuing the following commands to install the required dependencies:</p>

<pre><code>rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
yum update
yum install php-cli php spawn-fcgi wget
</code></pre>

<p>Next you will need to create the scripts that start and control the php-cgi process. First create <code>/usr/bin/php-fastcgi</code> with the following contents:</p>

<dl class="file-excerpt">
<dt>


		/usr/bin/php-fastcgi 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>grep -c <span class="s2">&#34;nginx&#34;</span> /etc/passwd<span class="sb">`</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
   <span class="nv">FASTCGI_USER</span><span class="o">=</span>nginx
<span class="k">elif</span> <span class="o">[</span> <span class="sb">`</span>grep -c <span class="s2">&#34;www-data&#34;</span> /etc/passwd<span class="sb">`</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
   <span class="nv">FASTCGI_USER</span><span class="o">=</span>www-data
<span class="k">elif</span> <span class="o">[</span> <span class="sb">`</span>grep -c <span class="s2">&#34;http&#34;</span> /etc/passwd<span class="sb">`</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
   <span class="nv">FASTCGI_USER</span><span class="o">=</span>http
<span class="k">else</span>
<span class="c1"># Set the FASTCGI_USER variable below to the user that
</span><span class="c1"># you want to run the php-fastcgi processes as
</span><span class="c1"></span>
<span class="nv">FASTCGI_USER</span><span class="o">=</span>
<span class="k">fi</span>

/usr/bin/spawn-fcgi -a <span class="m">127</span>.0.0.1 -p <span class="m">9000</span> -C <span class="m">6</span> -u <span class="nv">$FASTCGI_USER</span> -f /usr/bin/php-cgi</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Then create the init script to automatically start and the php-cgi process. To do so create a file at <code>/etc/init.d/php-fastcgi</code> with the following content:</p>

<dl class="file-excerpt">
<dt>


		/etc/init.d/php-fastcgi 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span><span class="lnt">29</span><span class="lnt">30</span><span class="lnt">31</span><span class="lnt">32</span><span class="lnt">33</span><span class="lnt">34</span><span class="lnt">35</span><span class="lnt">36</span><span class="lnt">37</span><span class="lnt">38</span><span class="lnt">39</span><span class="lnt">40</span><span class="lnt">41</span><span class="lnt">42</span><span class="lnt">43</span><span class="lnt">44</span><span class="lnt">45</span><span class="lnt">46</span><span class="lnt">47</span><span class="lnt">48</span><span class="lnt">49</span><span class="lnt">50</span><span class="lnt">51</span><span class="lnt">52</span><span class="lnt">53</span><span class="lnt">54</span><span class="lnt">55</span><span class="lnt">56</span><span class="lnt">57</span><span class="lnt">58</span><span class="lnt">59</span><span class="lnt">60</span><span class="lnt">61</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
<span class="c1"># php-fastcgi - Use php-fastcgi to run php applications
</span><span class="c1">#
</span><span class="c1"># chkconfig: - 85 15
</span><span class="c1"># description: Use php-fastcgi to run php applications
</span><span class="c1"># processname: php-fastcgi
</span><span class="c1"></span>
<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>grep -c <span class="s2">&#34;nginx&#34;</span> /etc/passwd<span class="sb">`</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
   <span class="nv">OWNER</span><span class="o">=</span>nginx
<span class="k">elif</span> <span class="o">[</span> <span class="sb">`</span>grep -c <span class="s2">&#34;www-data&#34;</span> /etc/passwd<span class="sb">`</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
   <span class="nv">OWNER</span><span class="o">=</span>www-data
<span class="k">elif</span> <span class="o">[</span> <span class="sb">`</span>grep -c <span class="s2">&#34;http&#34;</span> /etc/passwd<span class="sb">`</span> <span class="o">=</span> <span class="s2">&#34;1&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
   <span class="nv">OWNER</span><span class="o">=</span>http
<span class="k">else</span>
<span class="c1"># Set the OWNER variable below to the user that
</span><span class="c1"># you want to run the php-fastcgi processes as
</span><span class="c1"></span>
<span class="nv">OWNER</span><span class="o">=</span>
<span class="k">fi</span>

<span class="nv">PATH</span><span class="o">=</span>/sbin:/bin:/usr/sbin:/usr/bin
<span class="nv">DAEMON</span><span class="o">=</span>/usr/bin/php-fastcgi

<span class="nv">NAME</span><span class="o">=</span>php-fastcgi
<span class="nv">DESC</span><span class="o">=</span>php-fastcgi

<span class="nb">test</span> -x <span class="nv">$DAEMON</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">0</span>

<span class="c1"># Include php-fastcgi defaults if available
</span><span class="c1"></span><span class="k">if</span> <span class="o">[</span> -f /etc/default/php-fastcgi <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
    . /etc/default/php-fastcgi
<span class="k">fi</span>

<span class="nb">set</span> -e

<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
  start<span class="o">)</span>
    <span class="nb">echo</span> -n <span class="s2">&#34;Starting </span><span class="nv">$DESC</span><span class="s2">: &#34;</span>
    sudo -u <span class="nv">$OWNER</span> <span class="nv">$DAEMON</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">.&#34;</span>
    <span class="p">;;</span>
  stop<span class="o">)</span>
    <span class="nb">echo</span> -n <span class="s2">&#34;Stopping </span><span class="nv">$DESC</span><span class="s2">: &#34;</span>
    killall -9 php-cgi
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">.&#34;</span>
    <span class="p">;;</span>
  restart<span class="o">)</span>
    <span class="nb">echo</span> -n <span class="s2">&#34;Restarting </span><span class="nv">$DESC</span><span class="s2">: &#34;</span>
    killall -9 php-cgi
    sleep <span class="m">1</span>
    sudo -u <span class="nv">$OWNER</span> <span class="nv">$DAEMON</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">.&#34;</span>
    <span class="p">;;</span>
      *<span class="o">)</span>
        <span class="nv">N</span><span class="o">=</span>/etc/init.d/<span class="nv">$NAME</span>
        <span class="nb">echo</span> <span class="s2">&#34;Usage: </span><span class="nv">$N</span><span class="s2"> {start|stop|restart}&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
        <span class="nb">exit</span> <span class="m">1</span>
        <span class="p">;;</span>
    <span class="k">esac</span>
    <span class="nb">exit</span> <span class="m">0</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Issue the following sequence of commands to make the scripts executable, start the process for the first time, and ensure that the process will start following a reboot cycle:</p>

<pre><code>chmod +x /usr/bin/php-fastcgi
chmod +x /etc/init.d/php-fastcgi
service php-fastcgi start
chkconfig --add php-fastcgi
chkconfig php-fastcgi on
</code></pre>

<p>Edit the <code>/etc/sudoers</code> file to comment the <code>Defaults    requiretty</code> line and ensure that the init script will start on boot. Create a comment by prepending a hash (e.g. <code>#</code>) to the beginning of the line, so that it resembles the following:</p>

<dl class="file-excerpt">
<dt>


		/etc/sudoers 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"># Defaults requiretty</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Consider the following nginx virtual host configuration. Modify your configuration to resemble the one below, and ensure that the <code>location ~ \.php$ { }</code> resembles the one in this example:</p>

<dl class="file">
<dt>


		nginx virtual host configuration 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
    <span class="kn">server_name</span> <span class="s">www.example.com</span> <span class="s">example.com</span><span class="p">;</span>
    <span class="kn">access_log</span> <span class="s">/srv/www/example.com/logs/access.log</span><span class="p">;</span>
    <span class="kn">error_log</span> <span class="s">/srv/www/example.com/logs/error.log</span><span class="p">;</span>
    <span class="kn">root</span> <span class="s">/srv/www/example.com/public_html</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">index</span> <span class="s">index.html</span> <span class="s">index.htm</span> <span class="s">index.php</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
        <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
        <span class="kn">fastcgi_pass</span>  <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">9000</span><span class="p">;</span>
        <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<p><strong>Important security note:</strong> If you&rsquo;re planning to run applications that support file uploads (images, for example), the above configuration may expose you to a security risk by allowing arbitrary code execution. The short explanation for this behavior is that a properly crafted URI which ends in &ldquo;.php&rdquo;, in combination with a malicious image file that actually contains valid PHP, can result in the image being processed as PHP. For more information on the specifics of this behavior, you may wish to review the information provided on <a href="https://nealpoole.com/blog/2011/04/setting-up-php-fastcgi-and-nginx-dont-trust-the-tutorials-check-your-configuration/">Neal Poole&rsquo;s blog</a>.</p>

<p>To mitigate this issue, you may wish to modify your configuration to include a <code>try_files</code> directive. Please note that this fix requires nginx and the php-fcgi workers to reside on the same server.</p>

<dl class="file-excerpt">
<dt>


		nginx virtual host configuration 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
    <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="p">=</span><span class="mi">404</span><span class="p">;</span>
    <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
    <span class="kn">fastcgi_pass</span> <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">9000</span><span class="p">;</span>
    <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
    <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Additionally, it&rsquo;s a good idea to secure any upload directories your applications may use. The following configuration excerpt demonstrates securing an &ldquo;/images&rdquo; directory.</p>

<dl class="file-excerpt">
<dt>


		nginx virtual host configuration 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
    <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
    <span class="kn">if</span> <span class="s">(</span><span class="nv">$uri</span> <span class="s">!~</span> <span class="s">&#34;^/images/&#34;)</span> <span class="p">{</span>
    <span class="kn">fastcgi_pass</span> <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">9000</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
    <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>When you&rsquo;ve completed the modifications to the configuration, make sure that the virtual host is enabled and issue the following command to restart the web server:</p>

<pre><code>/etc/init.d/nginx restart
</code></pre>

<p>Congratulations! You can now deploy PHP scripts with your LEMP stack.</p>

<h2 id="install-the-mysql-database-server">Install the MySQL Database Server</h2>

<p>The MySQL database engine may be the leading open source relational database engine, and is a popular database solution for web-based applications. Issue the following command to install the MySQL server packages:</p>

<pre><code>yum install mysql-server php-mysql
</code></pre>

<p>Issue the following commands to start the MySQL service and ensure that the service starts following the next boot sequence:</p>

<pre><code>/etc/rc.d/init.d/mysqld start
chkconfig mysqld on
</code></pre>

<p>Issue the following command to secure the MySQL instance. Answer all questions as prompted during this process:</p>

<pre><code>mysql_secure_installation
</code></pre>

<p>Issue the following command to get a root prompt for the MySQL server:</p>

<pre><code>mysql -u root -p
</code></pre>

<p>Enter the root password created above and then issue the following sequence of commands to create the <code>example</code> and <code>username</code> database users, grant the <code>username</code> user access to the <code>example</code> database, and exit from the database:</p>

<pre><code>CREATE DATABASE example;
CREATE USER 'username' IDENTIFIED BY 's8723hk2';
GRANT ALL PRIVILEGES ON example.* TO 'username';
exit
</code></pre>

<p>You may now provide the credentials for the <code>example</code> database and the <code>bagman</code> user to your application, which will now be able to use the database for its purposes. To ensure that PHP will be able to access the MySQL connector your just installed, restart the PHP service by issue the following command:</p>

<pre><code>/etc/init.d/php-fastcgi restart
</code></pre>

<p>Congratulations! You now have a fully functional and fully featured LEMP stack for application deployment.</p>

<h2 id="monitor-for-software-updates-and-security-notices">Monitor for Software Updates and Security Notices</h2>

<p>When running software compiled or installed directly from sources provided by upstream developers, you are responsible for monitoring updates, bug fixes, and security issues. After becoming aware of releases and potential issues, update your software to resolve flaws and prevent possible system compromise. Monitoring releases and maintaining up to date versions of all software is crucial for the security and integrity of a system.</p>

<p>Please follow the announcements, lists, and RSS feeds on the pages linked below to ensure you are aware of all updates to the software and can upgrade appropriately or apply patches and recompile as needed:</p>

<ul>
<li><a href="http://nginx.org/en/security_advisories.html">nginx Security Advisories</a></li>
<li><a href="http://nginx.org/">nginx Announcements</a></li>
</ul>

<p>When upstream sources offer new releases, repeat the instructions for installing nginx and recompile your software when needed. These practices are crucial for the ongoing security and functioning of your system.</p>

            
<h2>More Information</h2>
<p>You may wish to consult the following resources for additional information on this topic. While these are provided in the hope that they will be useful, please note that we cannot vouch for the accuracy or timeliness of externally hosted materials.</p>
<ul>

<li><a href="/docs/websites/nginx/basic-nginx-configuration">Basic nginx Configuration</a></li>

<li><a href="/docs/uptime/loadbalancing/how-to-use-nginx-as-a-front-end-proxy-server-and-software-load-balancer">Clustered Web Servers and Software Load Balancing with nginx</a></li>

<li><a href="/docs/web-servers/nginx/perl-fastcgi/centos-5">Deploy CGI and Perl Scripts with Perl-FastCGI and nginx</a></li>

<li><a href="/docs/databases/postgresql/centos-5">Use PostgeSQL as an Alternative to MySQL for data storage</a></li>

<li><a href="/docs/web-servers/nginx/python-uwsgi/centos-5">Deploy Python Applications with uWSGI and nginx</a></li>

</ul>


            

<h2>See Also</h2>
<ul>
    
    
    <li><a href="/docs/web-servers/lemp/lemp-stack-on-centos-7-with-fastcgi/">Install a LEMP Stack on CentOS 7 with FastCGI</a></li>
    
    
    
    <li><a href="/docs/web-servers/lemp/lemp-stack-on-debian-8/">Install a LEMP (Linux, Nginx, MariaDB, PHP) Stack on Debian 8</a></li>
    
    
    
    <li><a href="/docs/web-servers/lemp/lemp-server-on-debian-7-wheezy/">LEMP Server on Debian 7 (Wheezy)</a></li>
    
    
    
    <li><a href="/docs/web-servers/lemp/lemp-server-on-ubuntu-12-04-precise-pangolin/">LEMP Server on Ubuntu 12.04 (Precise Pangolin) - Deprecated</a></li>
    
    
    
    <li><a href="/docs/web-servers/lemp/lemp-server-on-ubuntu-11-10-oneiric/">LEMP Server on Ubuntu 11.10 (Oneiric) - Deprecated</a></li>
    
    
</ul>


            
            
<p class="doc-license">This guide is published under a <a href="https://creativecommons.org/licenses/by-nd/4.0">CC BY-ND 4.0</a> license.</p>

          </div>
          <div id="doc-sidebar-container" class="col-sm-3 col-sm-pull-9 hidden-xs">
            <div id="doc-sidebar">
              <div markdown="0" class="doc-sidebar-inner" >
  <div class="input-group">
	<label class="sr-only" for="q">Search guides and tutorials</label>
	<input id="ss_keyword" name="q" type="text" class="form-control" placeholder="Search guides..."/>
	<span class="input-group-btn">
		<button type="submit" class="btn btn-blue" id="ds-search-btn"><span class="glyphicon glyphicon-search"></span></button>
	</span>
</div>
</div>

                
              <div class="doc-sidebar-inner" id="doc-sidebar-toc">
                <h3 id="doc-sidebar-title">In This Guide:</h3>
                <div class="sidebar sidebar-library nav navbar" id="markdown-toc">
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#set-the-hostname">Set the Hostname</a></li>
<li><a href="#prepare-system-for-deployment">Prepare System For Deployment</a></li>
<li><a href="#install-the-nginx-web-server">Install the nginx Web Server</a>
<ul>
<li><a href="#deploy-from-epel-packages">Deploy from EPEL Packages</a></li>
<li><a href="#compile-nginx-from-source">Compile nginx from Source</a></li>
</ul></li>
<li><a href="#configure-nginx-virtual-hosting">Configure nginx Virtual Hosting</a></li>
<li><a href="#deploy-php-with-fastcgi">Deploy PHP with FastCGI</a></li>
<li><a href="#install-the-mysql-database-server">Install the MySQL Database Server</a></li>
<li><a href="#monitor-for-software-updates-and-security-notices">Monitor for Software Updates and Security Notices</a></li>
</ul></li>
</ul>
</nav>
                </div>
              </div>
              
              <div class="library-rss">
  <a href="https://linode.com/docs/index.xml"><i class="fa fa-rss-square"></i> RSS feed</a>
</div>

              <div markdown="0" class="library-signup">
  <form action="//linode.us7.list-manage.com/subscribe/post?u=f9b54ed743e1629877750e3f4&amp;id=68bafea72a&SIGNUP=library-website"
    method="post" class="email-signup" target="_blank" novalidate="">
    <i class="fa fa-envelope"></i>
    <h6>Monthly Guides Update</h6>
    <input name="EMAIL" type="email" class="form-control input-sm"
    placeholder="Email address" required="" />
    <div style="position: absolute; left: -5000px;" aria-hidden="true">
      <input type="text" name="b_f9b54ed743e1629877750e3f4_68bafea72a"
      tabindex="-1" value="">
    </div>
    <div style="display:none">
      <input type="checkbox" value="4" name="group[13][4]"
      id="mce-group[13]-13-0" checked="">
    </div>
    <button type="submit" class="btn btn-blue btn-sm btn-border email-signup" value="Subscribe"
    name="subscribe" id="mc-embedded-subscribe">Sign Up</button>
  </form>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal" aria-hidden="true">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="img-modal-title" class="modal-title">Image Detail</h4>
      </div>
      <div class="modal-body">
        <img id="img-modal-image" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-blue" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

        <footer>
            <section class="neutral some-space">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 text-center">
				<h3>Get paid to write for Linode.</h3>
				<p class="lead">We're always expanding our docs. If you like to help people, can write, and want to earn some cash, learn how you can <a href="/docs/contribute">earn up to $300 for every guide you write</a> and we publish.</p>
			</div>
		</div>
	</div>
</section>
            <section id="pre-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-7">
        <span>Get started in the Linode Cloud today.</span>
      </div>
      <div class="col-sm-5 pad-xs">
        <a id="btn-signup-bottom" class="btn btn-lg btn-full btn-green" href="https://manager.linode.com/session/signup">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">

    <div class="row">
      <div class="footer-col">
        <h5><a href="https://www.linode.com/linodes">Overview</a></h5>
        <ul>
          <li><a href="https://www.linode.com/pricing">Plans &amp; Pricing</a></li>
          <li><a href="https://www.linode.com/linodes">Features</a></li>
          <li><a href="https://www.linode.com/addons">Add-Ons</a></li>
          <li><a href="https://www.linode.com/managed">Managed</a></li>
          <li><a href="https://www.linode.com/professional-services">Professional Services</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://linode.com/docs/">Resources</a></h5>
        <ul>
          <li><a href="https://linode.com/docs/">Guides &amp; Tutorials</a></li>
          <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
          <li><a href="https://forum.linode.com/">Forum</a></li>
          <li><a href="https://www.linode.com/chat">Chat</a></li>
          <li><a href="http://status.linode.com/">System Status</a></li>
        </ul>
      </div>


      <div class="footer-col">
        <h5><a href="https://www.linode.com/about">Company</a></h5>
        <ul>
          <li><a href="https://www.linode.com/about">About Us</a></li>
          <li><a href="https://blog.linode.com">Blog</a></li>
          <li><a href="https://www.linode.com/press">Press</a></li>
          <li><a href="https://www.linode.com/referrals">Referral System</a></li>
          <li><a href="https://www.linode.com/careers">Careers</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://www.linode.com/contact">Contact Us</a></h5>
        <ul>
          <li><a href="tel:+18554546633">855-4-LINODE</a></li>
          <li><a href="tel:+18554546633">(855-454-6633)</a></li>
          <li><a href="tel:+16093807100">Intl.: +1 609-380-7100</a></li>
          <li><a href="mailto:support@linode.com">Email us</a></li>
          <li>
            <br />
            <a target="_blank" href="https://facebook.com/linode"><i class="fa fa-facebook-square"></i></a>
            <a target="_blank" href="https://twitter.com/linode"><i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://plus.google.com/+linode/"><i class="fa fa-google-plus-square"></i></a>
            <a target="_blank" href="https://linkedin.com/company/linode"><i class="fa fa-linkedin-square"></i></a>
            <a target="_blank" href="https://github.com/linode/"><i class="fa fa-github-square"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="dark-moar">
  <div class="container">
    <div id="footer-copyright" class="row">
      <div class="col text-center">
        &copy; 2017 Linode, LLC
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/tos">Terms of Service</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/privacy">Privacy Policy</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/security">Security</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/compliance">Standards &amp; Compliance</a>
      </div>
    </div>
  </div>
</section>

        </footer>
        
             <script src="/docs/build/js/libs.js" type="text/javascript"></script>
<script src="/docs/build/js/main.js" type="text/javascript"></script>

        
        <script type="text/javascript">
$( "img[src^='\/docs\/assets']" ).each(function () {
  $( this ).parent().bind('click', false);
  $( this ).on('click', function(e) {
    var image_title = $( this ).attr('alt');
    var image_href = $( this ).parent().attr('href') || $( this ).attr('src');
    $( '#img-modal-image' ).attr('src', image_href);
    $( '#img-modal-title' ).text(image_title);
    $( '#img-modal' ).modal({ show: true });
  });
});
</script>



        
<script type="text/javascript">
 SidebarScroll.init()
</script>

    </body>
</html>