<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Nginx and PHP-FastCGI on Ubuntu 10.04 LTS (Lucid)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="Serve dynamic websites and applications with the lightweight nginx web server and PHP-FastCGI on Ubuntu 10.04 LTS (Lucid).">
        <meta name="keywords" content="nginx, nginx ubuntu 10.04, nginx fastcgi, nginx php">
        
        <meta property="og:title" content="Nginx and PHP-FastCGI on Ubuntu 10.04 LTS (Lucid)">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://linode.com/docs/web-servers/nginx/nginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid/">
        <meta property="og:description" content="Serve dynamic websites and applications with the lightweight nginx web server and PHP-FastCGI on Ubuntu 10.04 LTS (Lucid).">
        <meta property="og:site_name" content="Linode Guides &amp; Tutorials">
        
        
        <meta name="twitter:card" content="summary">
        
        <meta name="twitter:site" content="@linode">
        <link rel="alternate" type="application/rss" href="https://linode.com/docs/index.xml">

        
             <link href="/docs/build/stylesheets/home.css" rel='stylesheet' type='text/css'>

        
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
        <link rel="canonical" href="https://linode.com/docs/web-servers/nginx/nginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid/">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body class="no-subnav">
         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchLabel" id="ds-search-modal">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div id="ds-search-input">
				<div class="input-group col-md-12">
					<input id="ds-search" type="text" class="form-control input-lg" placeholder="Search" />
					<span class="input-group-btn">
						<button class="btn btn-info btn-lg" id="ds-search-btn-modal" type="button">
						<i class="glyphicon glyphicon-search"></i>
						</button>
					</span>
				</div>
				<ul class="list-group" id="ds-search-list">
				</ul>
			</div>
		</div>
	</div>
</div> 
         
        <header>
            <nav id="main-nav" class="navbar navbar-default" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://www.linode.com"><img id="navbar-logo" src="/docs/media/images/header/linode-logo.svg" style="height:57px"></a>
    </div>

    <div class="collapse navbar-collapse navbar-top-collapse">
      <ul class="nav navbar-nav navbar-right">

                <li><a href="https://www.linode.com/"><span class='nav-home'></span></a></li>
                <li><a href="https://www.linode.com/linodes">Features</a></li>
                <li><a href="https://www.linode.com/pricing">Pricing</a></li>
                <li><a href="https://www.linode.com/addons">Add-ons</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-main-nav dropdown-mega">
            <li class="dropdown-third">
              <ul >
                <li><a href="https://linode.com/docs/getting-started">Getting Started</a></li>
                <li><a href="https://linode.com/docs/migrate-from-shared">Migrating to Linode</a></li>
                <li><a href="https://linode.com/docs/hosting-website">Hosting a Website</a></li>
                <li class="divider"></li>
                <li class="big"><a href="https://linode.com/docs"><i class="fa fa-book"></i> Guides &amp; Tutorials</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third middle">
              <ul >
                <li><a href="https://www.linode.com/api">API</a></li>
                <li><a href="https://www.linode.com/stackscripts">StackScripts</a></li>
                <li><a href="https://www.linode.com/mobile">Mobile</a></li>
                <li><a href="https://www.linode.com/cli" target="_blank">CLI</a></li>

                <li class="divider"></li>

                <li><a href="https://www.linode.com/chat"><i class="fa fa-bullhorn gray"></i> Chat</a></li>
                <li><a href="https://forum.linode.com"><i class="fa fa-comments"></i> Community Forum</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third">
              <ul >
                <li><a href="https://blog.linode.com">Blog</a></li>
                <li><a href="http://status.linode.com">System Status</a></li>
                <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
                <li><a href="https://www.linode.com/about">About Us</a></li>
                <li class="divider"></li>
                <li><a href="https://www.linode.com/contact"><i class="fa fa-user"></i> Contact Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li role="presentation" class="divider-vertical"><span>|</span></li>
          <li class=""><a href="https://manager.linode.com/">Log in <span class="login-caret"></span></a></li>
          <li class="visible-xs"><a href="https://manager.linode.com/session/signup">Sign up</a></li>
          <li class="hidden-xs"><div><a id="btn-signup-top" class="btn btn-sm btn-green navbar-btn hidden-xs" href="https://manager.linode.com/session/signup">Sign up</a></div></li>
      </ul>
    </div>

  </div>
</nav>

            <nav class="navbar subnav jumbotron" role="navigation">
  <div class="container">
    <div class="subnav-divider">

    </div>
  </div>
</nav>
        </header>
        
<section class="primary first-section">
  <div class="container">
    <div class="row breadcrumb-row">
  <div class="col-sm-12">
    <ol class="breadcrumb library-breadcrumb">
      







<li>
  
  <a href="https://linode.com/docs/">Guides &amp; Tutorials</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/web-servers/">Web Server Guides</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/web-servers/nginx/">Nginx</a>
  
</li>


<li>
  
  Nginx and PHP-FastCGI on Ubuntu 10.04 LTS (Lucid)
  
</li>

    </ol>
  </div>
</div>

    <div class="row" itemscope itemtype="http://schema.org/TechArticle">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-9 col-sm-offset-3">
          </div>
        </div>
        <div class="row">
          <div id="article-body" class="col-sm-9 col-sm-push-3 doc">
            <h1 class="doc-title" itemprop="headline">Nginx and PHP-FastCGI on Ubuntu 10.04 LTS (Lucid)</h1>
<p markdown="0" class="doc-time doc-modified-time">
  <small class="updated">Updated <time itemprop="dateModified" datetime="2013-10-07T00:00:00Z">Monday, October 7, 2013</time> by Linode</small>
  
</p>

           <div class="row">
            <div class="col-sm-9"><div markdown="0" class="signup-top">
    <span>
        Use promo code <strong>DOCS10</strong> for $10 credit on a new account.
    </span>
    <form action="https://manager.linode.com/session/signup" style="display: inline">
        <button type="submit" target="_blank" class="btn btn-blue btn-sm btn-border">Try this Guide</button>
    </form>
</div>
</div>
            <div class="col-sm-3"><div class="social-share">
    <div class="btn-group share-group">
        <a data-toggle="dropdown" class="btn btn-info">
            <i class="fa fa-share-alt fa-inverse"></i>
        </a>
        <button href="#" data-toggle="dropdown" class="btn btn-info dropdown-toggle share">
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a data-original-title="Twitter" rel="tooltip"  href="https://twitter.com/share?url=https%3a%2f%2flinode.com%2fdocs%2fweb-servers%2fnginx%2fnginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid%2f&via=linode&text=Nginx%20and%20PHP-FastCGI%20on%20%e2%80%a6" class="btn btn-twitter" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Facebook" rel="tooltip"  href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flinode.com%2fdocs%2fweb-servers%2fnginx%2fnginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid%2f" class="btn btn-facebook" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-facebook"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Hacker News" rel="tooltip"  href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flinode.com%2fdocs%2fweb-servers%2fnginx%2fnginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid%2f&t=Nginx%20and%20PHP-FastCGI%20on%20Ubuntu%2010.04%20LTS%20%28Lucid%29" class="btn btn-hacker-news" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-hacker-news "></i>
                </a>
            </li>
        </ul>
    </div>
</div></div>
            </div>
            <div class="library-github" markdown="0">
	<i class="fa fa-github"></i>
	<strong>Contribute on GitHub</strong>
	<p>
		
		<a href="https://github.com/linode/docs">View Project</a> |
		<a href="https://github.com/linode/docs/blob/master/docs/web-servers/nginx/nginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid.md">View File</a> |
		<a href="https://github.com/linode/docs/edit/master/docs/web-servers/nginx/nginx-and-phpfastcgi-on-ubuntu-10-04-lts-lucid.md">Edit File</a>
	</p>
</div>
            
            
<blockquote class="deprecated">
	<strong class="callout-title">Deprecated</strong>
	<div>This guide has been deprecated and is no longer being maintained.</div>
	<div>
		
	</div>
</blockquote>


            

<p>The nginx web server is a fast, lightweight server designed to efficiently handle the needs of both low and high traffic websites. Although commonly used to serve static content, it&rsquo;s quite capable of handling dynamic pages as well. This guide will help you get nginx up and running with PHP via FastCGI on your Ubuntu 10.04 LTS (Lucid) Linode.</p>

<p>It is assumed that you&rsquo;ve already followed the steps outlined in our <a href="/docs/getting-started/">getting started guide</a>. These steps should be performed via a root login to your Linode over SSH.</p>

<h1 id="set-the-hostname">Set the Hostname</h1>

<p>Before you begin installing and configuring the components described in this guide, please make sure you&rsquo;ve followed our instructions for <a href="/docs/getting-started#setting-the-hostname">setting your hostname</a>. Issue the following commands to make sure it is set properly:</p>

<pre><code>hostname
hostname -f
</code></pre>

<p>The first command should show your short hostname, and the second should show your fully qualified domain name (FQDN).</p>

<h1 id="install-required-packages">Install Required Packages</h1>

<p>Issue the following commands to update your system and install the nginx web server, PHP, and compiler tools:</p>

<pre><code>apt-get update
apt-get upgrade
apt-get install nginx php5-cli php5-cgi spawn-fcgi psmisc
</code></pre>

<h1 id="configure-virtual-hosting">Configure Virtual Hosting</h1>

<h3 id="create-directories">Create Directories</h3>

<p>In this guide, the domain &ldquo;example.com&rdquo; is used as an example site. You should substitute your own domain name in the configuration steps that follow. First, create directories to hold content and log files:</p>

<pre><code>mkdir -p /srv/www/www.example.com/public_html
mkdir /srv/www/www.example.com/logs
chown -R www-data:www-data /srv/www/www.example.com
</code></pre>

<h3 id="unix-sockets-configuration-example">UNIX Sockets Configuration Example</h3>

<p>Next, you&rsquo;ll need to define the site&rsquo;s virtual host file. This example uses a UNIX socket to connect to fcgiwrap. Be sure to change all instances of &ldquo;example.com&rdquo; to your domain name.</p>

<dl class="file">
<dt>


		/etc/nginx/sites-available/www.example.com 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
    <span class="kn">server_name</span> <span class="s">www.example.com</span> <span class="s">example.com</span><span class="p">;</span>
    <span class="kn">access_log</span> <span class="s">/srv/www/www.example.com/logs/access.log</span><span class="p">;</span>
    <span class="kn">error_log</span> <span class="s">/srv/www/www.example.com/logs/error.log</span><span class="p">;</span>
    <span class="kn">root</span> <span class="s">/srv/www/www.example.com/public_html</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
        <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
        <span class="kn">fastcgi_pass</span> <span class="s">unix:/var/run/php-fastcgi/php-fastcgi.socket</span><span class="p">;</span>
        <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/www.example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<p>Create a file named <code>/usr/bin/php-fastcgi</code> with the following contents:</p>

<dl class="file">
<dt>


		/usr/bin/php-fastcgi 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">FASTCGI_USER</span><span class="o">=</span>www-data
<span class="nv">FASTCGI_GROUP</span><span class="o">=</span>www-data
<span class="nv">SOCKET</span><span class="o">=</span>/var/run/php-fastcgi/php-fastcgi.socket
<span class="nv">PIDFILE</span><span class="o">=</span>/var/run/php-fastcgi/php-fastcgi.pid
<span class="nv">CHILDREN</span><span class="o">=</span><span class="m">6</span>
<span class="nv">PHP5</span><span class="o">=</span>/usr/bin/php5-cgi

/usr/bin/spawn-fcgi -s <span class="nv">$SOCKET</span> -P <span class="nv">$PIDFILE</span> -C <span class="nv">$CHILDREN</span> -u <span class="nv">$FASTCGI_USER</span> -g <span class="nv">$FASTCGI_GROUP</span> -f <span class="nv">$PHP5</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<p>Make it executable by issuing the following command:</p>

<pre><code>chmod +x /usr/bin/php-fastcgi
</code></pre>

<h3 id="tcp-sockets-configuration-example">TCP Sockets Configuration Example</h3>

<p>Alternately, you may wish to use TCP sockets instead. If so, modify your nginx virtual host configuration file to resemble the following example. Again, make sure to replace all instances of &ldquo;example.com&rdquo; with your domain name.</p>

<dl class="file">
<dt>


		/etc/nginx/sites-available/www.example.com 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">server</span> <span class="p">{</span>
    <span class="kn">server_name</span> <span class="s">www.example.com</span> <span class="s">example.com</span><span class="p">;</span>
    <span class="kn">access_log</span> <span class="s">/srv/www/www.example.com/logs/access.log</span><span class="p">;</span>
    <span class="kn">error_log</span> <span class="s">/srv/www/www.example.com/logs/error.log</span><span class="p">;</span>
    <span class="kn">root</span> <span class="s">/srv/www/www.example.com/public_html</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
        <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
        <span class="kn">fastcgi_pass</span> <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">9000</span><span class="p">;</span>
        <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/www.example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<p>Create a file named <code>/usr/bin/php-fastcgi</code> with the following contents:</p>

<dl class="file">
<dt>


		/usr/bin/php-fastcgi 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">FASTCGI_USER</span><span class="o">=</span>www-data
<span class="nv">FASTCGI_GROUP</span><span class="o">=</span>www-data
<span class="nv">ADDRESS</span><span class="o">=</span><span class="m">127</span>.0.0.1
<span class="nv">PORT</span><span class="o">=</span><span class="m">9000</span>
<span class="nv">PIDFILE</span><span class="o">=</span>/var/run/php-fastcgi/php-fastcgi.pid
<span class="nv">CHILDREN</span><span class="o">=</span><span class="m">6</span>
<span class="nv">PHP5</span><span class="o">=</span>/usr/bin/php5-cgi

/usr/bin/spawn-fcgi -a <span class="nv">$ADDRESS</span> -p <span class="nv">$PORT</span> -P <span class="nv">$PIDFILE</span> -C <span class="nv">$CHILDREN</span> -u <span class="nv">$FASTCGI_USER</span> -g <span class="nv">$FASTCGI_GROUP</span> -f <span class="nv">$PHP5</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<p>Make it executable by issuing the following command:</p>

<pre><code>chmod +x /usr/bin/php-fastcgi
</code></pre>

<h3 id="important-security-considerations">Important Security Considerations</h3>

<p>If you&rsquo;re planning to run applications that support file uploads (images, for example), the above configurations may expose you to a security risk by allowing arbitrary code execution. The short explanation for this behavior is that a properly crafted URI which ends in &ldquo;.php&rdquo;, in combination with a malicious image file that actually contains valid PHP, can result in the image being processed as PHP.</p>

<p>To mitigate this issue, you may wish to modify your configuration to include a <code>try_files</code> directive. Please note that this fix requires nginx and the php-fcgi workers to reside on the same server.</p>

<dl class="file-excerpt">
<dt>


		/etc/nginx/sites-available/www.example.com 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
    <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="p">=</span><span class="mi">404</span><span class="p">;</span>
    <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
    <span class="kn">fastcgi_pass</span> <span class="s">unix:/var/run/php-fastcgi/php-fastcgi.socket</span><span class="p">;</span>
    <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
    <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/www.example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<p>Additionally, it&rsquo;s a good idea to secure any upload directories your applications may use. The following configuration excerpt demonstrates securing an &ldquo;/images&rdquo; directory.</p>

<dl class="file-excerpt">
<dt>


		/etc/nginx/sites-available/www.example.com 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="lnt">1</span><span class="lnt">2</span><span class="lnt">3</span><span class="lnt">4</span><span class="lnt">5</span><span class="lnt">6</span><span class="lnt">7</span><span class="lnt">8</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
    <span class="kn">include</span> <span class="s">/etc/nginx/fastcgi_params</span><span class="p">;</span>
    <span class="kn">if</span> <span class="s">(</span><span class="nv">$uri</span> <span class="s">!~</span> <span class="s">&#34;^/images/&#34;)</span> <span class="p">{</span>
        <span class="kn">fastcgi_pass</span> <span class="s">unix:/var/run/php-fastcgi/php-fastcgi.socket</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kn">fastcgi_index</span> <span class="s">index.php</span><span class="p">;</span>
    <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="s">/srv/www/www.example.com/public_html</span><span class="nv">$fastcgi_script_name</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<h3 id="enable-and-start-services">Enable and Start Services</h3>

<p>Issue the following commands to enable the site:</p>

<pre><code>cd /etc/nginx/sites-enabled/
ln -s /etc/nginx/sites-available/www.example.com
</code></pre>

<p>Create a file named <code>/etc/init.d/php-fastcgi</code> with the following contents:</p>

<dl class="file">
<dt>


		/etc/init.d/php-fastcgi 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span><span class="lnt">29</span><span class="lnt">30</span><span class="lnt">31</span><span class="lnt">32</span><span class="lnt">33</span><span class="lnt">34</span><span class="lnt">35</span><span class="lnt">36</span><span class="lnt">37</span><span class="lnt">38</span><span class="lnt">39</span><span class="lnt">40</span><span class="lnt">41</span><span class="lnt">42</span><span class="lnt">43</span><span class="lnt">44</span><span class="lnt">45</span><span class="lnt">46</span><span class="lnt">47</span><span class="lnt">48</span><span class="lnt">49</span><span class="lnt">50</span><span class="lnt">51</span><span class="lnt">52</span><span class="lnt">53</span><span class="lnt">54</span><span class="lnt">55</span><span class="lnt">56</span><span class="lnt">57</span><span class="lnt">58</span><span class="lnt">59</span><span class="lnt">60</span><span class="lnt">61</span><span class="lnt">62</span><span class="lnt">63</span><span class="lnt">64</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">PHP_SCRIPT</span><span class="o">=</span>/usr/bin/php-fastcgi
<span class="nv">FASTCGI_USER</span><span class="o">=</span>www-data
<span class="nv">FASTCGI_GROUP</span><span class="o">=</span>www-data
<span class="nv">PID_DIR</span><span class="o">=</span>/var/run/php-fastcgi
<span class="nv">PID_FILE</span><span class="o">=</span>/var/run/php-fastcgi/php-fastcgi.pid
<span class="nv">RET_VAL</span><span class="o">=</span><span class="m">0</span>

<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
    start<span class="o">)</span>
      <span class="k">if</span> <span class="o">[[</span> ! -d <span class="nv">$PID_DIR</span> <span class="o">]]</span>
      <span class="k">then</span>
        mkdir <span class="nv">$PID_DIR</span>
        chown <span class="nv">$FASTCGI_USER</span>:<span class="nv">$FASTCGI_GROUP</span> <span class="nv">$PID_DIR</span>
        chmod <span class="m">0770</span> <span class="nv">$PID_DIR</span>
      <span class="k">fi</span>
      <span class="k">if</span> <span class="o">[[</span> -r <span class="nv">$PID_FILE</span> <span class="o">]]</span>
      <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&#34;php-fastcgi already running with PID `cat </span><span class="nv">$PID_FILE</span><span class="s2">`&#34;</span>
        <span class="nv">RET_VAL</span><span class="o">=</span><span class="m">1</span>
      <span class="k">else</span>
        <span class="nv">$PHP_SCRIPT</span>
        <span class="nv">RET_VAL</span><span class="o">=</span><span class="nv">$?</span>
      <span class="k">fi</span>
  <span class="p">;;</span>
    stop<span class="o">)</span>
      <span class="k">if</span> <span class="o">[[</span> -r <span class="nv">$PID_FILE</span> <span class="o">]]</span>
      <span class="k">then</span>
        <span class="nb">kill</span> <span class="sb">`</span>cat <span class="nv">$PID_FILE</span><span class="sb">`</span>
        rm <span class="nv">$PID_FILE</span>
        <span class="nv">RET_VAL</span><span class="o">=</span><span class="nv">$?</span>
      <span class="k">else</span>
        <span class="nb">echo</span> <span class="s2">&#34;Could not find PID file </span><span class="nv">$PID_FILE</span><span class="s2">&#34;</span>
        <span class="nv">RET_VAL</span><span class="o">=</span><span class="m">1</span>
      <span class="k">fi</span>
  <span class="p">;;</span>
    restart<span class="o">)</span>
      <span class="k">if</span> <span class="o">[[</span> -r <span class="nv">$PID_FILE</span> <span class="o">]]</span>
      <span class="k">then</span>
        <span class="nb">kill</span> <span class="sb">`</span>cat <span class="nv">$PID_FILE</span><span class="sb">`</span>
        rm <span class="nv">$PID_FILE</span>
        <span class="nv">RET_VAL</span><span class="o">=</span><span class="nv">$?</span>
      <span class="k">else</span>
        <span class="nb">echo</span> <span class="s2">&#34;Could not find PID file </span><span class="nv">$PID_FILE</span><span class="s2">&#34;</span>
      <span class="k">fi</span>
      <span class="nv">$PHP_SCRIPT</span>
      <span class="nv">RET_VAL</span><span class="o">=</span><span class="nv">$?</span>
  <span class="p">;;</span>
    status<span class="o">)</span>
      <span class="k">if</span> <span class="o">[[</span> -r <span class="nv">$PID_FILE</span> <span class="o">]]</span>
      <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&#34;php-fastcgi running with PID `cat </span><span class="nv">$PID_FILE</span><span class="s2">`&#34;</span>
        <span class="nv">RET_VAL</span><span class="o">=</span><span class="nv">$?</span>
      <span class="k">else</span>
        <span class="nb">echo</span> <span class="s2">&#34;Could not find PID file </span><span class="nv">$PID_FILE</span><span class="s2">, php-fastcgi does not appear to be running&#34;</span>
      <span class="k">fi</span>
  <span class="p">;;</span>
    *<span class="o">)</span>
      <span class="nb">echo</span> <span class="s2">&#34;Usage: php-fastcgi {start|stop|restart|status}&#34;</span>
      <span class="nv">RET_VAL</span><span class="o">=</span><span class="m">1</span>
  <span class="p">;;</span>
<span class="k">esac</span>
<span class="nb">exit</span> <span class="nv">$RET_VAL</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<p>Start php-fastcgi and nginx by issuing the following commands:</p>

<pre><code>chmod +x /etc/init.d/php-fastcgi
update-rc.d php-fastcgi defaults
/etc/init.d/php-fastcgi start
/etc/init.d/nginx start
</code></pre>

<h1 id="test-php-with-fastcgi">Test PHP with FastCGI</h1>

<p>Create a file called &ldquo;test.php&rdquo; in your site&rsquo;s &ldquo;public_html&rdquo; directory with the following contents:</p>

<p><dl class="file">
<dt>


		/srv/www/example.com/www/public\\_html/test.php 


</dt>
<dd>







<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span> <span class="nx">phpinfo</span><span class="p">();</span> <span class="cp">?&gt;</span></code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></p>

<p>When you visit <code>http://www.example.com/test.php</code> in your browser, the standard &ldquo;PHP info&rdquo; output is shown. Congratulations, you&rsquo;ve configured the nginx web server to use PHP-FastCGI for dynamic content!</p>

<h1 id="more-information">More Information</h1>

<p>You may wish to consult the following resources for additional information on this topic. While these are provided in the hope that they will be useful, please note that we cannot vouch for the accuracy or timeliness of externally hosted materials.</p>

<ul>
<li><a href="http://nginx.org/">The nginx Homepage</a></li>
<li><a href="http://www.fastcgi.com/">FastCGI Project Homepage</a></li>
<li><a href="http://www.php.net/docs.php">PHP Documentation</a></li>
<li><a href="/docs/websites/nginx/basic-nginx-configuration">Basic Ngnix Configuration</a></li>
</ul>

            

            

<h2>See Also</h2>
<ul>
    
    
    <li><a href="/docs/web-servers/nginx/nginx-phpfastcgi-ubuntu-14-04/">Nginx and PHP-FastCGI on Ubuntu 14.04</a></li>
    
    
    
    <li><a href="/docs/web-servers/nginx/install-nginx-and-php-via-fastcgi-on-ubuntu-12-04-precise-pangolin/">Install Nginx and PHP via FastCGI on Ubuntu 12.04 (Precise Pangolin) - Deprecated</a></li>
    
    
    
    <li><a href="/docs/web-servers/nginx/nginx-and-phpfastcgi-on-debian-6-squeeze/">Nginx and PHP-FastCGI on Debian 6 (Squeeze) - Deprecated</a></li>
    
    
    
    <li><a href="/docs/web-servers/nginx/nginx-and-phpfastcgi-on-ubuntu-11-04-natty/">Nginx and PHP-FastCGI on Ubuntu 11.04 (Natty) - Deprecated</a></li>
    
    
    
    <li><a href="/docs/web-servers/nginx/nginx-and-phpfastcgi-on-fedora-14/">Nginx and PHP-FastCGI on Fedora 14 - Deprecated</a></li>
    
    
</ul>


            
            
<p class="doc-license">This guide is published under a <a href="https://creativecommons.org/licenses/by-nd/4.0">CC BY-ND 4.0</a> license.</p>

          </div>
          <div id="doc-sidebar-container" class="col-sm-3 col-sm-pull-9 hidden-xs">
            <div id="doc-sidebar">
              <div markdown="0" class="doc-sidebar-inner" >
  <div class="input-group">
	<label class="sr-only" for="q">Search guides and tutorials</label>
	<input id="ss_keyword" name="q" type="text" class="form-control" placeholder="Search guides..."/>
	<span class="input-group-btn">
		<button type="submit" class="btn btn-blue" id="ds-search-btn"><span class="glyphicon glyphicon-search"></span></button>
	</span>
</div>
</div>

                
              <div class="doc-sidebar-inner" id="doc-sidebar-toc">
                <h3 id="doc-sidebar-title">In This Guide:</h3>
                <div class="sidebar sidebar-library nav navbar" id="markdown-toc">
                    <nav id="TableOfContents">
<ul>
<li><a href="#set-the-hostname">Set the Hostname</a></li>
<li><a href="#install-required-packages">Install Required Packages</a></li>
<li><a href="#configure-virtual-hosting">Configure Virtual Hosting</a>
<ul>
<li>
<ul>
<li><a href="#create-directories">Create Directories</a></li>
<li><a href="#unix-sockets-configuration-example">UNIX Sockets Configuration Example</a></li>
<li><a href="#tcp-sockets-configuration-example">TCP Sockets Configuration Example</a></li>
<li><a href="#important-security-considerations">Important Security Considerations</a></li>
<li><a href="#enable-and-start-services">Enable and Start Services</a></li>
</ul></li>
</ul></li>
<li><a href="#test-php-with-fastcgi">Test PHP with FastCGI</a></li>
<li><a href="#more-information">More Information</a></li>
</ul>
</nav>
                </div>
              </div>
              
              <div class="library-rss">
  <a href="https://linode.com/docs/index.xml"><i class="fa fa-rss-square"></i> RSS feed</a>
</div>

              <div markdown="0" class="library-signup">
  <form action="//linode.us7.list-manage.com/subscribe/post?u=f9b54ed743e1629877750e3f4&amp;id=68bafea72a&SIGNUP=library-website"
    method="post" class="email-signup" target="_blank" novalidate="">
    <i class="fa fa-envelope"></i>
    <h6>Monthly Guides Update</h6>
    <input name="EMAIL" type="email" class="form-control input-sm"
    placeholder="Email address" required="" />
    <div style="position: absolute; left: -5000px;" aria-hidden="true">
      <input type="text" name="b_f9b54ed743e1629877750e3f4_68bafea72a"
      tabindex="-1" value="">
    </div>
    <div style="display:none">
      <input type="checkbox" value="4" name="group[13][4]"
      id="mce-group[13]-13-0" checked="">
    </div>
    <button type="submit" class="btn btn-blue btn-sm btn-border email-signup" value="Subscribe"
    name="subscribe" id="mc-embedded-subscribe">Sign Up</button>
  </form>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal" aria-hidden="true">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="img-modal-title" class="modal-title">Image Detail</h4>
      </div>
      <div class="modal-body">
        <img id="img-modal-image" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-blue" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

        <footer>
            <section class="neutral some-space">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 text-center">
				<h3>Get paid to write for Linode.</h3>
				<p class="lead">We're always expanding our docs. If you like to help people, can write, and want to earn some cash, learn how you can <a href="/docs/contribute">earn up to $300 for every guide you write</a> and we publish.</p>
			</div>
		</div>
	</div>
</section>
            <section id="pre-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-7">
        <span>Get started in the Linode Cloud today.</span>
      </div>
      <div class="col-sm-5 pad-xs">
        <a id="btn-signup-bottom" class="btn btn-lg btn-full btn-green" href="https://manager.linode.com/session/signup">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">

    <div class="row">
      <div class="footer-col">
        <h5><a href="https://www.linode.com/linodes">Overview</a></h5>
        <ul>
          <li><a href="https://www.linode.com/pricing">Plans &amp; Pricing</a></li>
          <li><a href="https://www.linode.com/linodes">Features</a></li>
          <li><a href="https://www.linode.com/addons">Add-Ons</a></li>
          <li><a href="https://www.linode.com/managed">Managed</a></li>
          <li><a href="https://www.linode.com/professional-services">Professional Services</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://linode.com/docs/">Resources</a></h5>
        <ul>
          <li><a href="https://linode.com/docs/">Guides &amp; Tutorials</a></li>
          <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
          <li><a href="https://forum.linode.com/">Forum</a></li>
          <li><a href="https://www.linode.com/chat">Chat</a></li>
          <li><a href="http://status.linode.com/">System Status</a></li>
        </ul>
      </div>


      <div class="footer-col">
        <h5><a href="https://www.linode.com/about">Company</a></h5>
        <ul>
          <li><a href="https://www.linode.com/about">About Us</a></li>
          <li><a href="https://blog.linode.com">Blog</a></li>
          <li><a href="https://www.linode.com/press">Press</a></li>
          <li><a href="https://www.linode.com/referrals">Referral System</a></li>
          <li><a href="https://www.linode.com/careers">Careers</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://www.linode.com/contact">Contact Us</a></h5>
        <ul>
          <li><a href="tel:+18554546633">855-4-LINODE</a></li>
          <li><a href="tel:+18554546633">(855-454-6633)</a></li>
          <li><a href="tel:+16093807100">Intl.: +1 609-380-7100</a></li>
          <li><a href="mailto:support@linode.com">Email us</a></li>
          <li>
            <br />
            <a target="_blank" href="https://facebook.com/linode"><i class="fa fa-facebook-square"></i></a>
            <a target="_blank" href="https://twitter.com/linode"><i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://plus.google.com/+linode/"><i class="fa fa-google-plus-square"></i></a>
            <a target="_blank" href="https://linkedin.com/company/linode"><i class="fa fa-linkedin-square"></i></a>
            <a target="_blank" href="https://github.com/linode/"><i class="fa fa-github-square"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="dark-moar">
  <div class="container">
    <div id="footer-copyright" class="row">
      <div class="col text-center">
        &copy; 2017 Linode, LLC
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/tos">Terms of Service</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/privacy">Privacy Policy</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/security">Security</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/compliance">Standards &amp; Compliance</a>
      </div>
    </div>
  </div>
</section>

        </footer>
        
             <script src="/docs/build/js/libs.js" type="text/javascript"></script>
<script src="/docs/build/js/main.js" type="text/javascript"></script>

        
        <script type="text/javascript">
$( "img[src^='\/docs\/assets']" ).each(function () {
  $( this ).parent().bind('click', false);
  $( this ).on('click', function(e) {
    var image_title = $( this ).attr('alt');
    var image_href = $( this ).parent().attr('href') || $( this ).attr('src');
    $( '#img-modal-image' ).attr('src', image_href);
    $( '#img-modal-title' ).text(image_title);
    $( '#img-modal' ).modal({ show: true });
  });
});
</script>



        
<script type="text/javascript">
 SidebarScroll.init()
</script>

    </body>
</html>