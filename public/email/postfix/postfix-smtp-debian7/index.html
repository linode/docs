<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Configure Postfix to Send Mail Using an External SMTP Server</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="Learn how to use Postfix to send mail through an external SMTP server.">
        <meta name="keywords" content="Postfix,  Debian 7,  SMTP,  Email,  Mail">
        
        <meta property="og:title" content="Configure Postfix to Send Mail Using an External SMTP Server">
        <meta property="og:type" content="article">
        <meta property="og:url" content="https://linode.com/docs/email/postfix/postfix-smtp-debian7/">
        <meta property="og:description" content="Learn how to use Postfix to send mail through an external SMTP server.">
        <meta property="og:site_name" content="Linode Guides &amp; Tutorials">
        
        
        <meta property="og:image" content="https://linode.com/docs/assets/external_smtp_tg.png">
        
        
        
        <meta name="twitter:card" content="summary">
        
        <meta name="twitter:site" content="@linode">
        <link rel="alternate" type="application/rss" href="https://linode.com/docs/index.xml">

        
             <link href="/docs/build/stylesheets/home.css" rel='stylesheet' type='text/css'>

        
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
        <link rel="canonical" href="https://linode.com/docs/email/postfix/postfix-smtp-debian7/">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body class="no-subnav">
         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="searchLabel" id="ds-search-modal">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div id="ds-search-input">
				<div class="input-group col-md-12">
					<input id="ds-search" type="text" class="form-control input-lg" placeholder="Search" />
					<span class="input-group-btn">
						<button class="btn btn-info btn-lg" id="ds-search-btn-modal" type="button">
						<i class="glyphicon glyphicon-search"></i>
						</button>
					</span>
				</div>
				<ul class="list-group" id="ds-search-list">
				</ul>
			</div>
		</div>
	</div>
</div> 
         
        <header>
            <nav id="main-nav" class="navbar navbar-default" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <button type="button" class="toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://www.linode.com"><img id="navbar-logo" src="/docs/media/images/header/linode-logo.svg" style="height:57px"></a>
    </div>

    <div class="collapse navbar-collapse navbar-top-collapse">
      <ul class="nav navbar-nav navbar-right">

                <li><a href="https://www.linode.com/"><span class='nav-home'></span></a></li>
                <li><a href="https://www.linode.com/linodes">Features</a></li>
                <li><a href="https://www.linode.com/pricing">Pricing</a></li>
                <li><a href="https://www.linode.com/addons">Add-ons</a></li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-main-nav dropdown-mega">
            <li class="dropdown-third">
              <ul >
                <li><a href="https://linode.com/docs/getting-started">Getting Started</a></li>
                <li><a href="https://linode.com/docs/migrate-from-shared">Migrating to Linode</a></li>
                <li><a href="https://linode.com/docs/hosting-website">Hosting a Website</a></li>
                <li class="divider"></li>
                <li class="big"><a href="https://linode.com/docs"><i class="fa fa-book"></i> Guides &amp; Tutorials</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third middle">
              <ul >
                <li><a href="https://www.linode.com/api">API</a></li>
                <li><a href="https://www.linode.com/stackscripts">StackScripts</a></li>
                <li><a href="https://www.linode.com/mobile">Mobile</a></li>
                <li><a href="https://www.linode.com/cli" target="_blank">CLI</a></li>

                <li class="divider"></li>

                <li><a href="https://www.linode.com/chat"><i class="fa fa-bullhorn gray"></i> Chat</a></li>
                <li><a href="https://forum.linode.com"><i class="fa fa-comments"></i> Community Forum</a></li>
                <li class="divider visible-xs"></li>
              </ul>
            </li>
            <li class="dropdown-third">
              <ul >
                <li><a href="https://blog.linode.com">Blog</a></li>
                <li><a href="http://status.linode.com">System Status</a></li>
                <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
                <li><a href="https://www.linode.com/about">About Us</a></li>
                <li class="divider"></li>
                <li><a href="https://www.linode.com/contact"><i class="fa fa-user"></i> Contact Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li role="presentation" class="divider-vertical"><span>|</span></li>
          <li class=""><a href="https://manager.linode.com/">Log in <span class="login-caret"></span></a></li>
          <li class="visible-xs"><a href="https://manager.linode.com/session/signup">Sign up</a></li>
          <li class="hidden-xs"><div><a id="btn-signup-top" class="btn btn-sm btn-green navbar-btn hidden-xs" href="https://manager.linode.com/session/signup">Sign up</a></div></li>
      </ul>
    </div>

  </div>
</nav>

            <nav class="navbar subnav jumbotron" role="navigation">
  <div class="container">
    <div class="subnav-divider">

    </div>
  </div>
</nav>
        </header>
        
<section class="primary first-section">
  <div class="container">
    <div class="row breadcrumb-row">
  <div class="col-sm-12">
    <ol class="breadcrumb library-breadcrumb">
      







<li>
  
  <a href="https://linode.com/docs/">Guides &amp; Tutorials</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/email/">Email Server Guides</a>
  
</li>


<li>
  
  <a href="https://linode.com/docs/email/postfix/">Postfix</a>
  
</li>


<li>
  
  Configure Postfix to Send Mail Using an External SMTP Server
  
</li>

    </ol>
  </div>
</div>

    <div class="row" itemscope itemtype="http://schema.org/TechArticle">
      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-9 col-sm-offset-3">
          </div>
        </div>
        <div class="row">
          <div id="article-body" class="col-sm-9 col-sm-push-3 doc">
            <h1 class="doc-title" itemprop="headline">Configure Postfix to Send Mail Using an External SMTP Server</h1>
<p markdown="0" class="doc-time doc-modified-time">
  <small class="updated">Updated <time itemprop="dateModified" datetime="2014-05-30T00:00:00Z">Friday, May 30, 2014</time> by Linode</small>
  
  <small class="contributed-by">Contributed by
  
  Santiago Ti
  
  </small>
  
</p>

           <div class="row">
            <div class="col-sm-9"><div markdown="0" class="signup-top">
    <span>
        Use promo code <strong>DOCS10</strong> for $10 credit on a new account.
    </span>
    <form action="https://manager.linode.com/session/signup" style="display: inline">
        <button type="submit" target="_blank" class="btn btn-blue btn-sm btn-border">Try this Guide</button>
    </form>
</div>
</div>
            <div class="col-sm-3"><div class="social-share">
    <div class="btn-group share-group">
        <a data-toggle="dropdown" class="btn btn-info">
            <i class="fa fa-share-alt fa-inverse"></i>
        </a>
        <button href="#" data-toggle="dropdown" class="btn btn-info dropdown-toggle share">
        <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a data-original-title="Twitter" rel="tooltip"  href="https://twitter.com/share?url=https%3a%2f%2flinode.com%2fdocs%2femail%2fpostfix%2fpostfix-smtp-debian7%2f&via=linode&text=Configure%20Postfix%20to%20Send%20Mail%20%e2%80%a6" class="btn btn-twitter" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Facebook" rel="tooltip"  href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flinode.com%2fdocs%2femail%2fpostfix%2fpostfix-smtp-debian7%2f" class="btn btn-facebook" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-facebook"></i>
                </a>
            </li>
            <li>
                <a data-original-title="Hacker News" rel="tooltip"  href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flinode.com%2fdocs%2femail%2fpostfix%2fpostfix-smtp-debian7%2f&t=Configure%20Postfix%20to%20Send%20Mail%20Using%20an%20External%20SMTP%20Server" class="btn btn-hacker-news" data-placement="left" target="_blank" rel="noopener">
                    <i class="fa fa-hacker-news "></i>
                </a>
            </li>
        </ul>
    </div>
</div></div>
            </div>
            <div class="library-github" markdown="0">
	<i class="fa fa-github"></i>
	<strong>Contribute on GitHub</strong>
	<p>
		
		<a href="https://github.com/linode/docs">View Project</a> |
		<a href="https://github.com/linode/docs/blob/master/docs/email/postfix/postfix-smtp-debian7.md">View File</a> |
		<a href="https://github.com/linode/docs/edit/master/docs/email/postfix/postfix-smtp-debian7.md">Edit File</a>
	</p>
</div>
            <hr />

<p><em>This is a Linode Community guide. If you&rsquo;re an expert on something for which we need a guide, you too can <a href="/docs/contribute">get paid to write for us.</a></em></p>

<hr />

            

            

<p>There are many reasons why you would want to configure Postfix to send email using an external SMTP provider such as Mandrill, SendGrid, Amazon SES, or any other SMTP server. One reason is to avoid getting your mail flagged as spam if your current server&rsquo;s IP has been added to a spam list.</p>

<p><img src="/docs/assets/external_smtp_tg.png" alt="Configure Postfix to Send Mail Using an External SMTP Server" title="Configure Postfix to Send Mail Using an External SMTP Server" /></p>

<p>In this tutorial, you will learn how to install and configure a Postfix server to send email through Mandrill, or SendGrid.</p>

<h2 id="updated-guide-for-gmail-and-google-apps">Updated Guide for Gmail and Google Apps</h2>

<p>We&rsquo;ve got an updated version of this guide that works with Gmail&rsquo;s new security features!</p>

<p>If you&rsquo;re using Gmail or Google Apps, see our <a href="/docs/email/postfix/configure-postfix-to-send-mail-using-gmail-and-google-apps-on-debian-or-ubuntu">Configure Postfix to Send Mail Using Gmail and Google Apps on Debian or Ubuntu</a> guide instead.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before starting this tutorial, you should have:</p>

<ul>
<li>Debian 7 installed on your Linode</li>
<li>Your fully qualified domain name (FQDN)</li>

<li><p>All updates installed :</p>

<pre><code>sudo apt-get update
</code></pre></li>

<li><p>A valid username and password for the SMTP mail provider, such as Mandrill, or SendGrid</p></li>

<li><p>Make sure the libsasl2-modules package is installed and up to date:</p>

<pre><code>sudo apt-get install libsasl2-modules
</code></pre></li>
</ul>

<blockquote class="note">
  <strong class="callout-title">Note</strong>
  <div>This guide is written for a non-root user. Commands that require elevated privileges are prefixed with <code>sudo</code>. If you&rsquo;re not familiar with the <code>sudo</code> command, you can check our <a href="/docs/tools-reference/linux-users-and-groups">Users and Groups</a> guide.</div>
</blockquote>


<h2 id="installing-postfix">Installing Postfix</h2>

<p>In this section, you will install Postfix and set the domain and hostname.</p>

<ol>
<li><p>Install Postfix with the following command:</p>

<pre><code>sudo apt-get install postfix
</code></pre></li>

<li><p>During the installation, a prompt will appear asking for your <strong>General type of mail configuration</strong>.</p>

<p><a href="/docs/assets/1736-postfixsmtp1.png"><img src="/docs/assets/1737-postfixsmtp1_sm.png" alt="Postix configuration, General type of mail configuration options" /></a></p>

<p>Select <strong>Internet Site</strong>.</p></li>

<li><p>Enter the fully qualified name of your domain, <strong>fqdn.example.com</strong>.</p>

<p><a href="/docs/assets/1739-postfixsmtp2.png"><img src="/docs/assets/1738-postfixsmtp2_sm.png" alt="Postix configuration, System mail name prompt" /></a></p></li>

<li><p>Once the installation is finished, open the <code>/etc/postfix/main.cf</code> file with your favorite text editor:</p>

<pre><code>sudo nano /etc/postfix/main.cf
</code></pre></li>

<li><p>Make sure that the <strong>myhostname</strong> parameter is configured with your server&rsquo;s FQDN:</p>

<dl class="file-excerpt">
<dt>


		/etc/postfix/main.cf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">myhostname</span> <span class="o">=</span> fqdn.example.com</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>
</li>
</ol>

<h2 id="configuring-smtp-usernames-and-passwords">Configuring SMTP Usernames and Passwords</h2>

<p>Usernames and passwords are generally stored in a file called <code>sasl_passwd</code> in the <code>/etc/postfix/</code> directory. In this section, you&rsquo;ll add your external mail provider credentials to this file and to Postfix.</p>

<p>If you want to use <a href="#settings-for-mandrill">Mandrill</a>, or <a href="#settings-for-sendgrid">SendGrid</a> as your SMTP provider, you may want to reference the appropriate example while working on this section. For Google Apps and Gmail-specific settings, check out our <a href="/docs/email/postfix/configure-postfix-to-send-mail-using-gmail-and-google-apps-on-debian-or-ubuntu">Configure Postfix to Send Mail Using Gmail and Google Apps on Debian or Ubuntu</a> guide.</p>

<ol>
<li><p>Open or create the <code>/etc/postfix/sasl_passwd</code> file, using your favorite text editor:</p>

<pre><code>sudo nano /etc/postfix/sasl_passwd
</code></pre></li>

<li><p>Add your destination (SMTP Host), username, and password in the following format:</p>

<dl class="file">
<dt>


		/etc/postfix/sasl_passwd 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>mail.isp.example<span class="o">]</span> username:password</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>

<blockquote class="note">
  <strong class="callout-title">Note</strong>
  <div><p>If you want to specify a non-default TCP Port (such as 587), then use the following format:</p>

<dl class="file">
<dt>


        /etc/postfix/sasl_passwd 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>mail.isp.example<span class="o">]</span>:587 username:password</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>
</div>
</blockquote>
</li>

<li><p>Create the hash db file for Postfix by running the <code>postmap</code> command:</p>

<pre><code>sudo postmap /etc/postfix/sasl_passwd
</code></pre></li>
</ol>

<p>If all went well, you should have a new file named <code>sasl_passwd.db</code> in the <code>/etc/postfix/</code> directory.</p>

<h2 id="securing-your-password-and-hash-database-files">Securing Your Password and Hash Database Files</h2>

<p>The <code>/etc/postfix/sasl_passwd</code> and the <code>/etc/postfix/sasl_passwd.db</code> files created in the previous steps contain your SMTP credentials in plain text.</p>

<p>For security reasons, you should change their permissions so that only the <strong>root</strong> user can read or write to the file. Run the following commands to change the ownership to root and update the permissions for the two files:</p>

<pre><code>sudo chown root:root /etc/postfix/sasl_passwd /etc/postfix/sasl_passwd.db
sudo chmod 0600 /etc/postfix/sasl_passwd /etc/postfix/sasl_passwd.db
</code></pre>

<h2 id="configuring-the-relay-server">Configuring the Relay Server</h2>

<p>In this section, you will configure the <code>/etc/postfix/main.cf</code> file to use the external SMTP server.</p>

<ol>
<li><p>Open the <code>/etc/postfix/main.cf</code> file with your favorite text editor:</p>

<pre><code>sudo nano /etc/postfix/main.cf
</code></pre></li>

<li><p>Update the <strong>relayhost</strong> parameter to show your external SMTP relay host. <strong>Important</strong>: If you specified a non-default TCP port in the <code>sasl_passwd</code> file, then you must use the same port when configuring the <strong>relayhost</strong> parameter.</p>

<dl class="file-excerpt">
<dt>


		/etc/postfix/main.cf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span><span class="lnt">2</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># specify SMTP relay host
</span><span class="c1"></span><span class="nv">relayhost</span> <span class="o">=</span> <span class="o">[</span>mail.isp.example<span class="o">]</span>:587</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>


<blockquote class="note">
  <strong class="callout-title">Note</strong>
  <div>Check the appropriate <a href="/docs/email/postfix/configure-postfix-to-send-mail-using-gmail-and-google-apps-on-debian-or-ubuntu">Google Apps</a>, <a href="#settings-for-mandrill">Mandrill</a>, or <a href="#settings-for-sendgrid">SendGrid</a> section for the details to enter here.</div>
</blockquote>
</li>

<li><p>At the end of the file, add the following parameters to enable authentication:</p>

<dl class="file-excerpt">
<dt>


		/etc/postfix/main.cf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># enable SASL authentication
</span><span class="c1"></span><span class="nv">smtp_sasl_auth_enable</span> <span class="o">=</span> yes
<span class="c1"># disallow methods that allow anonymous authentication.
</span><span class="c1"></span><span class="nv">smtp_sasl_security_options</span> <span class="o">=</span> noanonymous
<span class="c1"># where to find sasl_passwd
</span><span class="c1"></span><span class="nv">smtp_sasl_password_maps</span> <span class="o">=</span> hash:/etc/postfix/sasl_passwd
<span class="c1"># Enable STARTTLS encryption
</span><span class="c1"></span><span class="nv">smtp_use_tls</span> <span class="o">=</span> yes
<span class="c1"># where to find CA certificates
</span><span class="c1"></span><span class="nv">smtp_tls_CAfile</span> <span class="o">=</span> /etc/ssl/certs/ca-certificates.crt</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl>
</li>

<li><p>Save your changes.</p></li>

<li><p>Restart Postfix:</p>

<pre><code>sudo service postfix restart
</code></pre></li>
</ol>

<h2 id="testing-postfix">Testing Postfix</h2>

<p>The fastest way to test your configuration is to send an email to any unrelated email address, using the <code>mail</code> command:</p>

<pre><code>echo &quot;body of your email&quot; | mail -s &quot;This is a Subject&quot; -a &quot;From: you@example.com&quot; recipient@elsewhere.com
</code></pre>

<p>Alternatively, you can use Postfix&rsquo;s own sendmail implementation, by entering lines similar to those shown below:</p>

<pre><code>sendmail recipient@elsewhere.com
From: you@example.com
Subject: Test mail
This is a test email
.
</code></pre>

<h2 id="examples-of-postfix-configurations-with-different-providers">Examples of Postfix Configurations with Different Providers</h2>

<p>This section shows you settings for some popular mail services you can use as external SMTP servers. You may have to do some fine-tuning on your own to avoid Postfix logins being flagged as suspicious.</p>

<h3 id="settings-for-mandrill">Settings for Mandrill</h3>

<p>Use these settings for Mandrill.</p>

<ol>
<li><p>For <code>/etc/postfix/sasl_passwd</code>, use the following configuration with your own credentials:</p>

<dl class="file">
<dt>


		/etc/postfix/sasl_passwd 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>smtp.mandrillapp.com<span class="o">]</span>:587 USERNAME:API_KEY</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></li>

<li><p>For <code>/etc/postfix/main.cf</code>, use the following <strong>relayhost</strong>:</p>

<dl class="file">
<dt>


		/etc/postfix/main.cf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">relayhost</span> <span class="o">=</span> <span class="o">[</span>smtp.mandrillapp.com<span class="o">]</span>:587</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></li>

<li><p>Create the hash db file for Postfix by running the <code>postmap</code> command:</p>

<pre><code>sudo postmap /etc/postfix/sasl_passwd
</code></pre></li>

<li><p>Restart Postfix:</p>

<pre><code>sudo service postfix restart
</code></pre></li>
</ol>

<h3 id="settings-for-sendgrid">Settings for SendGrid</h3>

<p>Use these settings for SendGrid.</p>

<ol>
<li><p>For <code>/etc/postfix/sasl_passwd</code>, use the following configuration with your own credentials:</p>

<dl class="file">
<dt>


		/etc/postfix/sasl_passwd 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>smtp.sendgrid.net<span class="o">]</span>:587 USERNAME:PASSWORD</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></li>

<li><p>For <code>/etc/postfix/main.cf</code>, use the following <strong>relayhost</strong>:</p>

<dl class="file">
<dt>


		/etc/postfix/main.cf 


</dt>
<dd>




<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">relayhost</span> <span class="o">=</span> <span class="o">[</span>smtp.sendgrid.net<span class="o">]</span>:587</code></pre></td></tr></table>
</div>
</div>
</dd>
</dl></li>

<li><p>Create the hash db file for Postfix by running the <code>postmap</code> command:</p>

<pre><code>sudo postmap /etc/postfix/sasl_passwd
</code></pre></li>

<li><p>Restart Postfix:</p>

<pre><code>sudo service postfix restart
</code></pre></li>
</ol>

            

            

<h2>See Also</h2>
<ul>
    
    
    <li><a href="/docs/email/postfix/configure-postfix-to-send-mail-using-gmail-and-google-apps-on-debian-or-ubuntu/">Configure Postfix to Send Mail Using Gmail and Google Apps on Debian or Ubuntu</a></li>
    
    
    
    <li><a href="/docs/email/clients/install-roundcube-on-ubuntu-14-04/">Install Roundcube on Ubuntu 14.04</a></li>
    
    
</ul>


            
            
<p class="doc-license">This guide is published under a <a href="https://creativecommons.org/licenses/by-nd/4.0">CC BY-ND 4.0</a> license.</p>

          </div>
          <div id="doc-sidebar-container" class="col-sm-3 col-sm-pull-9 hidden-xs">
            <div id="doc-sidebar">
              <div markdown="0" class="doc-sidebar-inner" >
  <div class="input-group">
	<label class="sr-only" for="q">Search guides and tutorials</label>
	<input id="ss_keyword" name="q" type="text" class="form-control" placeholder="Search guides..."/>
	<span class="input-group-btn">
		<button type="submit" class="btn btn-blue" id="ds-search-btn"><span class="glyphicon glyphicon-search"></span></button>
	</span>
</div>
</div>

                
              <div class="doc-sidebar-inner" id="doc-sidebar-toc">
                <h3 id="doc-sidebar-title">In This Guide:</h3>
                <div class="sidebar sidebar-library nav navbar" id="markdown-toc">
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#updated-guide-for-gmail-and-google-apps">Updated Guide for Gmail and Google Apps</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installing-postfix">Installing Postfix</a></li>
<li><a href="#configuring-smtp-usernames-and-passwords">Configuring SMTP Usernames and Passwords</a></li>
<li><a href="#securing-your-password-and-hash-database-files">Securing Your Password and Hash Database Files</a></li>
<li><a href="#configuring-the-relay-server">Configuring the Relay Server</a></li>
<li><a href="#testing-postfix">Testing Postfix</a></li>
<li><a href="#examples-of-postfix-configurations-with-different-providers">Examples of Postfix Configurations with Different Providers</a>
<ul>
<li><a href="#settings-for-mandrill">Settings for Mandrill</a></li>
<li><a href="#settings-for-sendgrid">Settings for SendGrid</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
                </div>
              </div>
              
              <div class="library-rss">
  <a href="https://linode.com/docs/index.xml"><i class="fa fa-rss-square"></i> RSS feed</a>
</div>

              <div markdown="0" class="library-signup">
  <form action="//linode.us7.list-manage.com/subscribe/post?u=f9b54ed743e1629877750e3f4&amp;id=68bafea72a&SIGNUP=library-website"
    method="post" class="email-signup" target="_blank" novalidate="">
    <i class="fa fa-envelope"></i>
    <h6>Monthly Guides Update</h6>
    <input name="EMAIL" type="email" class="form-control input-sm"
    placeholder="Email address" required="" />
    <div style="position: absolute; left: -5000px;" aria-hidden="true">
      <input type="text" name="b_f9b54ed743e1629877750e3f4_68bafea72a"
      tabindex="-1" value="">
    </div>
    <div style="display:none">
      <input type="checkbox" value="4" name="group[13][4]"
      id="mce-group[13]-13-0" checked="">
    </div>
    <button type="submit" class="btn btn-blue btn-sm btn-border email-signup" value="Subscribe"
    name="subscribe" id="mc-embedded-subscribe">Sign Up</button>
  </form>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal" aria-hidden="true">
  <div class="modal-dialog modal-full">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="img-modal-title" class="modal-title">Image Detail</h4>
      </div>
      <div class="modal-body">
        <img id="img-modal-image" class="img-responsive">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-blue" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

        <footer>
            <section class="neutral some-space">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 text-center">
				<h3>Get paid to write for Linode.</h3>
				<p class="lead">We're always expanding our docs. If you like to help people, can write, and want to earn some cash, learn how you can <a href="/docs/contribute">earn up to $300 for every guide you write</a> and we publish.</p>
			</div>
		</div>
	</div>
</section>
            <section id="pre-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-7">
        <span>Get started in the Linode Cloud today.</span>
      </div>
      <div class="col-sm-5 pad-xs">
        <a id="btn-signup-bottom" class="btn btn-lg btn-full btn-green" href="https://manager.linode.com/session/signup">Create an Account</a>
      </div>
    </div>
  </div>
</section>

<section class="dark">
  <div class="container">

    <div class="row">
      <div class="footer-col">
        <h5><a href="https://www.linode.com/linodes">Overview</a></h5>
        <ul>
          <li><a href="https://www.linode.com/pricing">Plans &amp; Pricing</a></li>
          <li><a href="https://www.linode.com/linodes">Features</a></li>
          <li><a href="https://www.linode.com/addons">Add-Ons</a></li>
          <li><a href="https://www.linode.com/managed">Managed</a></li>
          <li><a href="https://www.linode.com/professional-services">Professional Services</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://linode.com/docs/">Resources</a></h5>
        <ul>
          <li><a href="https://linode.com/docs/">Guides &amp; Tutorials</a></li>
          <li><a href="https://www.linode.com/speedtest">Speed Test</a></li>
          <li><a href="https://forum.linode.com/">Forum</a></li>
          <li><a href="https://www.linode.com/chat">Chat</a></li>
          <li><a href="http://status.linode.com/">System Status</a></li>
        </ul>
      </div>


      <div class="footer-col">
        <h5><a href="https://www.linode.com/about">Company</a></h5>
        <ul>
          <li><a href="https://www.linode.com/about">About Us</a></li>
          <li><a href="https://blog.linode.com">Blog</a></li>
          <li><a href="https://www.linode.com/press">Press</a></li>
          <li><a href="https://www.linode.com/referrals">Referral System</a></li>
          <li><a href="https://www.linode.com/careers">Careers</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h5><a href="https://www.linode.com/contact">Contact Us</a></h5>
        <ul>
          <li><a href="tel:+18554546633">855-4-LINODE</a></li>
          <li><a href="tel:+18554546633">(855-454-6633)</a></li>
          <li><a href="tel:+16093807100">Intl.: +1 609-380-7100</a></li>
          <li><a href="mailto:support@linode.com">Email us</a></li>
          <li>
            <br />
            <a target="_blank" href="https://facebook.com/linode"><i class="fa fa-facebook-square"></i></a>
            <a target="_blank" href="https://twitter.com/linode"><i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://plus.google.com/+linode/"><i class="fa fa-google-plus-square"></i></a>
            <a target="_blank" href="https://linkedin.com/company/linode"><i class="fa fa-linkedin-square"></i></a>
            <a target="_blank" href="https://github.com/linode/"><i class="fa fa-github-square"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="dark-moar">
  <div class="container">
    <div id="footer-copyright" class="row">
      <div class="col text-center">
        &copy; 2017 Linode, LLC
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/tos">Terms of Service</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/privacy">Privacy Policy</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/security">Security</a>
      </div>

      <div class="col text-center">
        <a href="https://www.linode.com/compliance">Standards &amp; Compliance</a>
      </div>
    </div>
  </div>
</section>

        </footer>
        
             <script src="/docs/build/js/libs.js" type="text/javascript"></script>
<script src="/docs/build/js/main.js" type="text/javascript"></script>

        
        <script type="text/javascript">
$( "img[src^='\/docs\/assets']" ).each(function () {
  $( this ).parent().bind('click', false);
  $( this ).on('click', function(e) {
    var image_title = $( this ).attr('alt');
    var image_href = $( this ).parent().attr('href') || $( this ).attr('src');
    $( '#img-modal-image' ).attr('src', image_href);
    $( '#img-modal-title' ).text(image_title);
    $( '#img-modal' ).modal({ show: true });
  });
});
</script>



        
<script type="text/javascript">
 SidebarScroll.init()
</script>

    </body>
</html>