---
author:
  name: Gopal Raha
  email: gopalraha@outlook.com
description: 'How to Install and Deploy Askbot Question and Answer Forum with LetsEncrypt SSL on Ubuntu 16.04'
keywords: 'askbot, question and answer forum'
license: '[CC BY-ND 4.0](https://creativecommons.org/licenses/by-nd/4.0)'
modified: Monday, August 14th, 2017
modified_by:
  name: Gopal Raha
published: 'Monday, August 14th, 2017'
title: 'How to Install and Deploy AskBot with LetsEncrypt SSL on Ubuntu 16.04'
contributor:
  name: Gopal Raha
  link: https://github.com/gopalraha
external_resources:
 - '[AskBot Documentation](https://askbot.org/doc/index.html)'
 - '[AskBot Official Q&A Forum](https://askbot.org)'
 - '[AskBot Official Website](https://askbot.com)'
---    

[AskBot](https://askbot.com) is an open source question and answer forum written in Django web framework and Python. It provides rich features similarly like StackOverflow including Karma based forum system, voting, question and answer workflow, e-mail updates, content moderation, etc. It is used by most popular opensource community like Ask-Fedoraproject, Ask-Openstack and others. In this guide, you'll install and configure AskBot after that, you'll secure it using LetsEncrypt SSL certificates to deploy it on your Ubuntu 16.04 Linode.

## Before You Begin

1.  Familiarize yourself with our [Getting Started](/docs/getting-started) guide and complete the steps for setting your Linode's hostname and timezone.

2.  This guide will use `sudo` wherever possible. Complete the sections of our [Securing Your Server](/docs/security/securing-your-server) to create a standard user account, harden SSH access and remove unnecessary network services. Do **not** follow the Configure a Firewall section yet--this guide includes firewall rules specifically for an OpenVPN server.

3.  Update your system:
    	
	sudo apt-get update && sudo apt-get upgrade

4.  A Fully-Qualified Domain Name configured to point to your Linode. You can learn how to point domain names to Linode by following the How to [Add DNS records with Linode](/docs/networking/dns/dns-manager-overview#add-records) guide.

{: .note}
> This guide is written for a non-root user. Commands that require elevated privileges are prefixed with `sudo`. If you’re not familiar with the `sudo` command, see the [Users and Groups](/docs/tools-reference/linux-users-and-groups) guide.
 
## Installing Required Packages for AskBot

1.  First Install the required packages including Nginx, MySQL, Python PIP, etc.

	sudo apt-get install -y python-pip python-dev nginx mysql-server libmysqlclient-dev letsencrypt

## Create Database for AskBot

1.  Log in to MySQL as the root user:
        
	sudo mysql -u root -p

2.  When prompted, enter the root password.

3.  Create a New MySQL User and Database. In below, `askbotdb` is the name of the database, `askbotdbuser` is the database user, and `askbotdbpassword` is the database user’s password.

        CREATE DATABASE askbotdb CHARACTER SET UTF8;
	CREATE USER askbotdbuser@localhost IDENTIFIED BY 'askbotdbpassword';
	GRANT ALL PRIVILEGES ON askbotdb.* TO askbotdbuser@localhost;
	FLUSH PRIVILEGES;
	
4.  Exit MySQL.

        exit

5.  Now Restart MySQL service to make changes in effect:

	sudo systemctl restart mysql

## Install AskBot

1.  Create a Directory to install the AskBot. In below, `/var/www/html` is the location of AskBot installation directory.

	sudo mkdir -p /var/www/html

2.  In below we are using the pip to install the python packages now upgrade the **pip** to latest version. 

	sudo pip install --upgrade pip

3.  Now setup the isolated Python virtual environment by installing the **virtualenv** using pip.

	sudo pip install virtualenv

4.  Create a Python virtual environment using **virtualenv** command. In below, `/var/www/html/askbotenv` is the location of Python virtual environment.
	
	sudo virtualenv /var/www/html/askbotenv

5.  After that Activate the Python virtual environment using **source** command. In below, `/var/www/html/askbotenv/bin/activate` is the location of source file to activate the Python virtual environment

	source /var/www/html/askbotenv/bin/activate

6.  To install Askbot and its dependencies like mysqlclient, mysql-python and gunicorn **pip** is the best tool. 

	sudo pip install askbot mysqlclient mysql-python gunicorn

## Configure Askbot 

1.  Initialize the AskBot setup files by typing command **askbot-setup** . After that In below, **-n** `/var/www/html/` is the installation location of AskBot, **-e** `3` is the MySQL database type, **-d** `askbotdb` is the name of database, **-u** `askbotdbuser` is the database user, and **-p** `askbotdbpassword` is the database user’s password.

	sudo askbot-setup -n /var/www/html/ -e 3 -d askbotdb -u askbotdbuser -p askbotdbpassword

2.  After that run command collectstatic to place all the static files like (css,js,etc) into AskBot installation directory. In below `/var/www/html/manage.py` is the location of **manage.py** file.

	sudo python /var/www/html/manage.py collectstatic --noinput

3.  When you install Askbot the first time and any time you upgrade the Askbot, you should run these two commands. In below `/var/www/html/manage.py` is the location of **manage.py** file.

	sudo python /var/www/html/manage.py makemigrations
	sudo python /var/www/html/manage.py migrate

4.  Now Turn off the Debug settings to use AskBot in production environment. In below `/var/www/html/settings.py` is the location of **settings.py** file.

	sudo sed -i "s|DEBUG = True|DEBUG = False|" /var/www/html/settings.py

5.  After that change the static files (css,js,etc) URL from `/m/` to `/static/`. In below `/var/www/html/settings.py` is the location of **settings.py** file.

	sudo sed -i "s|STATIC_URL = '/m/'|STATIC_URL = '/static/'|" /var/www/html/settings.py

## Deploy Askbot with Letsencrypt SSL

1.  We passed Gunicorn a module by specifying the relative directory path to **wsgi.py** file, which is used to communicate with the Askbot application. In below `/var/www/html/wsgi.py` is the location of **wsgi.py** file.

sudo nano /var/www/html/wsgi.py 

Add the given lines

{: .file-excerpt}
/var/www/html/wsgi.py
:   ~~~ conf
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()
~~~

Press **CTRL+O** to save then **CTRL+X** to exit the program.

2.  Gunicorn can interact with our Askbot application, but we should implement starting and stopping it. To do this, we'll make a Systemd service file. In below `/var/www/html` is the working directory of AskBot, `/var/www/html/askbotenv/bin/gunicorn` is the location of Gunicorn application, `unix:/var/www/html/askbot.sock` is the location of askbot sock file.

sudo nano /etc/systemd/system/gunicorn.service

Add the given lines

{: .file-excerpt}
/etc/systemd/system/gunicorn.service
:   ~~~ conf
[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/var/www/html
ExecStart=/var/www/html/askbotenv/bin/gunicorn --workers 3 --bind unix:/var/www/html/askbot.sock wsgi:application

[Install]
WantedBy=multi-user.target
~~~

Press **CTRL+O** to save then **CTRL+X** to exit the program.

3.  Now Remove the default Nginx Server Blocks (Virtual Host) and default HTML pages

sudo rm -rf /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default /var/www/html/index.nginx-debian.html

4.  Now get the [Letsencrypt SSL](/docs/security/ssl/install-lets-encrypt-to-create-ssl-certificates) for your Domain . In below, `admin@example.com` is your email address and `example.com` is your domain name and `www.example.com` is your sub-domain name.

sudo letsencrypt certonly -a webroot --agree-tos --email admin@example.com --webroot-path=/var/www/html -d example.com -d www.example.com

5.  Add the Nginx server Blocks (Virtual Host) to run AskBot in Production Environment. In below, `example.com` is your domain name and `www.example.com` is your sub-domain name, `/var/www/html` is the working directory of AskBot, `unix:/var/www/html/askbot.sock` is the location of askbot sock file.

sudo nano /etc/nginx/sites-available/example.com 

Add the given lines

{: .file-excerpt}
/etc/nginx/sites-available/example.com
:   ~~~ conf
server {
        listen 80;
        server_name example.com www.example.com;
        return    301 https://$server_name$request_uri;
}

server {
        listen 443;
        server_name example.com www.example.com;
        
	ssl on;
        ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
        add_header Strict-Transport-Security max-age=31536000;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        
	location ~ /.well-known {
        allow all;
        root /var/www/html;
        }

        location = /favicon.ico { access_log off; log_not_found off; }
        location /static/ {
        root /var/www/html;
        }
		
        location / {
        include proxy_params;
        proxy_pass http://unix:/var/www/html/askbot.sock;
        }
}
~~~

Press **CTRL+O** to save then **CTRL+X** to exit the program.

6.  Add symbolic link between nginx server blocks

	sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/example.com

7.  Now change the ownersip of Askbot installation directory to `www-data` 

	sudo chown -R www-data:www-data /var/www/html

8.  Now start the Gunicorn service and enable it so that it starts automatically at every boot:

	sudo systemctl start gunicorn
	sudo systemctl enable gunicorn

9. Finally restart the nginx and reload the daemon

	sudo systemctl daemon-reload
	sudo systemctl restart nginx

## Setup Askbot


